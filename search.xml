<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Airbnb CSS / Sass 指南</title>
    <url>/2018/11/09/Airbnb-CSS-Sass-%E6%8C%87%E5%8D%97/</url>
    <content><![CDATA[<p><em>用更合理的方式写 CSS 和 Sass</em></p>
<p>翻译自 <a href="https://github.com/airbnb/css" target="_blank" rel="noopener">Airbnb CSS / Sass Styleguide</a></p>
<h2 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h2><ol>
<li><a href="#terminology">术语</a><ul>
<li><a href="#rule-declaration">规则声明</a></li>
<li><a href="#selectors">选择器</a></li>
<li><a href="#properties">属性</a></li>
</ul>
</li>
<li><a href="#css">CSS</a><ul>
<li><a href="#formatting">格式</a></li>
<li><a href="#comments">注释</a></li>
<li><a href="#oocss-and-bem">OOCSS 和 BEM</a></li>
<li><a href="#id-selectors">ID 选择器</a></li>
<li><a href="#javascript-hooks">JavaScript 钩子</a></li>
<li><a href="#border">边框</a></li>
</ul>
</li>
<li><a href="#sass">Sass</a><ul>
<li><a href="#syntax">语法</a></li>
<li><a href="#ordering-of-property-declarations">排序</a></li>
<li><a href="#variables">变量</a></li>
<li><a href="#mixins">Mixins</a></li>
<li><a href="#extend-directive">扩展指令</a></li>
<li><a href="#nested-selectors">嵌套选择器</a></li>
</ul>
</li>
</ol>
<p><a name="terminology"></a></p>
<h2 id="术语"><a href="#术语" class="headerlink" title="术语"></a>术语</h2><p><a name="rule-declaration"></a></p>
<h3 id="规则声明"><a href="#规则声明" class="headerlink" title="规则声明"></a>规则声明</h3><p>我们把一个（或一组）选择器和一组属性称之为 “规则声明”。举个例子：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.listing</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">18px</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">1.2</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a name="selectors"></a></p>
<h3 id="选择器"><a href="#选择器" class="headerlink" title="选择器"></a>选择器</h3><p>在规则声明中，“选择器” 负责选取 DOM 树中的元素，这些元素将被定义的属性所修饰。选择器可以匹配 HTML 元素，也可以匹配一个元素的类名、ID, 或者元素拥有的属性。以下是选择器的例子：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.my-element-class</span> &#123;</span><br><span class="line">  <span class="comment">/* ... */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-attr">[aria-hidden]</span> &#123;</span><br><span class="line">  <span class="comment">/* ... */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a name="properties"></a></p>
<h3 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h3><p>最后，属性决定了规则声明里被选择的元素将得到何种样式。属性以键值对形式存在，一个规则声明可以包含一或多个属性定义。以下是属性定义的例子：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* some selector */</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#f1f1f1</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#333</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a name="css"></a></p>
<h2 id="CSS"><a href="#CSS" class="headerlink" title="CSS"></a>CSS</h2><p><a name="formatting"></a></p>
<h3 id="格式"><a href="#格式" class="headerlink" title="格式"></a>格式</h3><ul>
<li>使用 2 个空格作为缩进。</li>
<li>类名建议使用破折号代替驼峰法。如果你使用 BEM，也可以使用下划线（参见下面的 <a href="#oocss-and-bem">OOCSS 和 BEM</a>）。</li>
<li>不要使用 ID 选择器。</li>
<li>在一个规则声明中应用了多个选择器时，每个选择器独占一行。</li>
<li>在规则声明的左大括号 <code>{</code> 前加上一个空格。</li>
<li>在属性的冒号 <code>:</code> 后面加上一个空格，前面不加空格。</li>
<li>规则声明的右大括号 <code>}</code> 独占一行。</li>
<li>规则声明之间用空行分隔开。</li>
</ul>
<p><strong>Bad</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.avatar</span>&#123;</span><br><span class="line">    <span class="attribute">border-radius</span>:<span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">border</span>:<span class="number">2px</span> solid white; &#125;</span><br><span class="line"><span class="selector-class">.no</span>, <span class="selector-class">.nope</span>, <span class="selector-class">.not_good</span> &#123;</span><br><span class="line">    // ...</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#lol-no</span> &#123;</span><br><span class="line">  // ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Good</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.avatar</span> &#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">2px</span> solid white;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.one</span>,</span><br><span class="line"><span class="selector-class">.selector</span>,</span><br><span class="line"><span class="selector-class">.per-line</span> &#123;</span><br><span class="line">  // ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a name="comments"></a></p>
<h3 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h3><ul>
<li>建议使用行注释 (在 Sass 中是 <code>//</code>) 代替块注释。</li>
<li>建议注释独占一行。避免行末注释。</li>
<li>给没有自注释的代码写上详细说明，比如：<ul>
<li>为什么用到了 z-index</li>
<li>兼容性处理或者针对特定浏览器的 hack</li>
</ul>
</li>
</ul>
<p><a name="oocss-and-bem"></a></p>
<h3 id="OOCSS-和-BEM"><a href="#OOCSS-和-BEM" class="headerlink" title="OOCSS 和 BEM"></a>OOCSS 和 BEM</h3><p>出于以下原因，我们鼓励使用 OOCSS 和 BEM 的某种组合：</p>
<ul>
<li>可以帮助我们理清 CSS 和 HTML 之间清晰且严谨的关系。</li>
<li>可以帮助我们创建出可重用、易装配的组件。</li>
<li>可以减少嵌套，降低特定性。</li>
<li>可以帮助我们创建出可扩展的样式表。</li>
</ul>
<p><strong>OOCSS</strong>，也就是 “Object Oriented CSS（面向对象的CSS）”，是一种写 CSS 的方法，其思想就是鼓励你把样式表看作“对象”的集合：创建可重用性、可重复性的代码段让你可以在整个网站中多次使用。</p>
<p>参考资料：</p>
<ul>
<li>Nicole Sullivan 的 <a href="https://github.com/stubbornella/oocss/wiki" target="_blank" rel="noopener">OOCSS wiki</a></li>
<li>Smashing Magazine 的 <a href="http://www.smashingmagazine.com/2011/12/12/an-introduction-to-object-oriented-css-oocss/" target="_blank" rel="noopener">Introduction to OOCSS</a></li>
</ul>
<p><strong>BEM</strong>，也就是 “Block-Element-Modifier”，是一种用于 HTML 和 CSS 类名的<em>命名约定</em>。BEM 最初是由 Yandex 提出的，要知道他们拥有巨大的代码库和可伸缩性，BEM 就是为此而生的，并且可以作为一套遵循 OOCSS 的参考指导规范。</p>
<ul>
<li>CSS Trick 的 <a href="https://css-tricks.com/bem-101/" target="_blank" rel="noopener">BEM 101</a></li>
<li>Harry Roberts 的 <a href="http://csswizardry.com/2013/01/mindbemding-getting-your-head-round-bem-syntax/" target="_blank" rel="noopener">introduction to BEM</a></li>
</ul>
<p><strong>示例</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">article</span> <span class="attr">class</span>=<span class="string">"listing-card listing-card--featured"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span> <span class="attr">class</span>=<span class="string">"listing-card__title"</span>&gt;</span>Adorable 2BR in the sunny Mission<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"listing-card__content"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Vestibulum id ligula porta felis euismod semper.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">article</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.listing-card</span> &#123; &#125;</span><br><span class="line"><span class="selector-class">.listing-card--featured</span> &#123; &#125;</span><br><span class="line"><span class="selector-class">.listing-card__title</span> &#123; &#125;</span><br><span class="line"><span class="selector-class">.listing-card__content</span> &#123; &#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>.listing-card</code> 是一个块（block），表示高层次的组件。</li>
<li><code>.listing-card__title</code> 是一个元素（element），它属于 <code>.listing-card</code> 的一部分，因此块是由元素组成的。</li>
<li><code>.listing-card--featured</code> 是一个修饰符（modifier），表示这个块与 <code>.listing-card</code> 有着不同的状态或者变化。</li>
</ul>
<p><a name="id-selectors"></a></p>
<h3 id="ID-选择器"><a href="#ID-选择器" class="headerlink" title="ID 选择器"></a>ID 选择器</h3><p>在 CSS 中，虽然可以通过 ID 选择元素，但大家通常都会把这种方式列为反面教材。ID 选择器给你的规则声明带来了不必要的高<a href="https://developer.mozilla.org/en-US/docs/Web/CSS/Specificity" target="_blank" rel="noopener">优先级</a>，而且 ID 选择器是不可重用的。</p>
<p>想要了解关于这个主题的更多内容，参见 <a href="http://csswizardry.com/2014/07/hacks-for-dealing-with-specificity/" target="_blank" rel="noopener">CSS Wizardry 的文章</a>，文章中有关于如何处理优先级的内容。</p>
<p><a name="javascript-hooks"></a></p>
<h3 id="JavaScript-钩子"><a href="#JavaScript-钩子" class="headerlink" title="JavaScript 钩子"></a>JavaScript 钩子</h3><p>避免在 CSS 和 JavaScript 中绑定相同的类。否则开发者在重构时通常会出现以下情况：轻则浪费时间在对照查找每个要改变的类，重则因为害怕破坏功能而不敢作出更改。</p>
<p>我们推荐在创建用于特定 JavaScript 的类名时，添加 <code>.js-</code> 前缀：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn btn-primary js-request-to-book"</span>&gt;</span>Request to Book<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><a name="border"></a></p>
<h3 id="边框"><a href="#边框" class="headerlink" title="边框"></a>边框</h3><p>在定义无边框样式时，使用 <code>0</code> 代替 <code>none</code>。</p>
<p><strong>Bad</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.foo</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Good</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.foo</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a name="sass"></a></p>
<h2 id="Sass"><a href="#Sass" class="headerlink" title="Sass"></a>Sass</h2><p><a name="syntax"></a></p>
<h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><ul>
<li>使用 <code>.scss</code> 的语法，不使用 <code>.sass</code> 原本的语法。</li>
<li>CSS 和 <code>@include</code> 声明按照以下逻辑排序（参见下文）</li>
</ul>
<p><a name="ordering-of-property-declarations"></a></p>
<h3 id="属性声明的排序"><a href="#属性声明的排序" class="headerlink" title="属性声明的排序"></a>属性声明的排序</h3><ol>
<li><p>属性声明</p>
<p> 首先列出除去 <code>@include</code> 和嵌套选择器之外的所有属性声明。</p>
 <figure class="highlight scss"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.btn-green</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: green;</span><br><span class="line">  <span class="attribute">font-weight</span>: bold;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>@include</code> 声明</p>
<p> 紧随后面的是 <code>@include</code>，这样可以使得整个选择器的可读性更高。</p>
 <figure class="highlight scss"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.btn-green</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: green;</span><br><span class="line">  <span class="attribute">font-weight</span>: bold;</span><br><span class="line">  <span class="keyword">@include</span> transition(background <span class="number">0.5s</span> ease);</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>嵌套选择器</p>
<p> <em>如果有必要</em>用到嵌套选择器，把它们放到最后，在规则声明和嵌套选择器之间要加上空白，相邻嵌套选择器之间也要加上空白。嵌套选择器中的内容也要遵循上述指引。</p>
 <figure class="highlight scss"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.btn</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: green;</span><br><span class="line">  <span class="attribute">font-weight</span>: bold;</span><br><span class="line">  <span class="keyword">@include</span> transition(background <span class="number">0.5s</span> ease);</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.icon</span> &#123;</span><br><span class="line">    <span class="attribute">margin-right</span>: <span class="number">10px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p><a name="variables"></a></p>
<h3 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h3><p>变量名应使用破折号（例如 <code>$my-variable</code>）代替 camelCased 和 snake_cased 风格。对于仅用在当前文件的变量，可以在变量名之前添加下划线前缀（例如 <code>$_my-variable</code>）。</p>
<p><a name="mixins"></a></p>
<h3 id="Mixins"><a href="#Mixins" class="headerlink" title="Mixins"></a>Mixins</h3><p>为了让代码遵循 DRY 原则（Don’t Repeat Yourself）、增强清晰性或抽象化复杂性，应该使用 mixin，这与那些命名良好的函数的作用是异曲同工的。虽然 mixin 可以不接收参数，但要注意，假如你不压缩负载（比如通过 gzip），这样会导致最终的样式包含不必要的代码重复。</p>
<p><a name="extend-directive"></a></p>
<h3 id="扩展指令"><a href="#扩展指令" class="headerlink" title="扩展指令"></a>扩展指令</h3><p>应避免使用 <code>@extend</code> 指令，因为它并不直观，而且具有潜在风险，特别是用在嵌套选择器的时候。即便是在顶层占位符选择器使用扩展，如果选择器的顺序最终会改变，也可能会导致问题。（比如，如果它们存在于其他文件，而加载顺序发生了变化）。其实，使用 @extend 所获得的大部分优化效果，gzip 压缩已经帮助你做到了，因此你只需要通过 mixin 让样式表更符合 DRY 原则就足够了。</p>
<p><a name="nested-selectors"></a></p>
<h3 id="嵌套选择器"><a href="#嵌套选择器" class="headerlink" title="嵌套选择器"></a>嵌套选择器</h3><p><strong>请不要让嵌套选择器的深度超过 3 层！</strong></p>
<figure class="highlight scss"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.page-container</span> &#123;</span><br><span class="line">  <span class="selector-class">.content</span> &#123;</span><br><span class="line">    <span class="selector-class">.profile</span> &#123;</span><br><span class="line">      <span class="comment">// STOP!</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>当遇到以上情况的时候，你也许是这样写 CSS 的：</p>
<ul>
<li>与 HTML 强耦合的（也是脆弱的）<em>—或者—</em></li>
<li>过于具体（强大）<em>—或者—</em></li>
<li>没有重用</li>
</ul>
<p>再说一遍: <strong>永远不要嵌套 ID 选择器！</strong></p>
<p>如果你始终坚持要使用 ID 选择器（劝你三思），那也不应该嵌套它们。如果你正打算这么做，你需要先重新检查你的标签，或者指明原因。如果你想要写出风格良好的 HTML 和 CSS，你是<strong>不</strong>应该这样做的。</p>
]]></content>
      <tags>
        <tag>CSS</tag>
        <tag>前端编码规范</tag>
      </tags>
  </entry>
  <entry>
    <title>关于郭宇</title>
    <url>/2018/08/14/about/</url>
    <content><![CDATA[<link rel="stylesheet" href="https://at.alicdn.com/t/font_798158_wn4udd6bx9.css">

<blockquote>
<ul>
<li><strong><icon class="iconfont gy-mail"></icon> Email</strong>: <a href="mailto:guoyu234@outlook.com" target="_blank" rel="noopener">guoyu234@outlook.com</a></li>
<li><strong><icon class="iconfont gy-github-fill"></icon> github</strong>: <a href="https://github.com/woodguoyu" target="_blank" rel="noopener">https://github.com/woodguoyu</a></li>
<li><strong><icon class="iconfont gy-QQ"></icon> QQ</strong>:2357480931</li>
<li><strong><icon class="iconfont gy-mobile-fill"></icon> phone</strong>:15656978324</li>
</ul>
</blockquote>
]]></content>
      <categories>
        <category>电影评论</category>
      </categories>
      <tags>
        <tag>me</tag>
      </tags>
  </entry>
  <entry>
    <title>ag-grid-vue 中文文档（入门）</title>
    <url>/2018/10/15/ag-grid-vue-%E4%B8%AD%E6%96%87%E6%96%87%E6%A1%A3%EF%BC%88%E5%85%A5%E9%97%A8%EF%BC%89/</url>
    <content><![CDATA[<link rel="stylesheet" href="https://at.alicdn.com/t/font_798158_wn4udd6bx9.css">

<p><a href="https://www.ag-grid.com/vue-getting-started/" target="_blank" rel="noopener"> ag-grid-vue 官方文档</a></p>
<p><a href="https://yuguo.site/2018/10/16/ag-grid-vue-%E4%B8%AD%E6%96%87%E6%96%87%E6%A1%A3%EF%BC%88%E8%BF%9B%E9%98%B6%EF%BC%89/#more" target="_blank" rel="noopener"> ag-grid-vue (进阶)</a></p>
<h1 id="在Vue项目中开始使用ag-Grid"><a href="#在Vue项目中开始使用ag-Grid" class="headerlink" title="在Vue项目中开始使用ag-Grid"></a>在Vue项目中开始使用ag-Grid</h1><blockquote>
<p>ag-Grid的“ag”部分代表“不可知”。内部ag-Grid引擎在TypeScript中实现，具有零依赖性。 ag-Grid通过包装器组件支持Vue。包装器允许您在应用程序中使用ag-Grid，就像任何其他Vue组件一样 - 您通过属性绑定传递配置并通过事件绑定处理事件。您甚至可以使用Vue组件来自定义网格UI和单元格内容/行为。</p>
</blockquote>
<blockquote>
<p>在本文中，我们将引导您完成将ag-Grid添加到现有Vue项目的必要步骤，并配置它的一些<a href="https://www.ag-grid.com/features-overview/" target="_blank" rel="noopener">基本功能</a>。我们将向您展示网格的一些基本原理（传递属性，使用API​​等）。为了更好的视觉效果和代码质量，我们还将使用Sass变量调整网格的视觉外观。</p>
</blockquote>
<h2 id="将ag-Grid添加到您的项目中"><a href="#将ag-Grid添加到您的项目中" class="headerlink" title="将ag-Grid添加到您的项目中"></a>将ag-Grid添加到您的项目中</h2><p>出于本教程的目的，我们将使用角度CLI来构建Vue应用程序。如果您的项目具有不同的配置，请不要担心。 Ag-Grid及其Vue包装器作为NPM包分发，可以与任何常见的Vue项目模块捆绑器设置一起使用。让我们按照Vue CLI说明操作 - 在终端中运行以下命令：<br><figure class="highlight"><table><tr><td class="code"><pre><span class="line">npm install -g @vue/cli</span><br><span class="line">vue create my-project    # accept the defaults for all prompts</span><br><span class="line">cd my-project</span><br><span class="line">npm run serve</span><br></pre></td></tr></table></figure></p>
<p>如果一切顺利，npm run serve已经启动了Web服务器。您可以在localhost：8080打开默认应用程序。<br><br><br>下一步，让我们添加ag-Grid NPM软件包。在我的项目中运行以下命令（您可能需要一个新的终端实例）：<br><figure class="highlight"><table><tr><td class="code"><pre><span class="line">npm install --save ag-grid-community ag-grid-vue</span><br></pre></td></tr></table></figure></p>
<p>经过几秒钟的等待。让我们来实际编码吧！作为第一步，让我们添加ag-Grid ag-Grid样式 - 在<code>src / main.js</code>中导入它们：<br><figure class="highlight"><table><tr><td class="code"><pre><span class="line">import "../node_modules/ag-grid-community/dist/styles/ag-grid.css";</span><br><span class="line">import "../node_modules/ag-grid-community/dist/styles/ag-theme-balham.css";</span><br></pre></td></tr></table></figure></p>
<p>上面的代码导入了网格“结构”样式表（ag-grid.css），以及一个可用的网格主题：（ag-theme-balham.css）。网格有几个不同的主题;选择一个与您的项目设计相匹配的。</p>
<p><icon class="iconfont gy-sound-fill"></icon><br><code>在后面的部分中，我们将介绍如何使用SCSS自定义主题外观，这是我们推荐的方法。</code><br>这将是一个简单的例子，我们可以删除<code>src / components</code>目录。我们的示例应用程序将存在于<code>src / App.vue</code>中。<br><br><br>我们将组件定义添加到模板中。编辑app / App.vue并替换脚手架代码：<br><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ag-grid-vue</span> <span class="attr">style</span>=<span class="string">"width: 500px; height: 500px;"</span></span></span><br><span class="line"><span class="tag">                 <span class="attr">class</span>=<span class="string">"ag-theme-balham"</span></span></span><br><span class="line"><span class="tag">                 <span class="attr">:columnDefs</span>=<span class="string">"columnDefs"</span></span></span><br><span class="line"><span class="tag">                 <span class="attr">:rowData</span>=<span class="string">"rowData"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ag-grid-vue</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>接下来，让我们声明基本的网格配置。编辑 <code>src / App.vue</code>：<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="keyword">import</span> &#123;AgGridVue&#125; <span class="keyword">from</span> <span class="string">"ag-grid-vue"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">        name: <span class="string">'App'</span>,</span><br><span class="line">        data() &#123;</span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                columnDefs: <span class="literal">null</span>,</span><br><span class="line">                rowData: <span class="literal">null</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        components: &#123;</span><br><span class="line">            AgGridVue</span><br><span class="line">        &#125;,</span><br><span class="line">        beforeMount() &#123;</span><br><span class="line">            <span class="keyword">this</span>.columnDefs = [</span><br><span class="line">                &#123;<span class="attr">headerName</span>: <span class="string">'Make'</span>, <span class="attr">field</span>: <span class="string">'make'</span>&#125;,</span><br><span class="line">                &#123;<span class="attr">headerName</span>: <span class="string">'Model'</span>, <span class="attr">field</span>: <span class="string">'model'</span>&#125;,</span><br><span class="line">                &#123;<span class="attr">headerName</span>: <span class="string">'Price'</span>, <span class="attr">field</span>: <span class="string">'price'</span>&#125;</span><br><span class="line">            ];</span><br><span class="line"></span><br><span class="line">            <span class="keyword">this</span>.rowData = [</span><br><span class="line">                &#123;<span class="attr">make</span>: <span class="string">'Toyota'</span>, <span class="attr">model</span>: <span class="string">'Celica'</span>, <span class="attr">price</span>: <span class="number">35000</span>&#125;,</span><br><span class="line">                &#123;<span class="attr">make</span>: <span class="string">'Ford'</span>, <span class="attr">model</span>: <span class="string">'Mondeo'</span>, <span class="attr">price</span>: <span class="number">32000</span>&#125;,</span><br><span class="line">                &#123;<span class="attr">make</span>: <span class="string">'Porsche'</span>, <span class="attr">model</span>: <span class="string">'Boxter'</span>, <span class="attr">price</span>: <span class="number">72000</span>&#125;</span><br><span class="line">            ];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>上面的代码提供了网格的两个基本配置属性 - 列定义（columnDefs）和数据（rowData）。在我们的例子中，列定义包含三列;每个列条目指定要在表的主体中显示的标题标签和数据字段。<br><br><br>这是ag-grid组件定义，带有两个属性绑定 - rowData和columnDefs。该组件还接受标准DOM样式和类。我们将类设置为ag-theme-balham，它定义了网格主题。您可能已经注意到，CSS类与我们之前导入的CSS文件的名称相匹配。<br><br><br>如果一切按预期工作，您应该看到一个简单的网格，如截图中的网格：<br> <img src="https://www.ag-grid.com/getting-started/step1.png" alt></p>
<h2 id="启用排序和筛选"><a href="#启用排序和筛选" class="headerlink" title="启用排序和筛选"></a>启用排序和筛选</h2><p>到现在为止还挺好。但是能够对数据进行排序以帮助我们查看哪辆车最便宜/最贵是不是很好？好吧，在ag-Grid中启用排序实际上非常简单 - 您需要做的就是将<code>enableSorting</code>属性设置为组件。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ag-grid-vue</span> <span class="attr">style</span>=<span class="string">"width: 500px; height: 500px;"</span></span></span><br><span class="line"><span class="tag">             <span class="attr">class</span>=<span class="string">"ag-theme-balham"</span></span></span><br><span class="line"><span class="tag">             <span class="attr">:columnDefs</span>=<span class="string">"columnDefs"</span></span></span><br><span class="line"><span class="tag">             <span class="attr">:rowData</span>=<span class="string">"rowData"</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">             <span class="attr">:enableSorting</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ag-grid-vue</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>添加属性后，您应该能够通过单击列标题对网格进行排序。单击标题可以通过升序，降序和无排序来切换。<br><br><br>我们的应用程序没有太多行，因此查找数据相当容易。但是很容易想象一个真实世界的应用程序如何拥有数百个（甚至数十万个！）或行，包含许多列。在这样的数据集中，过滤功能的存在是不可避免的。<br><br><br>与排序一样，启用过滤就像设置<code>enableFilter</code>属性一样简单<br><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ag-grid-vue</span> <span class="attr">style</span>=<span class="string">"width: 500px; height: 500px;"</span></span></span><br><span class="line"><span class="tag">             <span class="attr">class</span>=<span class="string">"ag-theme-balham"</span></span></span><br><span class="line"><span class="tag">             <span class="attr">:columnDefs</span>=<span class="string">"columnDefs"</span></span></span><br><span class="line"><span class="tag">             <span class="attr">:rowData</span>=<span class="string">"rowData"</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">             <span class="attr">:enableSorting</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">             <span class="attr">:enableFilter</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ag-grid-vue</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>设置此属性后，当您将标题悬停时，网格将显示一个小列菜单图标。按下它将显示一个带有过滤UI的弹出窗口，您可以选择过滤器的类型和要过滤的文本。<br><img src="https://www.ag-grid.com/getting-started/step2.png" alt></p>
<h2 id="获取远程数据"><a href="#获取远程数据" class="headerlink" title="获取远程数据"></a>获取远程数据</h2><p>模拟静态数据在真实的项目中不不靠谱的，大多数时候，我们需要处理来自后端的的数据。感谢 React，实现这一点实际上非常简单。请注意，实际数据提取是在网格组件之外执行的 - 我们使用的是HTML5提取API。<br><br><br>现在，让我们删除硬编码数据并从远程服务器获取一个。编辑 <code>src / App.vue</code> 并添加以下fetch语句：<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">beforeMount() &#123;</span><br><span class="line">    <span class="keyword">this</span>.columnDefs = [</span><br><span class="line">        &#123;<span class="attr">headerName</span>: <span class="string">'Make'</span>, <span class="attr">field</span>: <span class="string">'make'</span>&#125;,</span><br><span class="line">        &#123;<span class="attr">headerName</span>: <span class="string">'Model'</span>, <span class="attr">field</span>: <span class="string">'model'</span>&#125;,</span><br><span class="line">        &#123;<span class="attr">headerName</span>: <span class="string">'Price'</span>, <span class="attr">field</span>: <span class="string">'price'</span>&#125;</span><br><span class="line">    ];</span><br><span class="line"></span><br><span class="line">    fetch(<span class="string">'https://api.myjson.com/bins/15psn9'</span>)</span><br><span class="line">        .then(<span class="function"><span class="params">result</span> =&gt;</span> result.json())</span><br><span class="line">        .then(<span class="function"><span class="params">rowData</span> =&gt;</span> <span class="keyword">this</span>.rowData = rowData);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>远程数据与我们最初的数据相同，因此您不应该注意到对网格的任何实际更改。但是，如果打开开发者工具，您将看到执行其他HTTP请求。</p>
<h2 id="启用选择"><a href="#启用选择" class="headerlink" title="启用选择"></a>启用选择</h2><p>就在我们认为完成任务时，经理会出现一系列新要求！事实证明，我们需要允许用户从网格中选择某些行，并将它们标记为系统中的标记。我们将把旗帜切换状态和持久性留给后端团队。在我们这方面，我们应该启用选择，然后获取所选记录并通过API调用将它们传递给远程服务端点。<br><br><br>幸运的是，使用ag-Grid，上述任务非常简单。您可能已经猜到，这只是添加和更改几个属性的问题。<br><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ag-grid-vue</span> <span class="attr">style</span>=<span class="string">"width: 500px; height: 500px;"</span></span></span><br><span class="line"><span class="tag">                 <span class="attr">class</span>=<span class="string">"ag-theme-balham"</span></span></span><br><span class="line"><span class="tag">                 <span class="attr">:columnDefs</span>=<span class="string">"columnDefs"</span></span></span><br><span class="line"><span class="tag">                 <span class="attr">:rowData</span>=<span class="string">"rowData"</span></span></span><br><span class="line"><span class="tag">                 <span class="attr">:enableSorting</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">                 <span class="attr">:enableFilter</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">                 <span class="attr">rowSelection</span>=<span class="string">"multiple"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ag-grid-vue</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">import</span> &#123;AgGridVue&#125; <span class="keyword">from</span> <span class="string">"ag-grid-vue"</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">        name: <span class="string">'App'</span>,</span></span><br><span class="line">        data() &#123;</span><br><span class="line"><span class="javascript">            <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript">                columnDefs: <span class="literal">null</span>,</span></span><br><span class="line"><span class="javascript">                rowData: <span class="literal">null</span></span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        components: &#123;</span><br><span class="line">            AgGridVue</span><br><span class="line">        &#125;,</span><br><span class="line">        beforeMount() &#123;</span><br><span class="line"><span class="javascript">            <span class="keyword">this</span>.columnDefs = [</span></span><br><span class="line"><span class="javascript">                &#123;<span class="attr">headerName</span>: <span class="string">'Make'</span>, <span class="attr">field</span>: <span class="string">'make'</span>, <span class="attr">checkboxSelection</span>: <span class="literal">true</span>&#125;,</span></span><br><span class="line"><span class="javascript">                &#123;<span class="attr">headerName</span>: <span class="string">'Model'</span>, <span class="attr">field</span>: <span class="string">'model'</span>&#125;,</span></span><br><span class="line"><span class="javascript">                &#123;<span class="attr">headerName</span>: <span class="string">'Price'</span>, <span class="attr">field</span>: <span class="string">'price'</span>&#125;</span></span><br><span class="line">            ];</span><br><span class="line"></span><br><span class="line"><span class="javascript">            fetch(<span class="string">'https://api.myjson.com/bins/15psn9'</span>)</span></span><br><span class="line"><span class="javascript">                .then(<span class="function"><span class="params">result</span> =&gt;</span> result.json())</span></span><br><span class="line"><span class="javascript">                .then(<span class="function"><span class="params">rowData</span> =&gt;</span> <span class="keyword">this</span>.rowData = rowData);</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>接下来，让我们启用多行选择，以便用户可以选择多行：<br><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ag-grid-vue</span> <span class="attr">style</span>=<span class="string">"width: 500px; height: 500px;"</span></span></span><br><span class="line"><span class="tag">             <span class="attr">class</span>=<span class="string">"ag-theme-balham"</span></span></span><br><span class="line"><span class="tag">             <span class="attr">:columnDefs</span>=<span class="string">"columnDefs"</span></span></span><br><span class="line"><span class="tag">             <span class="attr">:rowData</span>=<span class="string">"rowData"</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">             <span class="attr">:enableSorting</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">             <span class="attr">:enableFilter</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">             <span class="attr">rowSelection</span>=<span class="string">"multiple"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ag-grid-vue</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p><icon class="iconfont gy-sound-fill"></icon><br><code>我们使用checkboxSelection：true为make列添加了一个复选框，然后启用了rowSelection =“multiple”的多行选择。</code></p>
<p>Great！现在，第一列包含一个复选框，单击该复选框时，将选择该行。我们唯一需要添加的是一个获取所选数据并将其发送到服务器的按钮。为此，我们将使用<code>ag-Grid API</code> - 我们将在gridReady事件中存储对网格和列API的引用<br><br><br>为了测试这个，我们将添加一个获取所选数据并将其发送到服务器的按钮。让我们继续进行这些更改：<br><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"getSelectedRows()"</span>&gt;</span>Get Selected Rows<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">ag-grid-vue</span> <span class="attr">style</span>=<span class="string">"width: 500px; height: 500px;"</span></span></span><br><span class="line"><span class="tag">                     <span class="attr">class</span>=<span class="string">"ag-theme-balham"</span></span></span><br><span class="line"><span class="tag">                     <span class="attr">:columnDefs</span>=<span class="string">"columnDefs"</span></span></span><br><span class="line"><span class="tag">                     <span class="attr">:rowData</span>=<span class="string">"rowData"</span></span></span><br><span class="line"><span class="tag">                     <span class="attr">:enableSorting</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">                     <span class="attr">:enableFilter</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">                     <span class="attr">rowSelection</span>=<span class="string">"multiple"</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">                     <span class="attr">:gridReady</span>=<span class="string">"onGridReady"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ag-grid-vue</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">import</span> &#123;AgGridVue&#125; <span class="keyword">from</span> <span class="string">"ag-grid-vue"</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">        name: <span class="string">'App'</span>,</span></span><br><span class="line">        data() &#123;</span><br><span class="line"><span class="javascript">            <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript">                columnDefs: <span class="literal">null</span>,</span></span><br><span class="line"><span class="javascript">                rowData: <span class="literal">null</span></span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        components: &#123;</span><br><span class="line">            AgGridVue</span><br><span class="line">        &#125;,</span><br><span class="line">        methods: &#123;</span><br><span class="line">            onGridReady(params) &#123;</span><br><span class="line"><span class="javascript">                <span class="keyword">this</span>.gridApi = params.api;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">this</span>.columnApi = params.columnApi;</span></span><br><span class="line">            &#125;,</span><br><span class="line">            getSelectedRows() &#123;</span><br><span class="line"><span class="javascript">                <span class="keyword">const</span> selectedNodes = <span class="keyword">this</span>.gridApi.getSelectedNodes();</span></span><br><span class="line"><span class="javascript">                <span class="keyword">const</span> selectedData = selectedNodes.map( <span class="function"><span class="params">node</span> =&gt;</span> node.data );</span></span><br><span class="line"><span class="javascript">                <span class="keyword">const</span> selectedDataStringPresentation = selectedData.map( <span class="function"><span class="params">node</span> =&gt;</span> node.make + <span class="string">' '</span> + node.model).join(<span class="string">', '</span>);</span></span><br><span class="line"><span class="javascript">                alert(<span class="string">`Selected nodes: <span class="subst">$&#123;selectedDataStringPresentation&#125;</span>`</span>);</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        beforeMount() &#123;</span><br><span class="line"><span class="javascript">            <span class="keyword">this</span>.columnDefs = [</span></span><br><span class="line"><span class="javascript">                &#123;<span class="attr">headerName</span>: <span class="string">'Make'</span>, <span class="attr">field</span>: <span class="string">'make'</span>, <span class="attr">checkboxSelection</span>: <span class="literal">true</span>&#125;,</span></span><br><span class="line"><span class="javascript">                &#123;<span class="attr">headerName</span>: <span class="string">'Model'</span>, <span class="attr">field</span>: <span class="string">'model'</span>&#125;,</span></span><br><span class="line"><span class="javascript">                &#123;<span class="attr">headerName</span>: <span class="string">'Price'</span>, <span class="attr">field</span>: <span class="string">'price'</span>&#125;</span></span><br><span class="line">            ];</span><br><span class="line"></span><br><span class="line"><span class="javascript">            fetch(<span class="string">'https://api.myjson.com/bins/15psn9'</span>)</span></span><br><span class="line"><span class="javascript">                .then(<span class="function"><span class="params">result</span> =&gt;</span> result.json())</span></span><br><span class="line"><span class="javascript">                .then(<span class="function"><span class="params">rowData</span> =&gt;</span> <span class="keyword">this</span>.rowData = rowData);</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>好吧，我们作弊了。呼叫提醒并不是对我们后端的调用。希望你能原谅我们这条捷径，以保持文章简洁明了。当然，在完成本教程后，您可以使用真实应用程序逻辑。</p>
<h2 id="分组（企业）"><a href="#分组（企业）" class="headerlink" title="分组（企业）"></a>分组（企业）</h2><p><icon class="iconfont gy-sound-fill"></icon><br><code>Grouping is a feature exclusive to the enterprise version of ag-Grid.</code></p>
<p>除了过滤和排序之外，分组是用户有效的看到大量数据的另一种有效方式。在我们的例子中，数据并不多。让我们切换到稍大的数据集：<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">beforeMount() &#123;</span><br><span class="line">    <span class="keyword">this</span>.columnDefs = [</span><br><span class="line">        &#123;<span class="attr">headerName</span>: <span class="string">'Make'</span>, <span class="attr">field</span>: <span class="string">'make'</span>, <span class="attr">checkboxSelection</span>: <span class="literal">true</span>&#125;,</span><br><span class="line">        &#123;<span class="attr">headerName</span>: <span class="string">'Model'</span>, <span class="attr">field</span>: <span class="string">'model'</span>&#125;,</span><br><span class="line">        &#123;<span class="attr">headerName</span>: <span class="string">'Price'</span>, <span class="attr">field</span>: <span class="string">'price'</span>&#125;</span><br><span class="line">    ];</span><br><span class="line"></span><br><span class="line">-    fetch(<span class="string">'https://api.myjson.com/bins/15psn9'</span>)</span><br><span class="line">-        .then(<span class="function"><span class="params">result</span> =&gt;</span> result.json())</span><br><span class="line">-        .then(<span class="function"><span class="params">rowData</span> =&gt;</span> <span class="keyword">this</span>.rowData = rowData);</span><br><span class="line">+    fetch(<span class="string">'https://api.myjson.com/bins/ly7d1'</span>)</span><br><span class="line">+        .then(<span class="function"><span class="params">result</span> =&gt;</span> result.json())</span><br><span class="line">+        .then(<span class="function"><span class="params">rowData</span> =&gt;</span> <span class="keyword">this</span>.rowData = rowData);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>然后，让我们启用ag-grid的企业功能。安装附加包：<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">npm install --save ag-grid-enterprise</span><br></pre></td></tr></table></figure></p>
<p>然后，将导入添加到src / main.js：<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"../node_modules/ag-grid/dist/styles/ag-grid.css"</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">"../node_modules/ag-grid/dist/styles/ag-theme-balham.css"</span>;</span><br><span class="line"></span><br><span class="line">+<span class="keyword">import</span> <span class="string">'ag-grid-enterprise'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">'./App'</span></span><br></pre></td></tr></table></figure></p>
<p>如果一切正常，您应该在控制台中看到一条消息，警告您缺少企业许可证。除此之外，网格还有一些UI改进 - 自定义上下文菜单和更高级的列菜单弹出窗口 - 随意环顾四周：<br><img src="https://www.ag-grid.com/getting-started/step3.png" alt></p>
<p>现在，让我们启用分组！添加<code>autoGroupColumnDef</code>属性，绑定到它，并使用rowGroupIndex更新columnDefs：<br><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"getSelectedRows()"</span>&gt;</span>Get Selected Rows<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ag-grid-vue</span> <span class="attr">style</span>=<span class="string">"width: 500px; height: 500px;"</span></span></span><br><span class="line"><span class="tag">                     <span class="attr">class</span>=<span class="string">"ag-theme-balham"</span></span></span><br><span class="line"><span class="tag">                     <span class="attr">:columnDefs</span>=<span class="string">"columnDefs"</span></span></span><br><span class="line"><span class="tag">                     <span class="attr">:rowData</span>=<span class="string">"rowData"</span></span></span><br><span class="line"><span class="tag">                     <span class="attr">:enableSorting</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">                     <span class="attr">:enableFilter</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">                     <span class="attr">rowSelection</span>=<span class="string">"multiple"</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">                     <span class="attr">:gridReady</span>=<span class="string">"onGridReady"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ag-grid-vue</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">import</span> &#123;AgGridVue&#125; <span class="keyword">from</span> <span class="string">"ag-grid-vue"</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">        name: <span class="string">'App'</span>,</span></span><br><span class="line">        data() &#123;</span><br><span class="line"><span class="javascript">            <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript">                columnDefs: <span class="literal">null</span>,</span></span><br><span class="line"><span class="javascript">                rowData: <span class="literal">null</span>,</span></span><br><span class="line"><span class="javascript">                gridApi: <span class="literal">null</span>,</span></span><br><span class="line"><span class="javascript">                columnApi: <span class="literal">null</span>,</span></span><br><span class="line"><span class="javascript">                autoGroupColumnDef: <span class="literal">null</span></span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        components: &#123;</span><br><span class="line">            AgGridVue</span><br><span class="line">        &#125;,</span><br><span class="line">        methods: &#123;</span><br><span class="line">            onGridReady(params) &#123;</span><br><span class="line"><span class="javascript">                <span class="keyword">this</span>.gridApi = params.api;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">this</span>.columnApi = params.columnApi;</span></span><br><span class="line">            &#125;,</span><br><span class="line">            getSelectedRows() &#123;</span><br><span class="line"><span class="javascript">                <span class="keyword">const</span> selectedNodes = <span class="keyword">this</span>.gridApi.getSelectedNodes();</span></span><br><span class="line"><span class="javascript">                <span class="keyword">const</span> selectedData = selectedNodes.map(<span class="function"><span class="params">node</span> =&gt;</span> node.data);</span></span><br><span class="line"><span class="javascript">                <span class="keyword">const</span> selectedDataStringPresentation = selectedData.map(<span class="function"><span class="params">node</span> =&gt;</span> node.make + <span class="string">' '</span> + node.model).join(<span class="string">', '</span>);</span></span><br><span class="line"><span class="javascript">                alert(<span class="string">`Selected nodes: <span class="subst">$&#123;selectedDataStringPresentation&#125;</span>`</span>);</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        beforeMount() &#123;</span><br><span class="line"><span class="javascript">            <span class="keyword">this</span>.columnDefs = [</span></span><br><span class="line"><span class="javascript">                &#123;<span class="attr">headerName</span>: <span class="string">'Make'</span>, <span class="attr">field</span>: <span class="string">'make'</span>, <span class="attr">rowGroupIndex</span>: <span class="number">0</span>&#125;,</span></span><br><span class="line"><span class="javascript">                &#123;<span class="attr">headerName</span>: <span class="string">'Model'</span>, <span class="attr">field</span>: <span class="string">'model'</span>&#125;,</span></span><br><span class="line"><span class="javascript">                &#123;<span class="attr">headerName</span>: <span class="string">'Price'</span>, <span class="attr">field</span>: <span class="string">'price'</span>&#125;</span></span><br><span class="line">            ];</span><br><span class="line"></span><br><span class="line"><span class="javascript">            <span class="keyword">this</span>.autoGroupColumnDef = &#123;</span></span><br><span class="line"><span class="javascript">                headerName: <span class="string">'Model'</span>,</span></span><br><span class="line"><span class="javascript">                field: <span class="string">'model'</span>,</span></span><br><span class="line"><span class="javascript">                cellRenderer: <span class="string">'agGroupCellRenderer'</span>,</span></span><br><span class="line">                cellRendererParams: &#123;</span><br><span class="line"><span class="javascript">                    checkbox: <span class="literal">true</span></span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;;</span><br><span class="line"></span><br><span class="line"><span class="javascript">            fetch(<span class="string">'https://api.myjson.com/bins/15psn9'</span>)</span></span><br><span class="line"><span class="javascript">                .then(<span class="function"><span class="params">result</span> =&gt;</span> result.json())</span></span><br><span class="line"><span class="javascript">                .then(<span class="function"><span class="params">rowData</span> =&gt;</span> <span class="keyword">this</span>.rowData = rowData);</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>接着走。网格现在按make对数据进行分组，同时在展开时列出模型字段值。请注意，分组也适用于复选框 - groupSelectsChildren属性添加了一个组级复选框，用于选择/取消选择组中的所有项目。</p>
<p><icon class="iconfont gy-sound-fill"></icon><br><code>如果这一步感觉有点难，请不要担心 - 分组功能非常强大，并支持最初可能不需要的复杂交互方案。分组文档部分包含大量真实可运行的示例，可以帮助您了解特定情况。</code></p>
<h2 id="自定义主题外观"><a href="#自定义主题外观" class="headerlink" title="自定义主题外观"></a>自定义主题外观</h2><p>我们要做的最后一件事是通过修改一些主题的Sass变量来改变网格外观。<br><br><br>默认情况下，ag-Grid提供了一组预先构建的主题样式表。如果我们想调整主题的颜色和字体，我们应该在项目中添加一个Sass预处理器，覆盖主题变量值，并引用ag-grid Sass文件而不是预先构建的样式表，以便变量覆盖是应用。<br><br><br>vue cli为我们做了很多工作（vue init webpack my-project），包括为Sass提供支持。让我们切换到使用提供的ag-Grid SCSS文件 - 首先，让我们创建一个新文件：<code>src / styles.scss</code>：<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$ag-icons-path: <span class="string">"../node_modules/ag-grid/src/styles/icons/"</span>;</span><br><span class="line"></span><br><span class="line">@<span class="keyword">import</span> <span class="string">"~ag-grid/src/styles/ag-grid.scss"</span>;</span><br><span class="line">@<span class="keyword">import</span> <span class="string">"~ag-grid/src/styles/ag-theme-balham.scss"</span>;</span><br></pre></td></tr></table></figure></p>
<p>请注意，我们必须通过设置$ ag-icons-path变量来帮助Sass预处理器。这是Sass的常见问题，因为外部图像路径被认为是相对于主文件。事实上，通过指定图标路径，我们也做了第一个主题覆盖！我们可以通过将变量中的路径更改为包含图标集的目录来更改整个主题图标集。<br><br><br>但是，让我们做一些更简单的事情。我们可以将交替的行背景颜色覆盖为灰蓝色。添加以下行：<br><figure class="highlight"><table><tr><td class="code"><pre><span class="line">$ag-icons-path:<span class="string">"../node_modules/ag-grid/src/styles/icons/"</span>;</span><br><span class="line">+$odd-row-background-color:#CFD8DC;</span><br></pre></td></tr></table></figure></p>
<p>我们现在需要在src / main.js中引用这个新文件：<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">-<span class="keyword">import</span> <span class="string">"../node_modules/ag-grid/dist/styles/ag-grid.css"</span>;</span><br><span class="line">-<span class="keyword">import</span> <span class="string">"../node_modules/ag-grid/dist/styles/ag-theme-balham.css"</span>;</span><br><span class="line"></span><br><span class="line">+<span class="keyword">import</span> <span class="string">'./styles.scss'</span>;</span><br></pre></td></tr></table></figure></p>
<p>如果一切配置正确，网格的第二行将变得稍暗。恭喜！您现在知道现在根据您的意愿改变网格 - 有几十个Sass变量可以让您控制字体系列和大小，边框颜色，标题背景颜色甚至单元格和列中的间距量。完整的Sass变量列表可在主题文档部分中找到。</p>
<h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><p>通过本教程，我们成功完成了许多工作。从三行/列设置的简陋开始，我们现在有一个网格，支持排序，过滤，绑定到远程数据，选择甚至分组！在这样做的同时，我们学习了如何配置网格，如何访问其API对象以及如何更改组件的样式。<br><br><br>不过，这只是表面上的问题。该网格提供了更多功能;使用自定义组件自定义单元格和标题的功能允许几乎无限的可能配置。</p>
<h2 id="下一步"><a href="#下一步" class="headerlink" title="下一步"></a>下一步</h2><p>你渴望更多？请访问Vue指南部分，了解有关<a href="https://www.ag-grid.com/best-vuejs-data-grid/" target="_blank" rel="noopener">ag-Grid Vue</a>的更多深入信息。<br>[ag-grid-vue（进阶）]（<a href="https://yuguo.site/2018/10/16/ag-grid-vue-%E4%B8%AD%E6%96%87%E6%96%87%E6%A1%A3%EF%BC%88%E8%BF%9B%E9%98%B6%EF%BC%89/#more）" target="_blank" rel="noopener">https://yuguo.site/2018/10/16/ag-grid-vue-%E4%B8%AD%E6%96%87%E6%96%87%E6%A1%A3%EF%BC%88%E8%BF%9B%E9%98%B6%EF%BC%89/#more）</a></p>
]]></content>
      <tags>
        <tag>vue</tag>
        <tag>ag-grid</tag>
      </tags>
  </entry>
  <entry>
    <title>ag-grid-vue 中文文档（进阶)</title>
    <url>/2018/10/16/ag-grid-vue-%E4%B8%AD%E6%96%87%E6%96%87%E6%A1%A3%EF%BC%88%E8%BF%9B%E9%98%B6%EF%BC%89/</url>
    <content><![CDATA[<link rel="stylesheet" href="https://at.alicdn.com/t/font_798158_wn4udd6bx9.css">

<p><a href="https://www.ag-grid.com/best-vuejs-data-grid/" target="_blank" rel="noopener"> ag-grid-vue 官方文档</a></p>
<p><a href="https://yuguo.site/2018/10/15/ag-grid-vue-%E4%B8%AD%E6%96%87%E6%96%87%E6%A1%A3%EF%BC%88%E5%85%A5%E9%97%A8%EF%BC%89/#more" target="_blank" rel="noopener"> ag-grid-vue (入门)</a></p>
<blockquote>
<p>此页面详细介绍了如何在Vue应用程序中设置ag-Grid。</p>
</blockquote>
<h2 id="ag-Grid-VueJS功能"><a href="#ag-Grid-VueJS功能" class="headerlink" title="ag-Grid VueJS功能"></a>ag-Grid VueJS功能</h2><p>使用ag-Grid Vue表组件时，ag-Grid的每个功能都可用。 Vue表格网格组件包含了ag-Grid的功能，它没有重复，因此在功能方面，核心ag-Grid和Vue ag-Grid之间没有区别。</p>
<h2 id="在Vue中配置ag-Grid"><a href="#在Vue中配置ag-Grid" class="headerlink" title="在Vue中配置ag-Grid"></a>在Vue中配置ag-Grid</h2><p>您可以通过VueJS以下列方式配置网格：</p>
<blockquote>
<ul>
<li>Events：网格外的所有数据都来自事件。这些使用VueJS事件绑定，例如：modelUpdated =“onModelUpdated”。当您与网格交互时，不同的事件被修复并输出文本到控制台（打开开发工具以查看控制台）。</li>
<li>Properties：所有数据都作为VueJS绑定提供给网格。这些绑定到ag-Grid属性，绕过元素属性。绑定的值来自父控制器。</li>
<li>Attributes：当属性只是一个简单的字符串值时，则不需要绑定，只需将值作为属性放置，例如rowHeight =“22”。如果属性是布尔值并且未提供值，则将其视为假。</li>
<li>Changing Properties：更改属性：当属性更改值时，VueJS会自动将新值传递到网格上。这用于上面“功能丰富的Vue表格网格示例”中的以下位置：a）右上角的“quickFilter”更新了网格的快速过滤器。 b）“显示工具面板”复选框的值绑定到网格的“showToolPanel”属性。 c）’刷新数据’为网格生成新数据并更新rowData属性。</li>
</ul>
</blockquote>
<p>请注意，Vuejs表网格的属性标记为不可变。因此，对于对象属性，对象引用必须更改以使网格产生影响。例如，rowData必须是要通知重绘的网格的新数据列表。</p>
<h2 id="定义VueJS组件以在ag-Grid中使用"><a href="#定义VueJS组件以在ag-Grid中使用" class="headerlink" title="定义VueJS组件以在ag-Grid中使用"></a>定义VueJS组件以在ag-Grid中使用</h2><p>可以通过以下方式将vueJS组件提供给ag-Grid（文档之后的部分如何在列定义中引用这些组件）：<br>简单的内联组件:<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">components: &#123;</span><br><span class="line">    <span class="string">'CubeComponent'</span>: &#123;</span><br><span class="line">        template: <span class="string">'&lt;span&gt;&#123;&#123; valueCubed() &#125;&#125;&lt;/span&gt;'</span>,</span><br><span class="line">        methods: &#123;</span><br><span class="line">            valueCubed() &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">this</span>.params.value * <span class="keyword">this</span>.params.value * <span class="keyword">this</span>.params.value;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    ParamsComponent: &#123;</span><br><span class="line">        template: <span class="string">'&lt;span&gt;Field: &#123;&#123;params.colDef.field&#125;&#125;, Value: &#123;&#123;params.value&#125;&#125;&lt;/span&gt;'</span>,</span><br><span class="line">        methods: &#123;</span><br><span class="line">            valueCubed() &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">this</span>.params.value * <span class="keyword">this</span>.params.value * <span class="keyword">this</span>.params.value;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>请注意，我们可以定义引用或不引用的属性名称 - 但请注意，为了在列定义中引用这些组件，您需要将它们作为区分大小写的字符串提供（请参阅下面的引用组件）。</p>
<p>简单的本地声明的组件<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> SquareComponent = Vue.extend(&#123;</span><br><span class="line">    template: <span class="string">'&lt;span&gt;&#123;&#123; valueSquared() &#125;&#125;&lt;/span&gt;'</span>,</span><br><span class="line">    methods: &#123;</span><br><span class="line">        valueSquared() &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">this</span>.params.value * <span class="keyword">this</span>.params.value;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>External .js Components<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// SquareComponent.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Vue.extend(&#123;</span><br><span class="line">    template: <span class="string">'&lt;span&gt;&#123;&#123; valueSquared() &#125;&#125;&lt;/span&gt;'</span>,</span><br><span class="line">    methods: &#123;</span><br><span class="line">        valueSquared() &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">this</span>.params.value * <span class="keyword">this</span>.params.value;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// MyGridApp.vue (your Component holding the ag-Grid component)</span></span><br><span class="line"><span class="keyword">import</span> SquareComponent <span class="keyword">from</span> <span class="string">'./SquareComponent'</span></span><br></pre></td></tr></table></figure></p>
<p>更复杂的外部单个文件组件（.vue）<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;span <span class="class"><span class="keyword">class</span></span>=<span class="string">"currency"</span>&gt;&#123;&#123; params.value | currency(<span class="string">'EUR'</span>) &#125;&#125;&lt;<span class="regexp">/span&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">"vue"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">export</span> <span class="keyword">default</span> Vue.extend(&#123;</span><br><span class="line">        filters: &#123;</span><br><span class="line">            currency(value, symbol) &#123;</span><br><span class="line">                <span class="keyword">let</span> result = value;</span><br><span class="line">                <span class="keyword">if</span> (!<span class="built_in">isNaN</span>(value)) &#123;</span><br><span class="line">                    result = value.toFixed(<span class="number">2</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span> symbol ? symbol + result : result;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&lt;style scoped&gt;</span></span><br><span class="line"><span class="regexp">    .currency &#123;</span></span><br><span class="line"><span class="regexp">        color: blue;</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">&lt;/</span>style&gt;</span><br></pre></td></tr></table></figure></p>
<p>然后，您可以将这些组件用作编辑器，渲染器或过滤器。您选择哪种方法取决于偏好以及组件的复杂性 - 对于简单的内联组件最简单，对于外部更复杂的组件.vue组件将更易于管理。<br><br><br>此外，如果您将组件定义为单个文件组件（.vue），那么您将能够利用范围内的CSS，否则将无法实现。</p>
<h2 id="为ag-Grid提供VueJS组件"><a href="#为ag-Grid提供VueJS组件" class="headerlink" title="为ag-Grid提供VueJS组件"></a>为ag-Grid提供VueJS组件</h2><p>定义了组件后，您可以在列定义中引用它们。<br><br><br>对于内联组件（即在components属性中定义），您可以通过区分大小写的属性名称引用组件，例如：<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// defined as a quoted string above: 'CubeComponent'</span></span><br><span class="line">&#123;</span><br><span class="line">    headerName: <span class="string">"Cube"</span>,</span><br><span class="line">    field: <span class="string">"value"</span>,</span><br><span class="line">    cellRendererFramework: <span class="string">'CubeComponent'</span>,</span><br><span class="line">    colId: <span class="string">"cube"</span>,</span><br><span class="line">    width: <span class="number">125</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// defined as a value above: ParamsComponent</span></span><br><span class="line">&#123;</span><br><span class="line">    headerName: <span class="string">"Row Params"</span>,</span><br><span class="line">    field: <span class="string">"row"</span>,</span><br><span class="line">    cellRendererFramework: <span class="string">'ParamsComponent'</span>,</span><br><span class="line">    colId: <span class="string">"params"</span>,</span><br><span class="line">    width: <span class="number">245</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></p>
<p>在这两种情况下，我们都需要将要在单元格中使用的组件定义为区分大小写的字符串。<br><br><br>对于在应用程序组件外部定义的组件，您可以通过引用传递它们。例如：<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// import or create our component outside of our app</span></span><br><span class="line"><span class="keyword">import</span> CurrencyComponent <span class="keyword">from</span> <span class="string">'./CurrencyComponent.vue'</span></span><br><span class="line"><span class="keyword">let</span> SquareComponent = Vue.extend(&#123;...rest <span class="keyword">of</span> the component</span><br><span class="line"></span><br><span class="line"><span class="comment">// reference the component by reference</span></span><br><span class="line"><span class="keyword">this</span>.columnDefs = [</span><br><span class="line">    &#123;<span class="attr">headerName</span>: <span class="string">"Row"</span>, <span class="attr">field</span>: <span class="string">"row"</span>, <span class="attr">width</span>: <span class="number">140</span>&#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        headerName: <span class="string">"Square"</span>,</span><br><span class="line">        field: <span class="string">"value"</span>,</span><br><span class="line">        cellRendererFramework: SquareComponent,</span><br><span class="line">        editable: <span class="literal">true</span>,</span><br><span class="line">        colId: <span class="string">"square"</span>,</span><br><span class="line">        width: <span class="number">125</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        headerName: <span class="string">"Currency (Filter)"</span>,</span><br><span class="line">        field: <span class="string">"currency"</span>,</span><br><span class="line">        cellRendererFramework: CurrencyComponent,</span><br><span class="line">        colId: <span class="string">"params"</span>,</span><br><span class="line">        width: <span class="number">150</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p>
<p>请参阅有关单元格渲染器，单元格编辑器和过滤器的相关章节，以便在ag-Grid中配置和使用VueJS组件。<br><br><br>富网格示例通过以下方式通过模板配置ag-Grid：<br><figure class="highlight"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ag-grid-vue</span> <span class="attr">style</span>=<span class="string">"width: 100%; height: 350px;"</span> <span class="attr">class</span>=<span class="string">"ag-theme-balham"</span></span></span><br><span class="line"><span class="tag">    // <span class="attr">these</span> <span class="attr">are</span> <span class="attr">attributes</span>, <span class="attr">not</span> <span class="attr">bound</span>, <span class="attr">give</span> <span class="attr">explicit</span> <span class="attr">values</span> <span class="attr">here</span></span></span><br><span class="line"><span class="tag">    <span class="attr">rowHeight</span>=<span class="string">"22"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">rowSelection</span>=<span class="string">"multiple"</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">    // <span class="attr">these</span> <span class="attr">are</span> <span class="attr">boolean</span> <span class="attr">values</span></span></span><br><span class="line"><span class="tag">    // (<span class="attr">leaving</span> <span class="attr">them</span> <span class="attr">out</span> <span class="attr">will</span> <span class="attr">default</span> <span class="attr">them</span> <span class="attr">to</span> <span class="attr">false</span>)</span></span><br><span class="line"><span class="tag">    <span class="attr">:enableColResize</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:enableSorting</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">    // <span class="attr">these</span> <span class="attr">are</span> <span class="attr">bound</span> <span class="attr">properties</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:gridOptions</span>=<span class="string">"gridOptions"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:columnDefs</span>=<span class="string">"columnDefs"</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">    // <span class="attr">this</span> <span class="attr">is</span> <span class="attr">a</span> <span class="attr">callback</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:isScrollLag</span>=<span class="string">"myIsScrollLagFunction"</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">    // <span class="attr">these</span> <span class="attr">are</span> <span class="attr">registering</span> <span class="attr">event</span> <span class="attr">callbacks</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:modelUpdated</span>=<span class="string">"onModelUpdated"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:cellClicked</span>=<span class="string">"onCellClicked"</span></span></span><br><span class="line">&lt;/ag-grid-vue&gt;</span><br></pre></td></tr></table></figure></p>
<p>以上是您在VueJS应用程序中开始使用ag-Grid所需的全部内容。现在是在一个简单的应用程序中尝试它并获得一些数据显示和练习一些网格设置的好时机，然后再转到cellRendering和自定义过滤的高级功能。</p>
<h2 id="Ag-Grid中的Vue-Grid示例"><a href="#Ag-Grid中的Vue-Grid示例" class="headerlink" title="Ag-Grid中的Vue Grid示例"></a>Ag-Grid中的Vue Grid示例</h2><h3 id="示例：Rich-Grid"><a href="#示例：Rich-Grid" class="headerlink" title="示例：Rich Grid"></a>示例：Rich Grid</h3><p><a href="https://www.ag-grid.com/best-vuejs-data-grid/#example-rich-grid-without-components" target="_blank" rel="noopener">源文档</a></p>
<h2 id="父子组件的通信"><a href="#父子组件的通信" class="headerlink" title="父子组件的通信"></a>父子组件的通信</h2><p>有多种方法可以在Vue中管理组件通信（共享服务，局部变量等），但是您经常需要一种简单的方法让“父”组件知道“子”组件上发生了某些事情。在这种情况下，最简单的路由是使用gridOptions.context来保存对父级的引用，然后子级可以访问该父级。<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// in the parent component - the component that hosts ag-grid-angular and specifies which angular components to use in the grid</span></span><br><span class="line">beforeMount() &#123;</span><br><span class="line">    <span class="keyword">this</span>.gridOptions = &#123;</span><br><span class="line">        context: &#123;</span><br><span class="line">            componentParent: <span class="keyword">this</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">this</span>.createRowData();</span><br><span class="line">    <span class="keyword">this</span>.createColumnDefs();</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line"><span class="comment">// in the child component - the Vue components created dynamically in the grid</span></span><br><span class="line"><span class="comment">// the parent component can then be accessed as follows:</span></span><br><span class="line"><span class="keyword">this</span>.params.context.componentParent</span><br></pre></td></tr></table></figure></p>
<p>请注意，虽然我们在这里使用了componentParent作为属性名称，但它可以是任何东西 - 重点是您可以使用上下文机制在组件之间共享信息。</p>
<h3 id="网格组件中的路由器链接"><a href="#网格组件中的路由器链接" class="headerlink" title="网格组件中的路由器链接"></a>网格组件中的路由器链接</h3><p>您可以在网格中提供Vue Router链接，但是您需要确保为正在创建的网格组件提供路由器。<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// create a new VueRouter, or make the "root" Router available</span></span><br><span class="line"><span class="keyword">import</span> VueRouter <span class="keyword">from</span> <span class="string">"vue-router"</span>;</span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter();</span><br><span class="line"></span><br><span class="line"><span class="comment">// pass a valid Router object to the Vue grid components to be used within the grid</span></span><br><span class="line">components: &#123;</span><br><span class="line">    <span class="string">'ag-grid-vue'</span>: AgGridVue,</span><br><span class="line">    <span class="string">'link-component'</span>: &#123;</span><br><span class="line">        router,</span><br><span class="line">        template: <span class="string">'&lt;router-link to="/master-detail"&gt;Jump to Master/Detail&lt;/router-link&gt;'</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line"><span class="comment">// You can now use Vue Router links within you Vue Components within the Grid</span></span><br><span class="line">&#123;</span><br><span class="line">    headerName: <span class="string">"Link Example"</span>,</span><br><span class="line">    cellRendererFramework: <span class="string">'link-component'</span>,</span><br><span class="line">    width: <span class="number">200</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="Building-amp-Bundling"><a href="#Building-amp-Bundling" class="headerlink" title="Building &amp; Bundling"></a>Building &amp; Bundling</h3><p>有许多方法可以构建和/或捆绑VueJS应用程序。我们使用简化的Webpack构建作为GitHub上<a href="https://github.com/ag-grid/ag-grid-vue-example" target="_blank" rel="noopener">ag-grid-vue示例</a>的一部分提供了完整的工作示例。<br><br><br><a href="https://yuguo.site/2018/10/15/ag-grid-vue-%E4%B8%AD%E6%96%87%E6%96%87%E6%A1%A3%EF%BC%88%E5%85%A5%E9%97%A8%EF%BC%89/#more" target="_blank" rel="noopener"> ag-grid-vue (入门)</a></p>
]]></content>
      <tags>
        <tag>vue</tag>
        <tag>ag-grid</tag>
      </tags>
  </entry>
  <entry>
    <title>github Hexo 搭建博客并使用 nexT主题 &amp; 绑定域名</title>
    <url>/2018/08/14/github-hexo-%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/</url>
    <content><![CDATA[<h2 id="本篇适用于小白，你可以get到以下功能"><a href="#本篇适用于小白，你可以get到以下功能" class="headerlink" title="本篇适用于小白，你可以get到以下功能"></a>本篇适用于小白，你可以get到以下功能</h2><blockquote>
<ul>
<li>使用github &amp; hexo 创建自己的博客</li>
<li>更换 nexT 主题</li>
<li>增加各样的功能（字数统计，阅读时间，分类，标签，站内搜索,阅读次数，头像，评论区 ，百度 google bing 站点收录 等等）</li>
<li>绑定自己的域名</li>
</ul>
</blockquote>
<h2 id="github-篇"><a href="#github-篇" class="headerlink" title="github 篇"></a>github 篇</h2><hr>
<blockquote>
<p>在此假设你已经有了 <a href="https://github.com/" target="_blank" rel="noopener"> <icon class="iconfont gy-github-fill"></icon> 前往 github 账号</a> </p>
</blockquote>
<h2 id="github-New-repository-新建仓库"><a href="#github-New-repository-新建仓库" class="headerlink" title="github New repository //新建仓库"></a>github New repository //新建仓库</h2><h3 id="进入代码库创建页面："><a href="#进入代码库创建页面：" class="headerlink" title="进入代码库创建页面："></a>进入代码库创建页面：</h3><p><img src="/images/1.png" alt></p>
<h3 id="创建仓库名称，仓库名为-xxxx-github-io-“xxxxx”-一定要与自己的-github-账户一致！！！下图为例"><a href="#创建仓库名称，仓库名为-xxxx-github-io-“xxxxx”-一定要与自己的-github-账户一致！！！下图为例" class="headerlink" title="创建仓库名称，仓库名为 xxxx.github.io , “xxxxx” 一定要与自己的 github 账户一致！！！下图为例"></a>创建仓库名称，<strong>仓库名为 xxxx.github.io </strong>, “xxxxx” 一定要与自己的 github 账户一致！！！下图为例</h3><p><img src="/images/2.png" alt><br>创建完毕后页面自动跳转如下页面，此时访问 xxxx.github.io（你自己的主页），404。需要第三部操作，开启 GitHub Pages（<a href="https://help.github.com/articles/what-is-github-pages/" target="_blank" rel="noopener">什么是GitHub Pages</a> )）<br><img src="/images/3.png" alt></p>
<h3 id="点击-Settings-进入页面，下拉-找到-GitHub-Pages-，会发现如下图所示，意思是你当当前的仓库内容为空，所以默认为-disabled-状态"><a href="#点击-Settings-进入页面，下拉-找到-GitHub-Pages-，会发现如下图所示，意思是你当当前的仓库内容为空，所以默认为-disabled-状态" class="headerlink" title="点击 Settings,进入页面，下拉 找到 GitHub Pages ，会发现如下图所示，意思是你当当前的仓库内容为空，所以默认为 disabled 状态"></a>点击 Settings,进入页面，下拉 找到 GitHub Pages ，会发现如下图所示，意思是你当当前的仓库内容为空，所以默认为 disabled 状态</h3><p><img src="/images/4.png" alt><br>为了证明下自己的站点可以打开，只需要增加一个 index.html 文件即可，方式多样，比如利用 Choose a theme,选择 github 提供的一个主题模板，会自动生成一些文件来让项目自动启动 GitHub Pages。<br><img src="/images/5.png" alt><br>我默认选择了第一个，只是为了验证站点能否打开。这个随便，后面会被我们自己创建的 hexo 项目覆盖掉，提交后，再次访问 xxxx.github.com ,就能看到下面的界面，说明项目木问题<br><img src="/images/6.png" alt></p>
<h2 id="什么是-Hexo？"><a href="#什么是-Hexo？" class="headerlink" title="什么是 Hexo？"></a>什么是 Hexo？</h2><blockquote>
<p>Hexo 是一个快速、简洁且高效的博客框架。Hexo 使用 Markdown（或其他渲染引擎）解析文章，在几秒内，即可利用靓丽的主题生成静态网页。</p>
</blockquote>
<h2 id="安装-Hexo"><a href="#安装-Hexo" class="headerlink" title="安装 Hexo"></a>安装 Hexo</h2><p><icon class="iconfont gy-tuding"></icon><a href="https://hexo.io/zh-cn/docs/" target="_blank" rel="noopener">点我进入Hexo 手册</a></p>
<blockquote>
<p>仔细阅读文档，严格安装文档操作</p>
</blockquote>
<h2 id="创建-本地-博客站点"><a href="#创建-本地-博客站点" class="headerlink" title="创建 本地 博客站点"></a>创建 <strong>本地</strong> 博客站点</h2><blockquote>
<p>在此默认成功安装 Hexo</p>
</blockquote>
<h3 id="本地初始化项目"><a href="#本地初始化项目" class="headerlink" title="本地初始化项目"></a>本地初始化项目</h3><blockquote>
<p>hexo init  hexo  // hexo 是项目名称，这个随意 </p>
</blockquote>
<p><img src="/images/7.png" alt></p>
<h3 id="本地项目启动-预览"><a href="#本地项目启动-预览" class="headerlink" title="本地项目启动 // 预览"></a>本地项目启动 // 预览</h3><blockquote>
<p>hexo g  //g是generetor的缩写，生成博客<br><br>hexo s  //s是server的缩写，启动服务</p>
</blockquote>
<p>项目成功启动后是酱紫的</p>
<p> <img src="/images/8.png" alt><br> 默认情况下 启动的是 localhost:4000     4000端口</p>
<p> 若端口被占用，会出现下图所示。 可使用 自定义端口命令</p>
<blockquote>
<p>hexo s -p 5500</p>
</blockquote>
<p> <img src="/images/9.png" alt><br>打开浏览器 输入 <a href="http://localhost:xxxx/" target="_blank" rel="noopener">http://localhost:xxxx/</a>  </p>
<h3 id="安装并配置-nexT-主题"><a href="#安装并配置-nexT-主题" class="headerlink" title="安装并配置 nexT 主题"></a>安装并配置 nexT 主题</h3><ol>
<li><p>在终端窗口下，定位到 Hexo 站点目录下。使用 Git checkout 代码：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git clone https://github.com/iissnan/hexo-theme-next themes/next</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>启用主题</strong> ：打开 站点配置文件 _config.yml（nexT 主题配置也有 _config.yml 配置文件，切忌弄混乱）， 找到 theme 字段，并将其值更改为 next。hexo s 启动服务（上有所述），预览。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">theme: next</span><br></pre></td></tr></table></figure>
</li>
<li><p>主题配置</p>
</li>
</ol>
<p><a href="http://theme-next.iissnan.com/getting-started.html" target="_blank" rel="noopener">nexT 主题配置文档</a></p>
<p>建议仔细阅读文档，官方文档叙述很奈斯，enjoy</p>
<ol start="4">
<li><p>站点配置文件 _config.yml，安装自己的站点配置 repo 字段</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repo: https://github.com/woodguoyu/woodguoyu.github.io.git</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure>
</li>
<li><p>发布至 github，执行以下命令行</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">1. hexo clean</span><br><span class="line">2. hexo g (generate)</span><br><span class="line">3. hexo d (deploy)</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>发布完毕，打开自己的 xxxx.github.io ，查看。可能不能马上同步，等几分钟也是可以的。</p>
<p>Enjoy One Min </p>
<p>  <img src="/images/10.gif" alt></p>
<p>one min latter</p>
<p> <img src="/images/11.png" alt></p>
<h3 id="添加自己的博客文章"><a href="#添加自己的博客文章" class="headerlink" title="添加自己的博客文章"></a>添加自己的博客文章</h3><ol>
<li>在终端窗口下，定位到 Hexo 站点目录下<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">hexo new post &apos;文章名称&apos;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>生成文档在  <strong>博客/source/_post/文章名称.md</strong>，hexo 会自动编译markdown 文件</p>
<ol start="2">
<li>编辑文档</li>
<li>重新发布<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">1. hexo clean</span><br><span class="line">2. hexo g (generate)</span><br><span class="line">3. hexo d (deploy)</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>整个过程走下来，尤其是配置 nexT 主题各个功能。问题倒是不少，遇到的纸老虎后续会添加进去，如若看到，尽可能少走弯路。</p>
<p><img src="/images/12.png" alt></p>
<blockquote>
<p>待续</p>
</blockquote>
<link rel="stylesheet" href="https://at.alicdn.com/t/font_798158_wn4udd6bx9.css">]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>iview2 升级 iview3</title>
    <url>/2018/08/24/iview2-%E5%8D%87%E7%BA%A7-iview3/</url>
    <content><![CDATA[<link rel="stylesheet" href="https://at.alicdn.com/t/font_798158_wn4udd6bx9.css">

<h1 id="版本升级背景"><a href="#版本升级背景" class="headerlink" title="版本升级背景"></a>版本升级背景</h1><h2 id="iview-版本迭代-（截至-2018-08-24）"><a href="#iview-版本迭代-（截至-2018-08-24）" class="headerlink" title=" iview 版本迭代 （截至 2018-08-24）"></a><icon class="iconfont gy-sound"></icon> iview 版本迭代 （截至 <code>2018-08-24</code>）</h2><blockquote>
<ul>
<li>V 3.0.1 <code>2018-08-22</code></li>
<li>V 3.0.0 <code>2018-07-28</code><br>V 3.0.1 主要修复了 V 3.0.0 的一些 bug，不影响版本正常升级。</li>
</ul>
</blockquote>
<h1 id="版本升级要素"><a href="#版本升级要素" class="headerlink" title="版本升级要素"></a>版本升级要素</h1><h2 id="Button"><a href="#Button" class="headerlink" title="Button"></a><a href="https://www.iviewui.com/components/button" target="_blank" rel="noopener">Button</a></h2><blockquote>
<ul>
<li>废弃 type ghost，原先的 default 样式有改变。 <code>不兼容</code></li>
<li>新增属性 custom-icon，支持自定义图标。</li>
<li>新增属性 to、replace、target，支持点击直接跳转。</li>
<li>新增幽灵属性 ghost，可以使按钮背景透明，常用于有色背景上。</li>
</ul>
</blockquote>
<h2 id="Icon"><a href="#Icon" class="headerlink" title="Icon"></a><a href="https://www.iviewui.com/components/icon" target="_blank" rel="noopener">Icon</a></h2><blockquote>
<ul>
<li>Icon 的图标升级至 ionicons 3.0 图标，图标名称有改变。<code>不兼容</code></li>
<li>新增属性 custom，支持自定义图标。</li>
</ul>
</blockquote>
<h2 id="Breadcrumb"><a href="#Breadcrumb" class="headerlink" title="Breadcrumb"></a><a href="https://www.iviewui.com/components/breadcrumb" target="_blank" rel="noopener">Breadcrumb</a></h2><blockquote>
<ul>
<li>新增属性 target。</li>
<li>Breadcrumb 废弃 href 属性。<code>不兼容</code></li>
<li>在链接上会显示 a 标签的 href 值。</li>
</ul>
</blockquote>
<h2 id="Badge"><a href="#Badge" class="headerlink" title="Badge"></a><a href="https://www.iviewui.com/components/badge" target="_blank" rel="noopener">Badge</a></h2><blockquote>
<ul>
<li>Badge 的 count 属性只支持 Number 类型。<code>不兼容</code></li>
<li>新增属性 show-zero。</li>
<li>新增属性 text，可以自定义内容。</li>
<li>新增属性 status，可以设置徽标为状态点。</li>
<li>新增属性 offset，可以设置偏移量。</li>
<li>新增属性 type，可以设置预设的颜色</li>
</ul>
</blockquote>
<h2 id="Tag"><a href="#Tag" class="headerlink" title="Tag"></a><a href="https://www.iviewui.com/components/tag" target="_blank" rel="noopener">Tag</a></h2><blockquote>
<ul>
<li>Tag 的 color 属性将原先的 blur、green、yellow、red 更名为了 primary、success、warning、error。<code>不兼容</code></li>
<li>color 属性新增了 13 种预设。</li>
</ul>
</blockquote>
<h2 id="Input"><a href="#Input" class="headerlink" title="Input"></a><a href="https://www.iviewui.com/components/input" target="_blank" rel="noopener">Input</a></h2><blockquote>
<ul>
<li>新增属性 prefix 和 suffix 以及同名 slot，支持设置前缀和后缀图标。</li>
<li>新增属性 search 和 enterButton，支持搜索类型的输入框。</li>
<li>新增事件 @on-search，使用搜索类型输入框时，点击搜索或按下回车键时触发。</li>
</ul>
</blockquote>
<h2 id="Modal-对话框"><a href="#Modal-对话框" class="headerlink" title="Modal 对话框"></a><a href="https://www.iviewui.com/components/modal" target="_blank" rel="noopener">Modal 对话框</a></h2><blockquote>
<ul>
<li>新增全屏属性 fullscreen。</li>
<li>新增隐藏遮罩层属性 mask。</li>
<li>新增拖拽属性 draggable。</li>
</ul>
</blockquote>
<h2 id="Table"><a href="#Table" class="headerlink" title="Table "></a><a href="https://www.iviewui.com/components/table" target="_blank" rel="noopener">Table </a></h2><blockquote>
<ul>
<li>Column 新增属性 indexMethod， 可以自定义 type=”index” 时的序号。</li>
<li>Column 新增属性 tooltip，开启后，当单元格文本超过一行，会以…显示，并在 Tooltip 中显示完整内容。</li>
<li>优化 type=”selection” 时，Checkbox 为居中。</li>
</ul>
</blockquote>
<h2 id="Menu"><a href="#Menu" class="headerlink" title="Menu "></a><a href="https://www.iviewui.com/components/menu" target="_blank" rel="noopener">Menu </a></h2><blockquote>
<ul>
<li>新增属性 to、replace、target，支持点击直接跳转。</li>
</ul>
</blockquote>
<h2 id="Badge-徽章"><a href="#Badge-徽章" class="headerlink" title="Badge 徽章"></a><a href="https://www.iviewui.com/components/badge" target="_blank" rel="noopener">Badge 徽章</a></h2><blockquote>
<ul>
<li>新增属性 show-zero。</li>
<li>新增属性 text，可以自定义内容。</li>
<li>新增属性 status，可以设置徽标为状态点。</li>
<li>新增属性 offset，可以设置偏移量。</li>
<li>新增属性 type，可以设置预设的颜色。</li>
</ul>
</blockquote>
<h2 id="Page-分页"><a href="#Page-分页" class="headerlink" title="Page 分页"></a><a href="https://www.iviewui.com/components/page" target="_blank" rel="noopener">Page 分页</a></h2><blockquote>
<ul>
<li>新增属性 prev-text 和 next-text，可以自定义上下页的文案。</li>
<li>优化快进和快退的逻辑</li>
</ul>
</blockquote>
<h2 id="Upload-上传"><a href="#Upload-上传" class="headerlink" title="Upload 上传"></a><a href="https://www.iviewui.com/components/upload" target="_blank" rel="noopener">Upload 上传</a></h2><blockquote>
<ul>
<li>新增属性 paste，开启后可以上传复制在剪贴板的文件。</li>
</ul>
</blockquote>
<h2 id="Tooltip-文字提示"><a href="#Tooltip-文字提示" class="headerlink" title="Tooltip 文字提示"></a><a href="https://www.iviewui.com/components/tooltip" target="_blank" rel="noopener">Tooltip 文字提示</a></h2><blockquote>
<ul>
<li>新增属性 theme，可以设置 dark（默认）或 light 两种主题。</li>
<li>新增属性 max-width，超出最大值后，文本将自动换行，并两端对齐。</li>
</ul>
</blockquote>
<h2 id="Poptip-气泡提示"><a href="#Poptip-气泡提示" class="headerlink" title="Poptip 气泡提示"></a><a href="https://www.iviewui.com/components/poptip" target="_blank" rel="noopener">Poptip 气泡提示</a></h2><blockquote>
<ul>
<li>新增属性 word-wrap，开启后，超出指定宽度文本将自动换行，并两端对齐。</li>
<li>新增属性 padding，可以自定义间距值。</li>
</ul>
</blockquote>
<h2 id="Rate-评分"><a href="#Rate-评分" class="headerlink" title="Rate 评分"></a><a href="https://www.iviewui.com/components/rate" target="_blank" rel="noopener">Rate 评分</a></h2><blockquote>
<ul>
<li>新增属性 character、icon 和 custom-icon，支持自定义字符或图标。</li>
</ul>
</blockquote>
<h2 id="Collapse-折叠面板"><a href="#Collapse-折叠面板" class="headerlink" title="Collapse 折叠面板"></a><a href="https://www.iviewui.com/components/collapse" target="_blank" rel="noopener">Collapse 折叠面板</a></h2><blockquote>
<ul>
<li>新增属性 hide-arrow，可以隐藏箭头。</li>
<li>新增属性 simple，可以显示为无边框的简洁模式。</li>
</ul>
</blockquote>
<h2 id="Switch-开关"><a href="#Switch-开关" class="headerlink" title="Switch 开关"></a><a href="https://www.iviewui.com/components/switch" target="_blank" rel="noopener">Switch 开关</a></h2><blockquote>
<ul>
<li>新增属性 loading，可表示开关仍在执行中</li>
</ul>
</blockquote>
<h2 id="Dropdown"><a href="#Dropdown" class="headerlink" title="Dropdown "></a><a href="https://www.iviewui.com/components/dropdown" target="_blank" rel="noopener">Dropdown </a></h2><blockquote>
<ul>
<li>触发方式 trigger 新增 contextMenu，可以通过点击右键触发。</li>
</ul>
</blockquote>
<h2 id="Circle-进度环"><a href="#Circle-进度环" class="headerlink" title="Circle 进度环"></a><a href="https://www.iviewui.com/components/circle" target="_blank" rel="noopener">Circle 进度环</a></h2><blockquote>
<ul>
<li>新增仪表盘属性 dashboard。</li>
</ul>
</blockquote>
<h2 id="Progress-进度条"><a href="#Progress-进度条" class="headerlink" title="Progress 进度条 "></a><a href="https://www.iviewui.com/components/progress" target="_blank" rel="noopener">Progress 进度条 </a></h2><blockquote>
<ul>
<li>新增分段进度属性 success-percent。</li>
</ul>
</blockquote>
<h2 id="Avatar-头像"><a href="#Avatar-头像" class="headerlink" title="Avatar 头像 "></a><a href="https://www.iviewui.com/components/avatar" target="_blank" rel="noopener">Avatar 头像 </a></h2><blockquote>
<ul>
<li>新增自定义图标属性 custom-icon。</li>
</ul>
</blockquote>
<h2 id="Progress-进度条-1"><a href="#Progress-进度条-1" class="headerlink" title="Progress 进度条 "></a><a href="https://www.iviewui.com/components/progress" target="_blank" rel="noopener">Progress 进度条 </a></h2><blockquote>
<ul>
<li>新增分段进度属性 success-percent。</li>
</ul>
</blockquote>
<h2 id="Progress-进度条-2"><a href="#Progress-进度条-2" class="headerlink" title="Progress 进度条 "></a><a href="https://www.iviewui.com/components/progress" target="_blank" rel="noopener">Progress 进度条 </a></h2><blockquote>
<ul>
<li>新增分段进度属性 success-percent。</li>
</ul>
</blockquote>
]]></content>
      <categories>
        <category>VUE</category>
      </categories>
      <tags>
        <tag>vue</tag>
        <tag>iview</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue.js 组件编码规范</title>
    <url>/2018/11/09/Vue-js-%E7%BB%84%E4%BB%B6%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83/</url>
    <content><![CDATA[<p align="center"><br>  <img src="/images/vue.png"><br></p>

<h2 id="目标"><a href="#目标" class="headerlink" title="目标"></a>目标</h2><p>本规范提供了一种统一的编码规范来编写 <a href="/images/vue.png">Vue.js</a> 代码。这使得代码具有如下的特性：</p>
<ul>
<li>其它开发者或是团队成员更容易阅读和理解。</li>
<li>IDEs 更容易理解代码，从而提供高亮、格式化等辅助功能</li>
<li>更容易使用现有的工具</li>
<li>更容易实现缓存以及代码包的分拆</li>
</ul>
<h2 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h2><ul>
<li><a href="#基于模块开发">基于模块开发</a></li>
<li><a href="#vue-组件命名">vue 组件命名</a></li>
<li><a href="#组件表达式简单化">组件表达式简单化</a></li>
<li><a href="#组件-props-原子化">组件 props 原子化</a></li>
<li><a href="#验证组件的-props">验证组件的 props</a></li>
<li><a href="#将-this-赋值给-component-变量">将 <code>this</code> 赋值给 <code>component</code> 变量</a></li>
<li><a href="#组件结构化">组件结构化</a></li>
<li><a href="#组件事件命名">组件事件命名</a></li>
<li><a href="#避免-this.$parent">避免 <code>this.$parent</code></a></li>
<li><a href="#谨慎使用-this.$refs">谨慎使用 <code>this.$refs</code></a></li>
<li><a href="#使用组件名作为样式作用域空间">使用组件名作为样式作用域空间</a></li>
<li><a href="#提供组件-api-文档">提供组件 API 文档</a></li>
<li><a href="#提供组件-demo">提供组件 demo</a></li>
<li><a href="#对组件文件进行代码校验">对组件文件进行代码校验</a></li>
<li><a href="#只在需要时创建组件">只在需要时创建组件</a></li>
</ul>
<h2 id="基于模块开发"><a href="#基于模块开发" class="headerlink" title="基于模块开发"></a>基于模块开发</h2><p>始终基于模块的方式来构建你的 app，每一个子模块只做一件事情。</p>
<p>Vue.js 的设计初衷就是帮助开发者更好的开发界面模块。一个模块是应用程序中独立的一个部分。</p>
<h3 id="怎么做？"><a href="#怎么做？" class="headerlink" title="怎么做？"></a>怎么做？</h3><p>每一个 Vue 组件（等同于模块）首先必须专注于解决一个<a href="http://en.wikipedia.org/wiki/Single_responsibility_principle" target="_blank" rel="noopener">单一的问题</a>，<em>独立的</em>、<em>可复用的</em>、<em>微小的</em> 和 <em>可测试的</em>。</p>
<p>如果你的组件做了太多的事或是变得臃肿，请将其拆分成更小的组件并保持单一的原则。一般来说，尽量保证每一个文件的代码行数不要超过 100 行。也请保证组件可独立的运行。比较好的做法是增加一个单独的 demo 示例。</p>
<p><a href="#目录">↑ 回到目录</a></p>
<h2 id="Vue-组件命名"><a href="#Vue-组件命名" class="headerlink" title="Vue 组件命名"></a>Vue 组件命名</h2><p>组件的命名需遵从以下原则：</p>
<ul>
<li><strong>有意义的</strong>: 不过于具体，也不过于抽象</li>
<li><strong>简短</strong>: 2 到 3 个单词</li>
<li><strong>具有可读性</strong>: 以便于沟通交流</li>
</ul>
<p>同时还需要注意：</p>
<ul>
<li>必须符合<strong>自定义元素规范</strong>: 使用连字符分隔单词，切勿使用保留字。</li>
<li><strong><code>app-</code> 前缀作为命名空间</strong>: 如果非常通用的话可使用一个单词来命名，这样可以方便于其它项目里复用。</li>
</ul>
<h3 id="为什么？"><a href="#为什么？" class="headerlink" title="为什么？"></a>为什么？</h3><ul>
<li>组件是通过组件名来调用的。所以组件名必须简短、富有含义并且具有可读性。</li>
</ul>
<h3 id="如何做？"><a href="#如何做？" class="headerlink" title="如何做？"></a>如何做？</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 推荐 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">app-header</span>&gt;</span><span class="tag">&lt;/<span class="name">app-header</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">user-list</span>&gt;</span><span class="tag">&lt;/<span class="name">user-list</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">range-slider</span>&gt;</span><span class="tag">&lt;/<span class="name">range-slider</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 避免 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">btn-group</span>&gt;</span><span class="tag">&lt;/<span class="name">btn-group</span>&gt;</span> <span class="comment">&lt;!-- 虽然简短但是可读性差. 使用 `button-group` 替代 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ui-slider</span>&gt;</span><span class="tag">&lt;/<span class="name">ui-slider</span>&gt;</span> <span class="comment">&lt;!-- ui 前缀太过于宽泛，在这里意义不明确 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">slider</span>&gt;</span><span class="tag">&lt;/<span class="name">slider</span>&gt;</span> <span class="comment">&lt;!-- 与自定义元素规范不兼容 --&gt;</span></span><br></pre></td></tr></table></figure>
<p><a href="#目录">↑ 回到目录</a></p>
<h2 id="组件表达式简单化"><a href="#组件表达式简单化" class="headerlink" title="组件表达式简单化"></a>组件表达式简单化</h2><p>Vue.js 的表达式是 100% 的 Javascript 表达式。这使得其功能性很强大，但也带来潜在的复杂性。因此，你应该尽量<strong>保持表达式的简单化</strong>。</p>
<h3 id="为什么？-1"><a href="#为什么？-1" class="headerlink" title="为什么？"></a>为什么？</h3><ul>
<li>复杂的行内表达式难以阅读。</li>
<li>行内表达式是不能够通用的，这可能会导致重复编码的问题。</li>
<li>IDE 基本上不能识别行内表达式语法，所以使用行内表达式 IDE 不能提供自动补全和语法校验功能。</li>
</ul>
<h3 id="怎么做？-1"><a href="#怎么做？-1" class="headerlink" title="怎么做？"></a>怎么做？</h3><p>如果你发现写了太多复杂并难以阅读的行内表达式，那么可以使用 method 或是 computed 属性来替代其功能。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 推荐 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"example"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Original message: "&#123;&#123; message &#125;&#125;"<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Computed reversed message: "&#123;&#123; reversedMessage &#125;&#125;"<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">    data() &#123;</span><br><span class="line"><span class="javascript">        <span class="keyword">return</span>() &#123;</span></span><br><span class="line"><span class="javascript">            message: <span class="string">'Hello'</span></span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    computed: &#123;</span><br><span class="line"><span class="javascript">    reversedMessage: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">return</span> <span class="keyword">this</span>.message.split(<span class="string">''</span>).reverse().join(<span class="string">''</span>)</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[↑ 回到目录](#目录)</span><br><span class="line"></span><br><span class="line">### 组件 props 原子化</span><br><span class="line"></span><br><span class="line">虽然 Vue.js 支持传递复杂的 JavaScript 对象通过 props 属性，但是你应该尽可能的使用原始类型的数据。尽量只使用 [JavaScript 原始类型](https://developer.mozilla.org/en-US/docs/Glossary/Primitive)（字符串、数字、布尔值）和函数。尽量避免复杂的对象。</span><br><span class="line"></span><br><span class="line">### 为什么？</span><br><span class="line"></span><br><span class="line">* 使得组件 API 清晰直观。</span><br><span class="line">* 只使用原始类型和函数作为 props 使得组件的 API 更接近于 HTML(5) 原生元素。</span><br><span class="line">* 其它开发者更好的理解每一个 prop 的含义、作用。</span><br><span class="line">* 传递过于复杂的对象使得我们不能够清楚的知道哪些属性或方法被自定义组件使用，这使得代码难以重构和维护。</span><br><span class="line"></span><br><span class="line">### 怎么做？</span><br><span class="line"></span><br><span class="line">组件的每一个属性单独使用一个 props，并且使用函数或是原始类型的值。</span><br><span class="line"></span><br><span class="line">```html</span><br><span class="line"><span class="comment">&lt;!-- 推荐 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">range-slider</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:values</span>=<span class="string">"[10, 20]"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:min</span>=<span class="string">"0"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:max</span>=<span class="string">"100"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:step</span>=<span class="string">"5"</span></span></span><br><span class="line"><span class="tag">  @<span class="attr">on-slide</span>=<span class="string">"updateInputs"</span></span></span><br><span class="line"><span class="tag">  @<span class="attr">on-end</span>=<span class="string">"updateResults"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">range-slider</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 避免 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">range-slider</span> <span class="attr">:config</span>=<span class="string">"complexConfigObject"</span>&gt;</span><span class="tag">&lt;/<span class="name">range-slider</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><a href="#目录">↑ 回到目录</a></p>
<h2 id="验证组件的-props"><a href="#验证组件的-props" class="headerlink" title="验证组件的 props"></a>验证组件的 props</h2><p>在 Vue.js 中，组件的 props 即 API，一个稳定并可预测的 API 会使得你的组件更容易被其他开发者使用。</p>
<p>组件 props 通过自定义标签的属性来传递。属性的值可以是 Vue.js 字符串(<code>:attr=&quot;value&quot;</code> 或 <code>v-bind:attr=&quot;value&quot;</code>)或是不传。你需要保证组件的 props 能应对不同的情况。</p>
<h3 id="为什么？-2"><a href="#为什么？-2" class="headerlink" title="为什么？"></a>为什么？</h3><p>验证组件 props 可以保证你的组件永远是可用的（防御性编程）。即使其他开发者并未按照你预想的方法使用时也不会出错。</p>
<h3 id="怎么做？-2"><a href="#怎么做？-2" class="headerlink" title="怎么做？"></a>怎么做？</h3><ul>
<li>提供默认值。</li>
<li>使用 <code>type</code> 属性<a href="http://vuejs.org/v2/guide/components.html#Prop-Validation" target="_blank" rel="noopener">校验类型</a>。</li>
<li>使用 props 之前先检查该 prop 是否存在。</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"range"</span> <span class="attr">v-model</span>=<span class="string">"value"</span> <span class="attr">:max</span>=<span class="string">"max"</span> <span class="attr">:min</span>=<span class="string">"min"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">    props: &#123;</span><br><span class="line">      max: &#123;</span><br><span class="line"><span class="javascript">        type: <span class="built_in">Number</span>, <span class="comment">// 这里添加了数字类型的校验</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">default</span>() &#123; <span class="keyword">return</span> <span class="number">10</span>; &#125;,</span></span><br><span class="line">      &#125;,</span><br><span class="line">      min: &#123;</span><br><span class="line"><span class="javascript">        type: <span class="built_in">Number</span>,</span></span><br><span class="line"><span class="javascript">        <span class="keyword">default</span>() &#123; <span class="keyword">return</span> <span class="number">0</span>; &#125;,</span></span><br><span class="line">      &#125;,</span><br><span class="line">      value: &#123;</span><br><span class="line"><span class="javascript">        type: <span class="built_in">Number</span>,</span></span><br><span class="line"><span class="javascript">        <span class="keyword">default</span>() &#123; <span class="keyword">return</span> <span class="number">4</span>; &#125;,</span></span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><a href="#目录">↑ 回到目录</a></p>
<h2 id="将-this-赋值给-component-变量"><a href="#将-this-赋值给-component-变量" class="headerlink" title="将 this 赋值给 component 变量"></a>将 <code>this</code> 赋值给 <code>component</code> 变量</h2><p>在 Vue.js 组件上下文中，<code>this</code>指向了组件实例。因此当你切换到了不同的上下文时，要确保 <code>this</code> 指向一个可用的 <code>component</code> 变量。</p>
<p>换句话说，如果你正在使用 <strong>ES6</strong> 的话，就不要再编写 <code>var self = this;</code> 这样的代码了，您可以安全地使用 Vue 组件。</p>
<h3 id="为什么？-3"><a href="#为什么？-3" class="headerlink" title="为什么？"></a>为什么？</h3><ul>
<li>使用 <strong>ES6</strong>，就不再需要将 <code>this</code> 保存到一个变量中了。</li>
<li>一般来说，当你使用箭头函数时，会保留 <code>this</code> 的作用域。（译者注：箭头函数没有它自己的 this 值，箭头函数内的 this 值继承自外围作用域。）</li>
<li>如果你没有使用 <strong>ES6</strong>，当然也就不会使用 <code>箭头函数</code> 啦，那你必须将 “this” 保存到到某个变量中。这是唯一的例外。</li>
</ul>
<h3 id="怎么做？-3"><a href="#怎么做？-3" class="headerlink" title="怎么做？"></a>怎么做？</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">  methods: &#123;</span><br><span class="line">    hello() &#123;</span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> <span class="string">'hello'</span>;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    printHello() &#123;</span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="keyword">this</span>.hello());</span></span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 避免 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">  methods: &#123;</span><br><span class="line">    hello() &#123;</span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> <span class="string">'hello'</span>;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    printHello() &#123;</span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> self = <span class="keyword">this</span>; <span class="comment">// 没有必要</span></span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(self.hello());</span></span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><a href="#目录">↑ 回到目录</a></p>
<h2 id="组件结构化"><a href="#组件结构化" class="headerlink" title="组件结构化"></a>组件结构化</h2><p>按照一定的结构组织，使得组件便于理解。</p>
<h3 id="为什么？-4"><a href="#为什么？-4" class="headerlink" title="为什么？"></a>为什么？</h3><ul>
<li>导出一个清晰、组织有序的组件，使得代码易于阅读和理解。同时也便于标准化。</li>
<li>按首字母排序 properties、data、computed、watches 和 methods 使得这些对象内的属性便于查找。</li>
<li>合理组织，使得组件易于阅读。（name; extends; props, data 和 computed; components; watch 和 methods; lifecycle methods 等）。</li>
<li>使用 <code>name</code> 属性。借助于 <a href="https://chrome.google.com/webstore/detail/vuejs-devtools/nhdogjmejiglipccpnnnanhbledajbpd?hl=en" target="_blank" rel="noopener">vue devtools</a> 可以让你更方便的测试。</li>
<li>合理的 CSS 结构，如 <a href="https://medium.com/tldr-tech/bem-blocks-elements-and-modifiers-6b3b0af9e3ea#.bhnomd7gw" target="_blank" rel="noopener">BEM</a> 或 <a href="https://github.com/rstacruz/rscss" target="_blank" rel="noopener">rscss</a> - <a href="#使用组件名作为样式作用域空间">详情？</a>。</li>
<li>使用单文件 .vue 文件格式来组件代码。</li>
</ul>
<h3 id="怎么做？-4"><a href="#怎么做？-4" class="headerlink" title="怎么做？"></a>怎么做？</h3><p>组件结构化</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">lang</span>=<span class="string">"html"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"Ranger__Wrapper"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ... --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">    <span class="comment">// 不要忘记了 name 属性</span></span></span><br><span class="line"><span class="javascript">    name: <span class="string">'RangeSlider'</span>,</span></span><br><span class="line"><span class="javascript">    <span class="comment">// 使用组件 mixins 共享通用功能</span></span></span><br><span class="line">    mixins: [],</span><br><span class="line"><span class="javascript">    <span class="comment">// 组成新的组件</span></span></span><br><span class="line">    extends: &#123;&#125;,</span><br><span class="line"><span class="javascript">    <span class="comment">// 组件属性、变量</span></span></span><br><span class="line">    props: &#123;</span><br><span class="line"><span class="javascript">      bar: &#123;&#125;, <span class="comment">// 按字母顺序</span></span></span><br><span class="line">      foo: &#123;&#125;,</span><br><span class="line">      fooBar: &#123;&#125;,</span><br><span class="line">    &#125;,</span><br><span class="line"><span class="javascript">    <span class="comment">// 变量</span></span></span><br><span class="line">    data() &#123;&#125;,</span><br><span class="line">    computed: &#123;&#125;,</span><br><span class="line"><span class="javascript">    <span class="comment">// 使用其它组件</span></span></span><br><span class="line">    components: &#123;&#125;,</span><br><span class="line"><span class="javascript">    <span class="comment">// 方法</span></span></span><br><span class="line">    watch: &#123;&#125;,</span><br><span class="line">    methods: &#123;&#125;,</span><br><span class="line"><span class="javascript">    <span class="comment">// 生命周期函数</span></span></span><br><span class="line">    beforeCreate() &#123;&#125;,</span><br><span class="line">    mounted() &#123;&#125;,</span><br><span class="line">  &#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span></span><br><span class="line"><span class="css">  <span class="selector-class">.Ranger__Wrapper</span> &#123; <span class="comment">/* ... */</span> &#125;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><a href="#目录">↑ 回到目录</a></p>
<h2 id="组件事件命名"><a href="#组件事件命名" class="headerlink" title="组件事件命名"></a>组件事件命名</h2><p>Vue.js 提供的处理函数和表达式都是绑定在 ViewModel 上的，组件的每一个事件都应该按照一个好的命名规范来，这样可以避免不少的开发问题，具体可见如下 <strong>为什么</strong>。</p>
<h3 id="为什么？-5"><a href="#为什么？-5" class="headerlink" title="为什么？"></a>为什么？</h3><ul>
<li>开发者可以随意给事件命名，即使是原生事件的名字，这样会带来迷惑性。</li>
<li>过于宽松的事件命名可能与 <a href="https://vuejs.org/v2/guide/components.html#DOM-Template-Parsing-Caveats" target="_blank" rel="noopener">DOM 模板不兼容</a>。</li>
</ul>
<h3 id="怎么做？-5"><a href="#怎么做？-5" class="headerlink" title="怎么做？"></a>怎么做？</h3><ul>
<li>事件名也使用连字符命名。</li>
<li>一个事件的名字对应组件外的一组意义操作，如：upload-success、upload-error 以及 dropzone-upload-success、dropzone-upload-error （如果需要前缀的话）。</li>
<li>事件命名应该以动词（如 client-api-load） 或是 名词（如 drive-upload-success）结尾。（<a href="https://github.com/GoogleWebComponents/style-guide#events" target="_blank" rel="noopener">出处</a>）</li>
</ul>
<p><a href="#目录">↑ 回到目录</a></p>
<h2 id="避免-this-parent"><a href="#避免-this-parent" class="headerlink" title="避免 this.$parent"></a>避免 this.$parent</h2><p>Vue.js 支持组件嵌套，并且子组件可访问父组件的上下文。访问组件之外的上下文违反了<a href="#基于模块开发">基于模块开发</a>的<a href="https://addyosmani.com/first/" target="_blank" rel="noopener">第一原则</a>。因此你应该尽量避免使用 <strong><code>this.$parent</code></strong>。</p>
<h3 id="为什么？-6"><a href="#为什么？-6" class="headerlink" title="为什么？"></a>为什么？</h3><ul>
<li>组件必须相互保持独立，Vue 组件也是。如果组件需要访问其父层的上下文就违反了该原则。</li>
<li>如果一个组件需要访问其父组件的上下文，那么该组件将不能在其它上下文中复用。</li>
</ul>
<h3 id="怎么做？-6"><a href="#怎么做？-6" class="headerlink" title="怎么做？"></a>怎么做？</h3><ul>
<li>通过 props 将值传递给子组件。</li>
<li>通过 props 传递回调函数给子组件来达到调用父组件方法的目的。</li>
<li>通过在子组件触发事件来通知父组件。</li>
</ul>
<p><a href="#目录">↑ 回到目录</a></p>
<h2 id="谨慎使用-this-refs"><a href="#谨慎使用-this-refs" class="headerlink" title="谨慎使用 this.$refs"></a>谨慎使用 this.$refs</h2><p>Vue.js 支持通过 <code>ref</code> 属性来访问其它组件和 HTML 元素。并通过 <code>this.$refs</code> 可以得到组件或 HTML 元素的上下文。在大多数情况下，通过 <code>this.$refs</code>来访问其它组件的上下文是可以避免的。在使用的的时候你需要注意避免调用了不恰当的组件 API，所以应该尽量避免使用 <code>this.$refs</code>。</p>
<h3 id="为什么？-7"><a href="#为什么？-7" class="headerlink" title="为什么？"></a>为什么？</h3><ul>
<li>组件必须是保持独立的，如果一个组件的 API 不能够提供所需的功能，那么这个组件在设计、实现上是有问题的。</li>
<li>组件的属性和事件必须足够的给大多数的组件使用。</li>
</ul>
<h3 id="怎么做？-7"><a href="#怎么做？-7" class="headerlink" title="怎么做？"></a>怎么做？</h3><ul>
<li>提供良好的组件 API。</li>
<li>总是关注于组件本身的目的。</li>
<li>拒绝定制代码。如果你在一个通用的组件内部编写特定需求的代码，那么代表这个组件的 API 不够通用，或者你可能需要一个新的组件来应对该需求。</li>
<li>检查所有的 props 是否有缺失的，如果有提一个 issue 或是完善这个组件。</li>
<li>检查所有的事件。子组件向父组件通信一般是通过事件来实现的，但是大多数的开发者更多的关注于 props 从忽视了这点。</li>
<li><strong>Props向下传递，事件向上传递！</strong>。以此为目标升级你的组件，提供良好的 API 和 独立性。</li>
<li>当遇到 props 和 events 难以实现的功能时，通过 <code>this.$refs</code>来实现。</li>
<li>当需要操作 DOM 无法通过指令来做的时候可使用 <code>this.$ref</code> 而不是 <code>JQuery</code>、<code>document.getElement*</code>、<code>document.queryElement</code>。</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 推荐，并未使用 this.$refs --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">range</span> <span class="attr">:max</span>=<span class="string">"max"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:min</span>=<span class="string">"min"</span></span></span><br><span class="line"><span class="tag">  @<span class="attr">current-value</span>=<span class="string">"currentValue"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:step</span>=<span class="string">"1"</span>&gt;</span><span class="tag">&lt;/<span class="name">range</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 使用 this.$refs 的适用情况--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">modal</span> <span class="attr">ref</span>=<span class="string">"basicModal"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h4</span>&gt;</span>Basic Modal<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"primary"</span> @<span class="attr">click</span>=<span class="string">"$refs.basicModal.hide()"</span>&gt;</span>Close<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">modal</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"$refs.basicModal.open()"</span>&gt;</span>Open modal<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- Modal component --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-show</span>=<span class="string">"active"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ... --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">    <span class="comment">// ...</span></span></span><br><span class="line">    data() &#123;</span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript">        active: <span class="literal">false</span>,</span></span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">      open() &#123;</span><br><span class="line"><span class="javascript">        <span class="keyword">this</span>.active = <span class="literal">true</span>;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      hide() &#123;</span><br><span class="line"><span class="javascript">        <span class="keyword">this</span>.active = <span class="literal">false</span>;</span></span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line"><span class="javascript">    <span class="comment">// ...</span></span></span><br><span class="line">  &#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 如果可通过 emited 来做则避免通过 this.$refs 直接访问 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">range</span> <span class="attr">:max</span>=<span class="string">"max"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:min</span>=<span class="string">"min"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">ref</span>=<span class="string">"range"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:step</span>=<span class="string">"1"</span>&gt;</span><span class="tag">&lt;/<span class="name">range</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">    <span class="comment">// ...</span></span></span><br><span class="line">    methods: &#123;</span><br><span class="line">      getRangeCurrentValue() &#123;</span><br><span class="line"><span class="javascript">        <span class="keyword">return</span> <span class="keyword">this</span>.$refs.range.currentValue;</span></span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line"><span class="javascript">    <span class="comment">// ...</span></span></span><br><span class="line">  &#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><a href="#目录">↑ 回到目录</a></p>
<h2 id="使用组件名作为样式作用域空间"><a href="#使用组件名作为样式作用域空间" class="headerlink" title="使用组件名作为样式作用域空间"></a>使用组件名作为样式作用域空间</h2><p>Vue.js 的组件是自定义元素，这非常适合用来作为样式的根作用域空间。可以将组件名作为 CSS 类的命名空间。</p>
<h3 id="为什么？-8"><a href="#为什么？-8" class="headerlink" title="为什么？"></a>为什么？</h3><ul>
<li>给样式加上作用域空间可以避免组件样式影响外部的样式。</li>
<li>保持模块名、目录名、样式根作用域名一样，可以很好的将其关联起来，便于开发者理解。</li>
</ul>
<h3 id="怎么做？-8"><a href="#怎么做？-8" class="headerlink" title="怎么做？"></a>怎么做？</h3><p>使用组件名作为样式命名的前缀，可基于 BEM 或 OOCSS 范式。同时给 style 标签加上 scoped 属性。加上 scoped 属性编译后会给组件的 class 自动加上唯一的前缀从而避免样式的冲突。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span></span><br><span class="line"><span class="css">  <span class="comment">/* 推荐 */</span></span></span><br><span class="line"><span class="css">  <span class="selector-class">.MyExample</span> &#123; &#125;</span></span><br><span class="line"><span class="css">  <span class="selector-class">.MyExample</span> <span class="selector-tag">li</span> &#123; &#125;</span></span><br><span class="line"><span class="css">  <span class="selector-class">.MyExample__item</span> &#123; &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="css">  <span class="comment">/* 避免 */</span></span></span><br><span class="line"><span class="css">  <span class="selector-class">.My-Example</span> &#123; &#125; <span class="comment">/* 没有用组件名或模块名限制作用域, 不符合 BEM 规范 */</span></span></span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><a href="#目录">↑ 回到目录</a></p>
<h2 id="提供组件-API-文档"><a href="#提供组件-API-文档" class="headerlink" title="提供组件 API 文档"></a>提供组件 API 文档</h2><p>使用 Vue.js 组件的过程中会创建 Vue 组件实例，这个实例是通过自定义属性配置的。为了便于其他开发者使用该组件，对于这些自定义属性即组件API应该在 <code>README.md</code> 文件中进行说明。</p>
<h2 id="为什么？-9"><a href="#为什么？-9" class="headerlink" title="为什么？"></a>为什么？</h2><ul>
<li>良好的文档可以让开发者比较容易的对组件有一个整体的认识，而不用去阅读组件的源码，也更方便开发者使用。</li>
<li>组件配置属性即组件的 API，对于组件的用户来说他们更感兴趣的是 API 而不是实现原理。</li>
<li>正式的文档会告诉开发者组件 API 变更以及向后的兼容性情况。</li>
<li><code>README.md</code> 是标准的我们应该首先阅读的文档文件。代码托管网站（GitHub、Bitbucket、Gitlab 等）会默认在仓库中展示该文件作为仓库的介绍。</li>
</ul>
<h3 id="怎么做？-9"><a href="#怎么做？-9" class="headerlink" title="怎么做？"></a>怎么做？</h3><p>在模块目录中添加 <code>README.md</code> 文件：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">range-slider/</span><br><span class="line">├── range-slider.vue</span><br><span class="line">├── range-slider.less</span><br><span class="line">└── README.md</span><br></pre></td></tr></table></figure>
<p>在 README 文件中说明模块的功能以及使用场景。对于 vue 组件来说，比较有用的描述是组件的自定义属性即 API 的描述介绍。</p>
<h1 id="Range-slider"><a href="#Range-slider" class="headerlink" title="Range slider"></a>Range slider</h1><h2 id="功能"><a href="#功能" class="headerlink" title="功能"></a>功能</h2><p>range slider 组件可通过拖动的方式来设置一个给定范围内的数值。</p>
<p>该模块使用 <a href="http://refreshless.com/nouislider/" target="_blank" rel="noopener">noUiSlider</a> 来实现跨浏览器和 touch 功能的支持。</p>
<h2 id="如何使用"><a href="#如何使用" class="headerlink" title="如何使用"></a>如何使用</h2><p><code>&lt;range-slider&gt;</code> 支持如下的自定义属性：</p>
<table>
<thead>
<tr>
<th>attribute</th>
<th>type</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>min</code></td>
<td>Number</td>
<td>可拖动的最小值.</td>
</tr>
<tr>
<td><code>max</code></td>
<td>Number</td>
<td>可拖动的最大值.</td>
</tr>
<tr>
<td><code>values</code></td>
<td>Number[] <em>optional</em></td>
<td>包含最大值和最小值的数组.  如. <code>values=&quot;[10, 20]&quot;</code>. Defaults to <code>[opts.min, opts.max]</code>.</td>
</tr>
<tr>
<td><code>step</code></td>
<td>Number <em>optional</em></td>
<td>增加减小的数值单位，默认为 1.</td>
</tr>
<tr>
<td><code>on-slide</code></td>
<td>Function <em>optional</em></td>
<td>用户拖动开始按钮或者结束按钮时的回调函数，函数接受 <code>(values, HANDLE)</code> 格式的参数。 如： <code>on-slide={ updateInputs }</code>,  <code>component.updateInputs = (values, HANDLE) =&gt; { const value = values[HANDLE]; }</code>.</td>
</tr>
<tr>
<td><code>on-end</code></td>
<td>Function <em>optional</em></td>
<td>当用户停止拖动时触发的回调函数，函数接受 <code>(values, HANDLE)</code> 格式的参数。</td>
</tr>
</tbody>
</table>
<p>如需要自定义 slider 的样式可参考 <a href="(http://refreshless.com/nouislider/more/#section-styling">noUiSlider 文档</a>)</p>
<p><a href="#目录">↑ 回到目录</a></p>
<h2 id="提供组件-demo"><a href="#提供组件-demo" class="headerlink" title="提供组件 demo"></a>提供组件 demo</h2><p>添加 <code>index.html</code> 文件作为组件的 demo 示例，并提供不同配置情况的效果，说明组件是如何使用的。</p>
<h3 id="为什么？-10"><a href="#为什么？-10" class="headerlink" title="为什么？"></a>为什么？</h3><ul>
<li>demo 可以说明组件是独立可使用的。</li>
<li>demo 可以让开发者预览组件的功能效果。</li>
<li>demo 可以展示组件各种配置参数下的功能。</li>
</ul>
<p><a href="#目录">↑ 回到目录</a></p>
<h2 id="对组件文件进行代码校验"><a href="#对组件文件进行代码校验" class="headerlink" title="对组件文件进行代码校验"></a>对组件文件进行代码校验</h2><p>代码校验可以保持代码的统一性以及追踪语法错误。.vue 文件可以通过使用 <code>eslint-plugin-html</code>插件来校验代码。你可以通过 <code>vue-cli</code> 来开始你的项目，<code>vue-cli</code> 默认会开启代码校验功能。</p>
<h3 id="为什么？-11"><a href="#为什么？-11" class="headerlink" title="为什么？"></a>为什么？</h3><ul>
<li>保证所有的开发者使用同样的编码规范。</li>
<li>更早的感知到语法错误。</li>
</ul>
<h3 id="怎么做？-10"><a href="#怎么做？-10" class="headerlink" title="怎么做？"></a>怎么做？</h3><p>为了校验工具能够校验 <code>*.vue</code>文件，你需要将代码编写在 <code>&lt;script&gt;</code> 标签中，并使<a href="#保持组件表达式简单化">组件表达式简单化</a>，因为校验工具无法理解行内表达式，配置校验工具可以访问全局变量 <code>vue</code> 和组件的 <code>props</code>。</p>
<h4 id="ESLint"><a href="#ESLint" class="headerlink" title="ESLint"></a>ESLint</h4><p><a href="http://eslint.org/" target="_blank" rel="noopener">ESLint</a> 需要通过 <a href="https://github.com/BenoitZugmeyer/eslint-plugin-html#eslint-plugin-html" target="_blank" rel="noopener">ESLint HTML 插件</a>来抽取组件中的代码。</p>
<p>通过 <code>.eslintrc</code> 文件来配置 ESlint，这样 IDE 可以更好的理解校验配置项：</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"extends"</span>: <span class="string">"eslint:recommended"</span>,</span><br><span class="line">  <span class="attr">"plugins"</span>: [<span class="string">"html"</span>],</span><br><span class="line">  <span class="attr">"env"</span>: &#123;</span><br><span class="line">    <span class="attr">"browser"</span>: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"globals"</span>: &#123;</span><br><span class="line">    <span class="attr">"opts"</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">"vue"</span>: <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行 ESLint</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">eslint src/**/*.vue</span><br></pre></td></tr></table></figure>
<h4 id="JSHint"><a href="#JSHint" class="headerlink" title="JSHint"></a>JSHint</h4><p><a href="http://jshint.com/" target="_blank" rel="noopener">JSHint</a> 可以解析 HTML（使用 <code>--extra-ext</code>命令参数）和抽取代码（使用 <code>--extract=auto</code>命令参数）。</p>
<p>通过 <code>.jshintrc</code> 文件来配置 ESlint，这样 IDE 可以更好的理解校验配置项。</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"browser"</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">"predef"</span>: [<span class="string">"opts"</span>, <span class="string">"vue"</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行 JSHint<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">jshint --config modules/.jshintrc --extra-ext=html --extract=auto modules/</span><br></pre></td></tr></table></figure></p>
<p>注：JSHint 不接受 <code>vue</code> 扩展名的文件，只支持 <code>html</code>。</p>
<h2 id="只在需要时创建组件"><a href="#只在需要时创建组件" class="headerlink" title="只在需要时创建组件"></a>只在需要时创建组件</h2><h3 id="为什么？-12"><a href="#为什么？-12" class="headerlink" title="为什么？"></a>为什么？</h3><p>Vue.js 是一个基于组件的框架。如果你不知道何时创建组件可能会导致以下问题：</p>
<ul>
<li>如果组件太大, 可能很难重用和维护;</li>
<li>如果组件太小，你的项目就会（因为深层次的嵌套而）被淹没，也更难使组件间通信;</li>
</ul>
<h3 id="怎么做"><a href="#怎么做" class="headerlink" title="怎么做?"></a>怎么做?</h3><ul>
<li>始终记住为你的项目需求构建你的组件，但是你也应该尝试想到它们能够从中脱颖而出（独立于项目之外）。如果它们能够在你项目之外工作，就像一个库那样，就会使得它们更加健壮和一致。</li>
<li>尽可能早地构建你的组件总是更好的，因为这样使得你可以在一个已经存在和稳定的组件上构建你的组件间通信（props &amp; events）。</li>
</ul>
<h3 id="规则"><a href="#规则" class="headerlink" title="规则"></a>规则</h3><ul>
<li>首先，尽可能早地尝试构建出诸如模态框、提示框、工具条、菜单、头部等这些明显的（通用型）组件。总之，你知道的这些组件以后一定会在当前页面或者是全局范围内需要。</li>
<li>第二，在每一个新的开发项目中，对于一整个页面或者其中的一部分，在进行开发前先尝试思考一下。如果你认为它有一部分应该是一个组件，那么就创建它吧。</li>
<li>最后，如果你不确定，那就不要。避免那些“以后可能会有用”的组件污染你的项目。它们可能会永远的只是（静静地）待在那里，这一点也不聪明。注意，一旦你意识到应该这么做，最好是就把它打破，以避免与项目的其他部分构成兼容性和复杂性。</li>
</ul>
<p><a href="#目录">↑ 回到目录</a></p>
<hr>
<h2 id="尽可能使用-mixins"><a href="#尽可能使用-mixins" class="headerlink" title="尽可能使用 mixins"></a>尽可能使用 mixins</h2><h3 id="为什么"><a href="#为什么" class="headerlink" title="为什么?"></a>为什么?</h3><p>Mixins 封装可重用的代码，避免了重复。如果两个组件共享有相同的功能，则可以使用 mixin。通过 mixin，你可以专注于单个组件的任务和抽象的通用代码。这有助于更好地维护你的应用程序。</p>
<h3 id="怎么做-1"><a href="#怎么做-1" class="headerlink" title="怎么做?"></a>怎么做?</h3><p>假设你有一个移动端和桌面端的菜单组件，它们共享一些功能。我们可以抽象出这两个组件的核心功能到一个 mixin 中，例如：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> MenuMixin = &#123;</span><br><span class="line">  data () &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      language: <span class="string">'EN'</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  methods: &#123;</span><br><span class="line">    changeLanguage () &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">this</span>.language === <span class="string">'DE'</span>) <span class="keyword">this</span>.$<span class="keyword">set</span>(this, 'language', 'EN')</span><br><span class="line">      if (this.language === 'EN') this.$<span class="keyword">set</span>(this, 'language', 'DE')</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default MenuMixin</span><br></pre></td></tr></table></figure>
<p>要使用 mixin，只需将其导入到两个组件中（我只展示移动组件）。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"mobile"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> @<span class="attr">click</span>=<span class="string">"changeLanguage"</span>&gt;</span>Change language<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> MenuMixin <span class="keyword">from</span> <span class="string">'./MenuMixin'</span></span></span><br><span class="line"></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">    mixins: [MenuMixin]</span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><a href="#目录">↑ 回到目录</a></p>
<hr>
]]></content>
      <tags>
        <tag>前端编码规范</tag>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title>Airbnb JavaScript 风格指南</title>
    <url>/2018/11/09/Airbnb-JavaScript-%E9%A3%8E%E6%A0%BC%E6%8C%87%E5%8D%97/</url>
    <content><![CDATA[<p><em>JavaScript最合理的方法 A mostly reasonable approach to JavaScript</em></p>
<h2 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h2><ol>
<li><a href="#types">Types</a></li>
<li><a href="#references">References</a></li>
<li><a href="#objects">Objects</a></li>
<li><a href="#arrays">Arrays</a></li>
<li><a href="#destructuring">Destructuring</a></li>
<li><a href="#strings">Strings</a></li>
<li><a href="#functions">Functions</a></li>
<li><a href="#arrow-functions">Arrow Functions</a></li>
<li><a href="#classes--constructors">Classes &amp; Constructors</a></li>
<li><a href="#modules">Modules</a></li>
<li><a href="#iterators-and-generators">Iterators and Generators</a></li>
<li><a href="#properties">Properties</a></li>
<li><a href="#variables">Variables</a></li>
<li><a href="#hoisting">Hoisting</a></li>
<li><a href="#comparison-operators--equality">Comparison Operators &amp; Equality</a></li>
<li><a href="#blocks">Blocks</a></li>
<li><a href="#comments">Comments</a></li>
<li><a href="#whitespace">Whitespace</a></li>
<li><a href="#commas">Commas</a></li>
<li><a href="#semicolons">Semicolons</a></li>
<li><a href="#type-casting--coercion">Type Casting &amp; Coercion</a></li>
<li><a href="#naming-conventions">Naming Conventions</a></li>
<li><a href="#accessors">Accessors</a></li>
<li><a href="#events">Events</a></li>
<li><a href="#jquery">jQuery</a></li>
<li><a href="#ecmascript-5-compatibility">ECMAScript 5 Compatibility</a></li>
<li><a href="#ecmascript-6-es-2015-styles">ECMAScript 6+ (ES 2015+) Styles</a></li>
<li><a href="#testing">Testing</a></li>
<li><a href="#performance">Performance</a></li>
<li><a href="#resources">Resources</a></li>
<li><a href="#in-the-wild">In the Wild</a></li>
<li><a href="#translation">Translation</a></li>
<li><a href="#the-javascript-style-guide-guide">The JavaScript Style Guide Guide</a></li>
<li><a href="#chat-with-us-about-javascript">Chat With Us About JavaScript</a></li>
<li><a href="#contributors">Contributors</a></li>
<li><a href="#license">License</a></li>
</ol>
<h2 id="Types"><a href="#Types" class="headerlink" title="Types"></a>Types</h2><p>  <a name="1.1"></a><br>  <a name="types--primitives"></a></p>
<ul>
<li><p><a href="#types--primitives">1.1</a> 基本类型: 你可以直接获取到基本类型的值</p>
<ul>
<li><code>string</code></li>
<li><code>number</code></li>
<li><code>boolean</code></li>
<li><code>null</code></li>
<li><code>undefined</code></li>
<li><code>symbol</code></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> foo = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">let</span> bar = foo;</span><br><span class="line"></span><br><span class="line">bar = <span class="number">9</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(foo, bar); <span class="comment">// =&gt; 1, 9</span></span><br></pre></td></tr></table></figure>
<ul>
<li>Symbols 不能被正确的polyfill。 所以在不能原生支持symbol类型的环境[浏览器]中，不应该使用 symbol 类型。</li>
</ul>
<p><a name="1.2"></a><br><a name="types--complex"></a></p>
</li>
<li><p><a href="#types--complex">1.2</a>  复杂类型: 复杂类型赋值是获取到他的引用的值。 相当于传引用</p>
<ul>
<li><code>object</code></li>
<li><code>array</code></li>
<li><code>function</code></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> foo = [<span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line"><span class="keyword">const</span> bar = foo;</span><br><span class="line"></span><br><span class="line">bar[<span class="number">0</span>] = <span class="number">9</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(foo[<span class="number">0</span>], bar[<span class="number">0</span>]); <span class="comment">// =&gt; 9, 9</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong><a href="#目录">⬆ back to top</a></strong></p>
<h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2><p>  <a name="2.1"></a><br>  <a name="references--prefer-const"></a></p>
<ul>
<li><p><a href="#references--prefer-const">2.1</a> 所有的赋值都用<code>const</code>，避免使用<code>var</code>. eslint: <a href="http://eslint.org/docs/rules/prefer-const.html" target="_blank" rel="noopener"><code>prefer-const</code></a>, <a href="http://eslint.org/docs/rules/no-const-assign.html" target="_blank" rel="noopener"><code>no-const-assign</code></a></p>
<blockquote>
<p>Why? 因为这个确保你不会改变你的初始值，重复引用会导致bug和代码难以理解</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">var</span> b = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">const</span> b = <span class="number">2</span>;</span><br></pre></td></tr></table></figure>
<p><a name="2.2"></a><br><a name="references--disallow-var"></a></p>
</li>
<li><p><a href="#references--disallow-var">2.2</a> 如果你一定要对参数重新赋值，那就用<code>let</code>，而不是<code>var</code>. eslint: <a href="http://eslint.org/docs/rules/no-var.html" target="_blank" rel="noopener"><code>no-var</code></a></p>
<blockquote>
<p>Why? 因为<code>let</code>是块级作用域，而<code>var</code>是函数级作用域</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">var</span> count = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">  count += <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good, use the let.</span></span><br><span class="line"><span class="keyword">let</span> count = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">  count += <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a name="2.3"></a><br><a name="references--block-scope"></a></p>
</li>
<li><p><a href="#references--block-scope">2.3</a> 注意： <code>let</code>、<code>const</code>都是块级作用域</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// const 和 let 都只存在于它定义的那个块级作用域</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">let</span> a = <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">const</span> b = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(a); <span class="comment">// ReferenceError</span></span><br><span class="line"><span class="built_in">console</span>.log(b); <span class="comment">// ReferenceError</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong><a href="#目录">⬆ back to top</a></strong></p>
<h2 id="Objects"><a href="#Objects" class="headerlink" title="Objects"></a>Objects</h2><p>  <a name="3.1"></a><br>  <a name="objects--no-new"></a></p>
<ul>
<li><p><a href="#objects--no-new">3.1</a> 使用字面值创建对象. eslint: <a href="http://eslint.org/docs/rules/no-new-object.html" target="_blank" rel="noopener"><code>no-new-object</code></a></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> item = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> item = &#123;&#125;;</span><br></pre></td></tr></table></figure>
<p><a name="3.2"></a><br><a name="es6-computed-properties"></a></p>
</li>
<li><p><a href="#es6-computed-properties">3.2</a> 当创建一个带有动态属性名的对象时，用计算后属性名</p>
<blockquote>
<p>Why? 这可以使你将定义的所有属性放在对象的一个地方.</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getKey</span>(<span class="params">k</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`a key named <span class="subst">$&#123;k&#125;</span>`</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  id: <span class="number">5</span>,</span><br><span class="line">  name: <span class="string">'San Francisco'</span>,</span><br><span class="line">&#125;;</span><br><span class="line">obj[getKey(<span class="string">'enabled'</span>)] = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good getKey('enabled')是动态属性名</span></span><br><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  id: <span class="number">5</span>,</span><br><span class="line">  name: <span class="string">'San Francisco'</span>,</span><br><span class="line">  [getKey(<span class="string">'enabled'</span>)]: <span class="literal">true</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p><a name="3.3"></a><br><a name="es6-object-shorthand"></a></p>
</li>
<li><p><a href="#es6-object-shorthand">3.3</a> 用对象方法简写. eslint: <a href="http://eslint.org/docs/rules/object-shorthand.html" target="_blank" rel="noopener"><code>object-shorthand</code></a></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> atom = &#123;</span><br><span class="line">  value: <span class="number">1</span>,</span><br><span class="line"></span><br><span class="line">  addValue: <span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> atom.value + value;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> atom = &#123;</span><br><span class="line">  value: <span class="number">1</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 对象的方法</span></span><br><span class="line">  addValue(value) &#123;</span><br><span class="line">    <span class="keyword">return</span> atom.value + value;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p><a name="3.4"></a><br><a name="es6-object-concise"></a></p>
</li>
<li><p><a href="#es6-object-concise">3.4</a> 用属性值缩写. eslint: <a href="http://eslint.org/docs/rules/object-shorthand.html" target="_blank" rel="noopener"><code>object-shorthand</code></a></p>
<blockquote>
<p>Why? 这样写的更少且更可读</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> lukeSkywalker = <span class="string">'Luke Skywalker'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  lukeSkywalker: lukeSkywalker,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  lukeSkywalker,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p><a name="3.5"></a><br><a name="objects--grouped-shorthand"></a></p>
</li>
<li><p><a href="#objects--grouped-shorthand">3.5</a> 将你的所有缩写放在对象声明的开始.</p>
<blockquote>
<p>Why? 这样也是为了更方便的知道有哪些属性用了缩写.</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> anakinSkywalker = <span class="string">'Anakin Skywalker'</span>;</span><br><span class="line"><span class="keyword">const</span> lukeSkywalker = <span class="string">'Luke Skywalker'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  episodeOne: <span class="number">1</span>,</span><br><span class="line">  twoJediWalkIntoACantina: <span class="number">2</span>,</span><br><span class="line">  lukeSkywalker,</span><br><span class="line">  episodeThree: <span class="number">3</span>,</span><br><span class="line">  mayTheFourth: <span class="number">4</span>,</span><br><span class="line">  anakinSkywalker,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  lukeSkywalker,</span><br><span class="line">  anakinSkywalker,</span><br><span class="line">  episodeOne: <span class="number">1</span>,</span><br><span class="line">  twoJediWalkIntoACantina: <span class="number">2</span>,</span><br><span class="line">  episodeThree: <span class="number">3</span>,</span><br><span class="line">  mayTheFourth: <span class="number">4</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p><a name="3.6"></a><br><a name="objects--quoted-props"></a></p>
</li>
<li><p><a href="#objects--quoted-props">3.6</a> 只对那些无效的标示使用引号 <code>&#39;&#39;</code>. eslint: <a href="http://eslint.org/docs/rules/quote-props.html" target="_blank" rel="noopener"><code>quote-props</code></a></p>
<blockquote>
<p>Why? 通常我们认为这种方式主观上易读。他优化了代码高亮，并且页更容易被许多JS引擎压缩。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> bad = &#123;</span><br><span class="line">  <span class="string">'foo'</span>: <span class="number">3</span>,</span><br><span class="line">  <span class="string">'bar'</span>: <span class="number">4</span>,</span><br><span class="line">  <span class="string">'data-blah'</span>: <span class="number">5</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> good = &#123;</span><br><span class="line">  foo: <span class="number">3</span>,</span><br><span class="line">  bar: <span class="number">4</span>,</span><br><span class="line">  <span class="string">'data-blah'</span>: <span class="number">5</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p><a name="3.7"></a><br><a name="objects--prototype-builtins"></a></p>
</li>
<li><p><a href="#objects--prototype-builtins">3.7</a> 不要直接调用<code>Object.prototype</code>上的方法，如<code>hasOwnProperty</code>, <code>propertyIsEnumerable</code>, <code>isPrototypeOf</code>。</p>
<blockquote>
<p>Why? 在一些有问题的对象上， 这些方法可能会被屏蔽掉 - 如：<code>{ hasOwnProperty: false }</code> - 或这是一个空对象<code>Object.create(null)</code></p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="built_in">console</span>.log(object.hasOwnProperty(key));</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.prototype.hasOwnProperty.call(object, key));</span><br><span class="line"></span><br><span class="line"><span class="comment">// best</span></span><br><span class="line"><span class="keyword">const</span> has = <span class="built_in">Object</span>.prototype.hasOwnProperty; <span class="comment">// 在模块作用内做一次缓存</span></span><br><span class="line"><span class="comment">/* or */</span></span><br><span class="line"><span class="keyword">import</span> has <span class="keyword">from</span> <span class="string">'has'</span>; <span class="comment">// https://www.npmjs.com/package/has</span></span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"><span class="built_in">console</span>.log(has.call(object, key));</span><br></pre></td></tr></table></figure>
<p><a name="3.8"></a><br><a name="objects--rest-spread"></a></p>
</li>
<li><p><a href="#objects--rest-spread">3.8</a> 对象浅拷贝时，更推荐使用扩展运算符[就是<code>...</code>运算符]，而不是<a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/assign" target="_blank" rel="noopener"><code>Object.assign</code></a>。获取对象指定的几个属性时，用对象的rest解构运算符[也是<code>...</code>运算符]更好。</p>
<ul>
<li>这一段不太好翻译出来， 大家看下面的例子就懂了。^.^</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// very bad</span></span><br><span class="line"><span class="keyword">const</span> original = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> copy = <span class="built_in">Object</span>.assign(original, &#123; <span class="attr">c</span>: <span class="number">3</span> &#125;); <span class="comment">// this mutates `original` ಠ_ಠ</span></span><br><span class="line"><span class="keyword">delete</span> copy.a; <span class="comment">// so does this</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> original = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> copy = <span class="built_in">Object</span>.assign(&#123;&#125;, original, &#123; <span class="attr">c</span>: <span class="number">3</span> &#125;); <span class="comment">// copy =&gt; &#123; a: 1, b: 2, c: 3 &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// good es6扩展运算符 ...</span></span><br><span class="line"><span class="keyword">const</span> original = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span> &#125;;</span><br><span class="line"><span class="comment">// 浅拷贝</span></span><br><span class="line"><span class="keyword">const</span> copy = &#123; ...original, <span class="attr">c</span>: <span class="number">3</span> &#125;; <span class="comment">// copy =&gt; &#123; a: 1, b: 2, c: 3 &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// rest 赋值运算符</span></span><br><span class="line"><span class="keyword">const</span> &#123; a, ...noA &#125; = copy; <span class="comment">// noA =&gt; &#123; b: 2, c: 3 &#125;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong><a href="#目录">⬆ back to top</a></strong></p>
<h2 id="Arrays"><a href="#Arrays" class="headerlink" title="Arrays"></a>Arrays</h2><p>  <a name="4.1"></a><br>  <a name="arrays--literals"></a></p>
<ul>
<li><p><a href="#arrays--literals">4.1</a> 用字面量赋值。 eslint: <a href="http://eslint.org/docs/rules/no-array-constructor.html" target="_blank" rel="noopener"><code>no-array-constructor</code></a></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> items = <span class="keyword">new</span> <span class="built_in">Array</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> items = [];</span><br></pre></td></tr></table></figure>
<p><a name="4.2"></a><br><a name="arrays--push"></a></p>
</li>
<li><p><a href="#arrays--push">4.2</a> 用<a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/push" target="_blank" rel="noopener">Array#push</a> 代替直接向数组中添加一个值。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> someStack = [];</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line">someStack[someStack.length] = <span class="string">'abracadabra'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line">someStack.push(<span class="string">'abracadabra'</span>);</span><br></pre></td></tr></table></figure>
<p><a name="4.3"></a><br><a name="es6-array-spreads"></a></p>
</li>
<li><p><a href="#es6-array-spreads">4.3</a> 用扩展运算符做数组浅拷贝，类似上面的对象浅拷贝</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> len = items.length;</span><br><span class="line"><span class="keyword">const</span> itemsCopy = [];</span><br><span class="line"><span class="keyword">let</span> i;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; len; i += <span class="number">1</span>) &#123;</span><br><span class="line">  itemsCopy[i] = items[i];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> itemsCopy = [...items];</span><br></pre></td></tr></table></figure>
<p><a name="4.4"></a><br><a name="arrays--from-iterable"></a></p>
</li>
<li><p><a href="#arrays--from-iterable">4.4</a> 用 <code>...</code> 运算符而不是<a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/from" target="_blank" rel="noopener"><code>Array.from</code></a>来将一个可迭代的对象转换成数组。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> foo = <span class="built_in">document</span>.querySelectorAll(<span class="string">'.foo'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> nodes = <span class="built_in">Array</span>.from(foo);</span><br><span class="line"></span><br><span class="line"><span class="comment">// best</span></span><br><span class="line"><span class="keyword">const</span> nodes = [...foo];</span><br></pre></td></tr></table></figure>
<p><a name="4.5"></a><br><a name="arrays--from-array-like"></a></p>
</li>
<li><p><a href="#arrays--from-array-like">4.5</a> 用 <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/from" target="_blank" rel="noopener"><code>Array.from</code></a> 去将一个类数组对象转成一个数组。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> arrLike = &#123; <span class="number">0</span>: <span class="string">'foo'</span>, <span class="number">1</span>: <span class="string">'bar'</span>, <span class="number">2</span>: <span class="string">'baz'</span>, <span class="attr">length</span>: <span class="number">3</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> arr = <span class="built_in">Array</span>.prototype.slice.call(arrLike);</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> arr = <span class="built_in">Array</span>.from(arrLike);</span><br></pre></td></tr></table></figure>
<p><a name="4.6"></a><br><a name="arrays--mapping"></a></p>
</li>
<li><p><a href="#arrays--mapping">4.6</a> 用 <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/from" target="_blank" rel="noopener"><code>Array.from</code></a> 而不是 <code>...</code> 运算符去做map遍历。 因为这样可以避免创建一个临时数组。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> baz = [...foo].map(bar);</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> baz = <span class="built_in">Array</span>.from(foo, bar);</span><br></pre></td></tr></table></figure>
<p><a name="4.7"></a><br><a name="arrays--callback-return"></a></p>
</li>
<li><p><a href="#arrays--callback-return">4.7</a> 在数组方法的回调函数中使用 return 语句。 如果函数体由一条返回一个表达式的语句组成， 并且这个表达式没有副作用， 这个时候可以忽略return，详见 <a href="#arrows--implicit-return">8.2</a>. eslint: <a href="http://eslint.org/docs/rules/array-callback-return" target="_blank" rel="noopener"><code>array-callback-return</code></a></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// good</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].map(<span class="function">(<span class="params">x</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> y = x + <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">return</span> x * y;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// good 函数只有一个语句</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].map(<span class="function"><span class="params">x</span> =&gt;</span> x + <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad - 没有返回值， 因为在第一次迭代后acc 就变成undefined了</span></span><br><span class="line">[[<span class="number">0</span>, <span class="number">1</span>], [<span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>]].reduce(<span class="function">(<span class="params">acc, item, index</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> flatten = acc.concat(item);</span><br><span class="line">  acc[index] = flatten;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line">[[<span class="number">0</span>, <span class="number">1</span>], [<span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>]].reduce(<span class="function">(<span class="params">acc, item, index</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> flatten = acc.concat(item);</span><br><span class="line">  acc[index] = flatten;</span><br><span class="line">  <span class="keyword">return</span> flatten;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line">inbox.filter(<span class="function">(<span class="params">msg</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; subject, author &#125; = msg;</span><br><span class="line">  <span class="keyword">if</span> (subject === <span class="string">'Mockingbird'</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> author === <span class="string">'Harper Lee'</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line">inbox.filter(<span class="function">(<span class="params">msg</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; subject, author &#125; = msg;</span><br><span class="line">  <span class="keyword">if</span> (subject === <span class="string">'Mockingbird'</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> author === <span class="string">'Harper Lee'</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p><a name="4.8"></a><br><a name="arrays--bracket-newline"></a></p>
</li>
<li><p><a href="#arrays--bracket-newline">4.8</a> 如果一个数组有很多行，在数组的 <code>[</code> 后和 <code>]</code> 前断行。 请看下面示例</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> arr = [</span><br><span class="line">  [<span class="number">0</span>, <span class="number">1</span>], [<span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>],</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> objectInArray = [&#123;</span><br><span class="line">  id: <span class="number">1</span>,</span><br><span class="line">&#125;, &#123;</span><br><span class="line">  id: <span class="number">2</span>,</span><br><span class="line">&#125;];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> numberInArray = [</span><br><span class="line">  <span class="number">1</span>, <span class="number">2</span>,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> arr = [[<span class="number">0</span>, <span class="number">1</span>], [<span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>]];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> objectInArray = [</span><br><span class="line">  &#123;</span><br><span class="line">    id: <span class="number">1</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    id: <span class="number">2</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> numberInArray = [</span><br><span class="line">  <span class="number">1</span>,</span><br><span class="line">  <span class="number">2</span>,</span><br><span class="line">];</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong><a href="#目录">⬆ back to top</a></strong></p>
<h2 id="Destructuring"><a href="#Destructuring" class="headerlink" title="Destructuring"></a>Destructuring</h2><p>  <a name="5.1"></a><br>  <a name="destructuring--object"></a></p>
<ul>
<li><p><a href="#destructuring--object">5.1</a> 用对象的解构赋值来获取和使用对象某个或多个属性值。 eslint: <a href="https://eslint.org/docs/rules/prefer-destructuring" target="_blank" rel="noopener"><code>prefer-destructuring</code></a></p>
<blockquote>
<p>Why? 解构保存了这些属性的临时值/引用</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getFullName</span>(<span class="params">user</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> firstName = user.firstName;</span><br><span class="line">  <span class="keyword">const</span> lastName = user.lastName;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;firstName&#125;</span> <span class="subst">$&#123;lastName&#125;</span>`</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getFullName</span>(<span class="params">user</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; firstName, lastName &#125; = user;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;firstName&#125;</span> <span class="subst">$&#123;lastName&#125;</span>`</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// best</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getFullName</span>(<span class="params">&#123; firstName, lastName &#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;firstName&#125;</span> <span class="subst">$&#123;lastName&#125;</span>`</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a name="5.2"></a><br><a name="destructuring--array"></a></p>
</li>
<li><p><a href="#destructuring--array">5.2</a> 用数组解构.</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> first = arr[<span class="number">0</span>];</span><br><span class="line"><span class="keyword">const</span> second = arr[<span class="number">1</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> [first, second] = arr;</span><br></pre></td></tr></table></figure>
<p><a name="5.3"></a><br><a name="destructuring--object-over-array"></a></p>
</li>
<li><p><a href="#destructuring--object-over-array">5.3</a> 多个返回值用对象的解构，而不是数据解构。</p>
<blockquote>
<p>Why? 你可以在后期添加新的属性或者变换变量的顺序而不会打破原有的调用</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">processInput</span>(<span class="params">input</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 然后就是见证奇迹的时刻</span></span><br><span class="line">  <span class="keyword">return</span> [left, right, top, bottom];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用者需要想一想返回值的顺序</span></span><br><span class="line"><span class="keyword">const</span> [left, __, top] = processInput(input);</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">processInput</span>(<span class="params">input</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// oops， 奇迹又发生了</span></span><br><span class="line">  <span class="keyword">return</span> &#123; left, right, top, bottom &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用者只需要选择他想用的值就好了</span></span><br><span class="line"><span class="keyword">const</span> &#123; left, top &#125; = processInput(input);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong><a href="#目录">⬆ back to top</a></strong></p>
<h2 id="Strings"><a href="#Strings" class="headerlink" title="Strings"></a>Strings</h2><p>  <a name="6.1"></a><br>  <a name="strings--quotes"></a></p>
<ul>
<li><p><a href="#strings--quotes">6.1</a> 对string用单引号 <code>&#39;&#39;</code> 。 eslint: <a href="https://eslint.org/docs/rules/quotes.html" target="_blank" rel="noopener"><code>quotes</code></a></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> name = <span class="string">"Capt. Janeway"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad - 样例应该包含插入文字或换行</span></span><br><span class="line"><span class="keyword">const</span> name = <span class="string">`Capt. Janeway`</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> name = <span class="string">'Capt. Janeway'</span>;</span><br></pre></td></tr></table></figure>
<p><a name="6.2"></a><br><a name="strings--line-length"></a></p>
</li>
<li><p><a href="#strings--line-length">6.2</a> 超过100个字符的字符串不应该用string串联成多行。</p>
<blockquote>
<p>Why? 被折断的字符串工作起来是糟糕的而且使得代码更不易被搜索。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> errorMessage = <span class="string">'This is a super long error that was thrown because \</span></span><br><span class="line"><span class="string">of Batman. When you stop to think about how Batman had anything to do \</span></span><br><span class="line"><span class="string">with this, you would get nowhere \</span></span><br><span class="line"><span class="string">fast.'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> errorMessage = <span class="string">'This is a super long error that was thrown because '</span> +</span><br><span class="line">  <span class="string">'of Batman. When you stop to think about how Batman had anything to do '</span> +</span><br><span class="line">  <span class="string">'with this, you would get nowhere fast.'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> errorMessage = <span class="string">'This is a super long error that was thrown because of Batman. When you stop to think about how Batman had anything to do with this, you would get nowhere fast.'</span>;</span><br></pre></td></tr></table></figure>
<p><a name="6.3"></a><br><a name="es6-template-literals"></a></p>
</li>
<li><p><a href="#es6-template-literals">6.3</a> 用字符串模板而不是字符串拼接来组织可编程字符串。 eslint: <a href="https://eslint.org/docs/rules/prefer-template.html" target="_blank" rel="noopener"><code>prefer-template</code></a> <a href="https://eslint.org/docs/rules/template-curly-spacing" target="_blank" rel="noopener"><code>template-curly-spacing</code></a></p>
<blockquote>
<p>Why? 模板字符串更具可读性、语法简洁、字符串插入参数。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayHi</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">'How are you, '</span> + name + <span class="string">'?'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayHi</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> [<span class="string">'How are you, '</span>, name, <span class="string">'?'</span>].join();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayHi</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`How are you, <span class="subst">$&#123; name &#125;</span>?`</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayHi</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`How are you, <span class="subst">$&#123;name&#125;</span>?`</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a name="6.4"></a><br><a name="strings--eval"></a></p>
</li>
<li><p><a href="#strings--eval">6.4</a> 永远不要在字符串中用<code>eval()</code>，他就是潘多拉盒子。 eslint: <a href="https://eslint.org/docs/rules/no-eval" target="_blank" rel="noopener"><code>no-eval</code></a></p>
<p><a name="6.5"></a><br><a name="strings--escaping"></a></p>
</li>
<li><p><a href="#strings--escaping">6.5</a> 不要使用不必要的转义字符。eslint: <a href="http://eslint.org/docs/rules/no-useless-escape" target="_blank" rel="noopener"><code>no-useless-escape</code></a></p>
<blockquote>
<p>Why? 反斜线可读性差，所以他们只在必须使用时才出现哦</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> foo = <span class="string">'\'this\' \i\s \"quoted\"'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> foo = <span class="string">'\'this\' is "quoted"'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//best</span></span><br><span class="line"><span class="keyword">const</span> foo = <span class="string">`my name is '<span class="subst">$&#123;name&#125;</span>'`</span>;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong><a href="#目录">⬆ back to top</a></strong></p>
<h2 id="Functions"><a href="#Functions" class="headerlink" title="Functions"></a>Functions</h2><p>  <a name="7.1"></a><br>  <a name="functions--declarations"></a></p>
<ul>
<li><p><a href="#functions--declarations">7.1</a> 用命名函数表达式而不是函数声明。eslint: <a href="http://eslint.org/docs/rules/func-style" target="_blank" rel="noopener"><code>func-style</code></a></p>
<blockquote>
<p>函数表达式： const func = function () {}</p>
</blockquote>
<blockquote>
<p>函数声明： function func() {}</p>
</blockquote>
<blockquote>
<p>Why? 函数声明时作用域被提前了，这意味着在一个文件里函数很容易（太容易了）在其定义之前被引用。这样伤害了代码可读性和可维护性。如果你发现一个函数有大又复杂，这个函数妨碍这个文件其他部分的理解性，这可能就是时候把这个函数单独抽成一个模块了。别忘了给表达式显示的命名，不用管这个名字是不是由一个确定的变量推断出来的，这消除了由匿名函数在错误调用栈产生的所有假设，这在现代浏览器和类似babel编译器中很常见 (<a href="https://github.com/airbnb/javascript/issues/794" target="_blank" rel="noopener">Discussion</a>)</p>
</blockquote>
<blockquote>
<p>Why? 这一段还不理解这种错误发生的场景，所以只能直译过来了， 另附<a href="https://github.com/airbnb/javascript#functions--declarations" target="_blank" rel="noopener">原文</a><br>Why? Function declarations are hoisted, which means that it’s easy - too easy - to reference the function before it is defined in the file. This harms readability and maintainability. If you find that a function’s definition is large or complex enough that it is interfering with understanding the rest of the file, then perhaps it’s time to extract it to its own module! Don’t forget to explicitly name the expression, regardless of whether or not the name is inferred from the containing variable (which is often the case in modern browsers or when using compilers such as Babel). This eliminates any assumptions made about the Error’s call stack. (<a href="https://github.com/airbnb/javascript/issues/794" target="_blank" rel="noopener">Discussion</a>)</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> foo = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="comment">// lexical name distinguished from the variable-referenced invocation(s)</span></span><br><span class="line"><span class="comment">// 函数表达式名和声明的函数名是不一样的</span></span><br><span class="line"><span class="keyword">const</span> short = <span class="function"><span class="keyword">function</span> <span class="title">longUniqueMoreDescriptiveLexicalFoo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p><a name="7.2"></a><br><a name="functions--iife"></a></p>
</li>
<li><p><a href="#functions--iife">7.2</a> 把立即执行函数包裹在圆括号里。 eslint: <a href="http://eslint.org/docs/rules/wrap-iife.html" target="_blank" rel="noopener"><code>wrap-iife</code></a></p>
<blockquote>
<p>Why? immediately invoked function expression = IIFE<br>Why? 一个立即调用的函数表达式是一个单元 - 把它和他的调用者（圆括号）包裹起来，在括号中可以清晰的地表达这些。<br>Why? 注意：在模块化世界里，你几乎用不着 IIFE</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// immediately-invoked function expression (IIFE)</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'Welcome to the Internet. Please follow me.'</span>);</span><br><span class="line">&#125;());</span><br></pre></td></tr></table></figure>
<p><a name="7.3"></a><br><a name="functions--in-blocks"></a></p>
</li>
<li><p><a href="#functions--in-blocks">7.3</a> 不要在非函数块（if、while等等）内声明函数。把这个函数分配给一个变量。浏览器会允许你这样做，但浏览器解析方式不同，这是一个坏消息。【详见<code>no-loop-func</code>】 eslint: <a href="http://eslint.org/docs/rules/no-loop-func.html" target="_blank" rel="noopener"><code>no-loop-func</code></a></p>
<p><a name="7.4"></a><br><a name="functions--note-on-blocks"></a></p>
</li>
<li><p><a href="#functions--note-on-blocks">7.4</a> <strong>Note:</strong> 在ECMA-262中 [块 <code>block</code>] 的定义是： 一系列的语句； 但是函数声明不是一个语句。 函数表达式是一个语句。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">if</span> (currentUser) &#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Nope.'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">let</span> test;</span><br><span class="line"><span class="keyword">if</span> (currentUser) &#123;</span><br><span class="line">  test = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Yup.'</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a name="7.5"></a><br><a name="functions--arguments-shadow"></a></p>
</li>
<li><p><a href="#functions--arguments-shadow">7.5</a> 不要用<code>arguments</code>命名参数。他的优先级高于每个函数作用域自带的 <code>arguments</code> 对象， 这会导致函数自带的 <code>arguments</code> 值被覆盖</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">name, options, arguments</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">name, options, args</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a name="7.6"></a><br><a name="es6-rest"></a></p>
</li>
<li><p><a href="#es6-rest">7.6</a> 不要使用<code>arguments</code>，用rest语法<code>...</code>代替。 eslint: <a href="http://eslint.org/docs/rules/prefer-rest-params" target="_blank" rel="noopener"><code>prefer-rest-params</code></a></p>
<blockquote>
<p>Why? <code>...</code>明确你想用那个参数。而且rest参数是真数组，而不是类似数组的<code>arguments</code></p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">concatenateAll</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> args = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>);</span><br><span class="line">  <span class="keyword">return</span> args.join(<span class="string">''</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">concatenateAll</span>(<span class="params">...args</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> args.join(<span class="string">''</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a name="7.7"></a><br><a name="es6-default-parameters"></a></p>
</li>
<li><p><a href="#es6-default-parameters">7.7</a> 用默认参数语法而不是在函数里对参数重新赋值。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// really bad</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">handleThings</span>(<span class="params">opts</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 不， 我们不该改arguments</span></span><br><span class="line">  <span class="comment">// 第二： 如果 opts 的值为 false, 它会被赋值为 &#123;&#125;</span></span><br><span class="line">  <span class="comment">// 虽然你想这么写， 但是这个会带来一些细微的bug</span></span><br><span class="line">  opts = opts || &#123;&#125;;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// still bad</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">handleThings</span>(<span class="params">opts</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (opts === <span class="keyword">void</span> <span class="number">0</span>) &#123;</span><br><span class="line">    opts = &#123;&#125;;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">handleThings</span>(<span class="params">opts = &#123;&#125;</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a name="7.8"></a><br><a name="functions--default-side-effects"></a></p>
</li>
<li><p><a href="#functions--default-side-effects">7.8</a> 默认参数避免副作用</p>
<blockquote>
<p>Why? 他会令人迷惑不解， 比如下面这个， a到底等于几， 这个需要想一下。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> b = <span class="number">1</span>;</span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">count</span>(<span class="params">a = b++</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(a);</span><br><span class="line">&#125;</span><br><span class="line">count();  <span class="comment">// 1</span></span><br><span class="line">count();  <span class="comment">// 2</span></span><br><span class="line">count(<span class="number">3</span>); <span class="comment">// 3</span></span><br><span class="line">count();  <span class="comment">// 3</span></span><br></pre></td></tr></table></figure>
<p><a name="7.9"></a><br><a name="functions--defaults-last"></a></p>
</li>
<li><p><a href="#functions--defaults-last">7.9</a> 把默认参数赋值放在最后</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">handleThings</span>(<span class="params">opts = &#123;&#125;, name</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">handleThings</span>(<span class="params">name, opts = &#123;&#125;</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a name="7.10"></a><br><a name="functions--constructor"></a></p>
</li>
<li><p><a href="#functions--constructor">7.10</a> 不要用函数构造器创建函数。 eslint: <a href="http://eslint.org/docs/rules/no-new-func" target="_blank" rel="noopener"><code>no-new-func</code></a></p>
<blockquote>
<p>Why? 以这种方式创建函数将类似于字符串 eval()，这会打开漏洞。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">var</span> add = <span class="keyword">new</span> <span class="built_in">Function</span>(<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'return a + b'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// still bad</span></span><br><span class="line"><span class="keyword">var</span> subtract = <span class="built_in">Function</span>(<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'return a - b'</span>);</span><br></pre></td></tr></table></figure>
<p><a name="7.11"></a><br><a name="functions--signature-spacing"></a></p>
</li>
<li><p><a href="#functions--signature-spacing">7.11</a> 函数签名部分要有空格。eslint: <a href="http://eslint.org/docs/rules/space-before-function-paren" target="_blank" rel="noopener"><code>space-before-function-paren</code></a> <a href="http://eslint.org/docs/rules/space-before-blocks" target="_blank" rel="noopener"><code>space-before-blocks</code></a></p>
<blockquote>
<p>Why? 统一性好，而且在你添加/删除一个名字的时候不需要添加/删除空格</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> f = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;;</span><br><span class="line"><span class="keyword">const</span> g = <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;&#125;;</span><br><span class="line"><span class="keyword">const</span> h = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> x = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line"><span class="keyword">const</span> y = <span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>) </span>&#123;&#125;;</span><br></pre></td></tr></table></figure>
<p><a name="7.12"></a><br><a name="functions--mutate-params"></a></p>
</li>
<li><p><a href="#functions--mutate-params">7.12</a> 不要改参数. eslint: <a href="http://eslint.org/docs/rules/no-param-reassign.html" target="_blank" rel="noopener"><code>no-param-reassign</code></a></p>
<blockquote>
<p>Why? 操作参数对象对原始调用者会导致意想不到的副作用。 就是不要改参数的数据结构，保留参数原始值和数据结构。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  obj.key = <span class="number">1</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f2</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> key = <span class="built_in">Object</span>.prototype.hasOwnProperty.call(obj, <span class="string">'key'</span>) ? obj.key : <span class="number">1</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p><a name="7.13"></a><br><a name="functions--reassign-params"></a></p>
</li>
<li><p><a href="#functions--reassign-params">7.13</a> 不要对参数重新赋值。 eslint: <a href="http://eslint.org/docs/rules/no-param-reassign.html" target="_blank" rel="noopener"><code>no-param-reassign</code></a></p>
<blockquote>
<p>Why? 参数重新赋值会导致意外行为，尤其是对 <code>arguments</code>。这也会导致优化问题，特别是在V8里</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params">a</span>) </span>&#123;</span><br><span class="line">  a = <span class="number">1</span>;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f2</span>(<span class="params">a</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!a) &#123; a = <span class="number">1</span>; &#125;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f3</span>(<span class="params">a</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> b = a || <span class="number">1</span>;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f4</span>(<span class="params">a = <span class="number">1</span></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a name="7.14"></a><br><a name="functions--spread-vs-apply"></a></p>
</li>
<li><p><a href="#functions--spread-vs-apply">7.14</a> 用<code>spread</code>操作符<code>...</code>去调用多变的函数更好。 eslint: <a href="http://eslint.org/docs/rules/prefer-spread" target="_blank" rel="noopener"><code>prefer-spread</code></a></p>
<blockquote>
<p>Why? 这样更清晰，你不必提供上下文，而且你不能轻易地用<code>apply</code>来组成<code>new</code></p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> x = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"><span class="built_in">console</span>.log.apply(<span class="built_in">console</span>, x);</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> x = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"><span class="built_in">console</span>.log(...x);</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">new</span> (<span class="built_in">Function</span>.prototype.bind.apply(<span class="built_in">Date</span>, [<span class="literal">null</span>, <span class="number">2016</span>, <span class="number">8</span>, <span class="number">5</span>]));</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Date</span>(...[<span class="number">2016</span>, <span class="number">8</span>, <span class="number">5</span>]);</span><br></pre></td></tr></table></figure>
<p><a name="7.15"></a><br><a name="functions--signature-invocation-indentation"></a></p>
</li>
<li><p><a href="#functions--signature-invocation-indentation">7.15</a> 调用或者书写一个包含多个参数的函数应该想这个指南里的其他多行代码写法一样： 每行值包含一个参数，每行逗号结尾。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">bar,</span></span></span><br><span class="line"><span class="function"><span class="params">             baz,</span></span></span><br><span class="line"><span class="function"><span class="params">             quux</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good 缩进不要太过分</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">  bar,</span></span></span><br><span class="line"><span class="function"><span class="params">  baz,</span></span></span><br><span class="line"><span class="function"><span class="params">  quux,</span></span></span><br><span class="line"><span class="function"><span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="built_in">console</span>.log(foo,</span><br><span class="line">  bar,</span><br><span class="line">  baz);</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="built_in">console</span>.log(</span><br><span class="line">  foo,</span><br><span class="line">  bar,</span><br><span class="line">  baz,</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong><a href="#目录">⬆ back to top</a></strong></p>
<h2 id="Arrow-Functions"><a href="#Arrow-Functions" class="headerlink" title="Arrow Functions"></a>Arrow Functions</h2><p>  <a name="8.1"></a><br>  <a name="arrows--use-them"></a></p>
<ul>
<li><p><a href="#arrows--use-them">8.1</a> 当你一定要用函数表达式（在回调函数里）的时候就用箭头表达式吧。 eslint: <a href="http://eslint.org/docs/rules/prefer-arrow-callback.html" target="_blank" rel="noopener"><code>prefer-arrow-callback</code></a>, <a href="http://eslint.org/docs/rules/arrow-spacing.html" target="_blank" rel="noopener"><code>arrow-spacing</code></a></p>
<blockquote>
<p>Why? 他创建了一个<code>this</code>的当前执行上下文的函数的版本，这通常就是你想要的；而且箭头函数是更简洁的语法</p>
</blockquote>
<blockquote>
<p>Why? 什么时候不用箭头函数： 如果你有一个相当复杂的函数，你可能会把这个逻辑移出到他自己的函数声明里。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].map(<span class="function"><span class="keyword">function</span> (<span class="params">x</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> y = x + <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">return</span> x * y;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].map(<span class="function">(<span class="params">x</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> y = x + <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">return</span> x * y;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p><a name="8.2"></a><br><a name="arrows--implicit-return"></a></p>
</li>
<li><p><a href="#arrows--implicit-return">8.2</a> 如果函数体由一个没有副作用的<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Expressions_and_Operators#Expressions" target="_blank" rel="noopener">表达式</a>语句组成，删除大括号和return。否则，继续用大括号和 <code>return</code> 语句。 eslint: <a href="https://eslint.org/docs/rules/arrow-parens.html" target="_blank" rel="noopener"><code>arrow-parens</code></a>, <a href="https://eslint.org/docs/rules/arrow-body-style.html" target="_blank" rel="noopener"><code>arrow-body-style</code></a></p>
<blockquote>
<p>Why? 语法糖，当多个函数链在一起的时候好读</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].map(<span class="function"><span class="params">number</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> nextNumber = number + <span class="number">1</span>;</span><br><span class="line">  <span class="string">`A string containing the <span class="subst">$&#123;nextNumber&#125;</span>.`</span>;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].map(<span class="function"><span class="params">number</span> =&gt;</span> <span class="string">`A string containing the <span class="subst">$&#123;number&#125;</span>.`</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].map(<span class="function">(<span class="params">number</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> nextNumber = number + <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`A string containing the <span class="subst">$&#123;nextNumber&#125;</span>.`</span>;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].map(<span class="function">(<span class="params">number, index</span>) =&gt;</span> (&#123;</span><br><span class="line">  [index]: number</span><br><span class="line">&#125;));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 表达式有副作用就不要用隐式return</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">callback</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> val = callback();</span><br><span class="line">  <span class="keyword">if</span> (val === <span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="comment">// Do something if callback returns true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> bool = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="comment">// 这种情况会return bool = true, 不好</span></span><br><span class="line">foo(<span class="function"><span class="params">()</span> =&gt;</span> bool = <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line">foo(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  bool = <span class="literal">true</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p><a name="8.3"></a><br><a name="arrows--paren-wrap"></a></p>
</li>
<li><p><a href="#arrows--paren-wrap">8.3</a> 万一表达式涉及多行，把他包裹在圆括号里更可读。</p>
<blockquote>
<p>Why? 这样清晰的显示函数的开始和结束</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line">[<span class="string">'get'</span>, <span class="string">'post'</span>, <span class="string">'put'</span>].map(<span class="function"><span class="params">httpMethod</span> =&gt;</span> <span class="built_in">Object</span>.prototype.hasOwnProperty.call(</span><br><span class="line">    httpMagicObjectWithAVeryLongName,</span><br><span class="line">    httpMethod</span><br><span class="line">  )</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line">[<span class="string">'get'</span>, <span class="string">'post'</span>, <span class="string">'put'</span>].map(<span class="function"><span class="params">httpMethod</span> =&gt;</span> (</span><br><span class="line">  <span class="built_in">Object</span>.prototype.hasOwnProperty.call(</span><br><span class="line">    httpMagicObjectWithAVeryLongName,</span><br><span class="line">    httpMethod</span><br><span class="line">  )</span><br><span class="line">));</span><br></pre></td></tr></table></figure>
<p><a name="8.4"></a><br><a name="arrows--one-arg-parens"></a></p>
</li>
<li><p><a href="#arrows--one-arg-parens">8.4</a> 如果你的函数只有一个参数并且函数体没有大括号，就删除圆括号。否则，参数总是放在圆括号里。 注意： 一直用圆括号也是没问题，只需要配置 <a href="https://eslint.org/docs/rules/arrow-parens#always" target="_blank" rel="noopener">“always” option</a> for eslint. eslint: <a href="https://eslint.org/docs/rules/arrow-parens.html" target="_blank" rel="noopener"><code>arrow-parens</code></a></p>
<blockquote>
<p>Why? 这样少一些混乱， 其实没啥语法上的讲究，就保持一个风格。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].map(<span class="function">(<span class="params">x</span>) =&gt;</span> x * x);</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].map(<span class="function"><span class="params">x</span> =&gt;</span> x * x);</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].map(<span class="function"><span class="params">number</span> =&gt;</span> (</span><br><span class="line">  <span class="string">`A long string with the <span class="subst">$&#123;number&#125;</span>. It’s so long that we don’t want it to take up space on the .map line!`</span></span><br><span class="line">));</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].map(<span class="function"><span class="params">x</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> y = x + <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">return</span> x * y;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].map(<span class="function">(<span class="params">x</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> y = x + <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">return</span> x * y;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p><a name="8.5"></a><br><a name="arrows--confusing"></a></p>
</li>
<li><p><a href="#arrows--confusing">8.5</a> 避免箭头函数(<code>=&gt;</code>)和比较操作符（<code>&lt;=, &gt;=</code>）混淆. eslint: <a href="http://eslint.org/docs/rules/no-confusing-arrow" target="_blank" rel="noopener"><code>no-confusing-arrow</code></a></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> itemHeight = <span class="function"><span class="params">item</span> =&gt;</span> item.height &gt; <span class="number">256</span> ? item.largeSize : item.smallSize;</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> itemHeight = <span class="function">(<span class="params">item</span>) =&gt;</span> item.height &gt; <span class="number">256</span> ? item.largeSize : item.smallSize;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> itemHeight = <span class="function"><span class="params">item</span> =&gt;</span> (item.height &gt; <span class="number">256</span> ? item.largeSize : item.smallSize);</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> itemHeight = <span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; height, largeSize, smallSize &#125; = item;</span><br><span class="line">  <span class="keyword">return</span> height &gt; <span class="number">256</span> ? largeSize : smallSize;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p><a name="8.6"></a><br><a name="whitespace--implicit-arrow-linebreak"></a></p>
</li>
<li><p><a href="#whitespace--implicit-arrow-linebreak">8.6</a> 在隐式return中强制约束函数体的位置， 就写在箭头后面。 eslint: <a href="https://eslint.org/docs/rules/implicit-arrow-linebreak" target="_blank" rel="noopener"><code>implicit-arrow-linebreak</code></a></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line">(foo) =&gt;</span><br><span class="line">  bar;</span><br><span class="line"></span><br><span class="line">(foo) =&gt;</span><br><span class="line">  (bar);</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line">(foo) =&gt; bar;</span><br><span class="line">(foo) =&gt; (bar);</span><br><span class="line">(foo) =&gt; (</span><br><span class="line">   bar</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong><a href="#目录">⬆ back to top</a></strong></p>
<h2 id="Classes-amp-Constructors"><a href="#Classes-amp-Constructors" class="headerlink" title="Classes &amp; Constructors"></a>Classes &amp; Constructors</h2><p>  <a name="9.1"></a><br>  <a name="constructors--use-class"></a></p>
<ul>
<li><p><a href="#constructors--use-class">9.1</a> 常用<code>class</code>，避免直接操作<code>prototype</code></p>
<blockquote>
<p>Why? <code>class</code>语法更简洁更易理解</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Queue</span>(<span class="params">contents = []</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.queue = [...contents];</span><br><span class="line">&#125;</span><br><span class="line">Queue.prototype.pop = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> value = <span class="keyword">this</span>.queue[<span class="number">0</span>];</span><br><span class="line">  <span class="keyword">this</span>.queue.splice(<span class="number">0</span>, <span class="number">1</span>);</span><br><span class="line">  <span class="keyword">return</span> value;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>// good<br>class Queue {<br>  constructor(contents = []) {</p>
<pre><code>this.queue = [...contents];
</code></pre><p>  }<br>  pop() {</p>
<pre><code>const value = this.queue[0];
this.queue.splice(0, 1);
return value;
</code></pre><p>  }<br>}</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">&lt;a name=&quot;9.2&quot;&gt;&lt;/a&gt;</span><br><span class="line">&lt;a name=&quot;constructors--extends&quot;&gt;&lt;/a&gt;</span><br><span class="line">- [9.2](#constructors--extends) 用`extends`实现继承</span><br><span class="line"></span><br><span class="line">  &gt; Why? 它是一种内置的方法来继承原型功能而不打破`instanceof`</span><br><span class="line"></span><br><span class="line">  ```javascript</span><br><span class="line">  // bad</span><br><span class="line">  const inherits = require(&apos;inherits&apos;);</span><br><span class="line">  function PeekableQueue(contents) &#123;</span><br><span class="line">    Queue.apply(this, contents);</span><br><span class="line">  &#125;</span><br><span class="line">  inherits(PeekableQueue, Queue);</span><br><span class="line">  PeekableQueue.prototype.peek = function () &#123;</span><br><span class="line">    return this._queue[0];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // good</span><br><span class="line">  class PeekableQueue extends Queue &#123;</span><br><span class="line">    peek() &#123;</span><br><span class="line">      return this._queue[0];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p><a name="9.3"></a><br><a name="constructors--chaining"></a></p>
</li>
<li><p><a href="#constructors--chaining">9.3</a> 方法可以返回<code>this</code>来实现方法链</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line">Jedi.prototype.jump = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.jumping = <span class="literal">true</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">Jedi.prototype.setHeight = <span class="function"><span class="keyword">function</span> (<span class="params">height</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.height = height;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> luke = <span class="keyword">new</span> Jedi();</span><br><span class="line">luke.jump(); <span class="comment">// =&gt; true</span></span><br><span class="line">luke.setHeight(<span class="number">20</span>); <span class="comment">// =&gt; undefined</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Jedi</span> </span>&#123;</span><br><span class="line">  jump() &#123;</span><br><span class="line">    <span class="keyword">this</span>.jumping = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  setHeight(height) &#123;</span><br><span class="line">    <span class="keyword">this</span>.height = height;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> luke = <span class="keyword">new</span> Jedi();</span><br><span class="line"></span><br><span class="line">luke.jump()</span><br><span class="line">  .setHeight(<span class="number">20</span>);</span><br></pre></td></tr></table></figure>
<p><a name="9.4"></a><br><a name="constructors--tostring"></a></p>
</li>
<li><p><a href="#constructors--tostring">9.4</a> 写一个定制的toString()方法是可以的，只要保证它是可以正常工作且没有副作用的</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Jedi</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(options = &#123;&#125;) &#123;</span><br><span class="line">    <span class="keyword">this</span>.name = options.name || <span class="string">'no name'</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  getName() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.name;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  toString() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`Jedi - <span class="subst">$&#123;<span class="keyword">this</span>.getName()&#125;</span>`</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a name="9.5"></a><br><a name="constructors--no-useless"></a></p>
</li>
<li><p><a href="#constructors--no-useless">9.5</a> 如果没有具体说明，类有默认的构造方法。一个空的构造函数或只是代表父类的构造函数是不需要写的。 eslint: <a href="http://eslint.org/docs/rules/no-useless-constructor" target="_blank" rel="noopener"><code>no-useless-constructor</code></a></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Jedi</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>() &#123;&#125;</span><br><span class="line"></span><br><span class="line">  getName() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.name;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Rey</span> <span class="keyword">extends</span> <span class="title">Jedi</span> </span>&#123;</span><br><span class="line">  <span class="comment">// 这种构造函数是不需要写的</span></span><br><span class="line">  <span class="keyword">constructor</span>(...args) &#123;</span><br><span class="line">    <span class="keyword">super</span>(...args);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Rey</span> <span class="keyword">extends</span> <span class="title">Jedi</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(...args) &#123;</span><br><span class="line">    <span class="keyword">super</span>(...args);</span><br><span class="line">    <span class="keyword">this</span>.name = <span class="string">'Rey'</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a name="9.6"></a><br><a name="classes--no-duplicate-members"></a></p>
</li>
<li><p><a href="#classes--no-duplicate-members">9.6</a> 避免重复类成员。 eslint: <a href="http://eslint.org/docs/rules/no-dupe-class-members" target="_blank" rel="noopener"><code>no-dupe-class-members</code></a></p>
<blockquote>
<p>Why? 重复类成员会默默的执行最后一个 —— 重复本身也是一个bug</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span> </span>&#123;</span><br><span class="line">  bar() &#123; <span class="keyword">return</span> <span class="number">1</span>; &#125;</span><br><span class="line">  bar() &#123; <span class="keyword">return</span> <span class="number">2</span>; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span> </span>&#123;</span><br><span class="line">  bar() &#123; <span class="keyword">return</span> <span class="number">1</span>; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span> </span>&#123;</span><br><span class="line">  bar() &#123; <span class="keyword">return</span> <span class="number">2</span>; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong><a href="#目录">⬆ back to top</a></strong></p>
<h2 id="Modules"><a href="#Modules" class="headerlink" title="Modules"></a>Modules</h2><p>  <a name="10.1"></a><br>  <a name="modules--use-them"></a></p>
<ul>
<li><p><a href="#modules--use-them">10.1</a> 用(<code>import</code>/<code>export</code>) 模块而不是无标准的模块系统。你可以随时转到你喜欢的模块系统。</p>
<blockquote>
<p>Why? 模块化是未来，让我们现在就开启未来吧。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> AirbnbStyleGuide = <span class="built_in">require</span>(<span class="string">'./AirbnbStyleGuide'</span>);</span><br><span class="line"><span class="built_in">module</span>.exports = AirbnbStyleGuide.es6;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ok</span></span><br><span class="line"><span class="keyword">import</span> AirbnbStyleGuide <span class="keyword">from</span> <span class="string">'./AirbnbStyleGuide'</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> AirbnbStyleGuide.es6;</span><br><span class="line"></span><br><span class="line"><span class="comment">// best</span></span><br><span class="line"><span class="keyword">import</span> &#123; es6 &#125; <span class="keyword">from</span> <span class="string">'./AirbnbStyleGuide'</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> es6;</span><br></pre></td></tr></table></figure>
<p><a name="10.2"></a><br><a name="modules--no-wildcard"></a></p>
</li>
<li><p><a href="#modules--no-wildcard">10.2</a> 不要用import通配符， 就是 <code>*</code> 这种方式</p>
<blockquote>
<p>Why? 这确保你有单个默认的导出</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> AirbnbStyleGuide <span class="keyword">from</span> <span class="string">'./AirbnbStyleGuide'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">import</span> AirbnbStyleGuide <span class="keyword">from</span> <span class="string">'./AirbnbStyleGuide'</span>;</span><br></pre></td></tr></table></figure>
<p><a name="10.3"></a><br><a name="modules--no-export-from-import"></a></p>
</li>
<li><p><a href="#modules--no-export-from-import">10.3</a> 不要直接从import中直接export</p>
<blockquote>
<p>Why? 虽然一行是简洁的，有一个明确的方式进口和一个明确的出口方式来保证一致性。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="comment">// filename es6.js</span></span><br><span class="line"><span class="keyword">export</span> &#123; es6 <span class="keyword">as</span> <span class="keyword">default</span> &#125; <span class="keyword">from</span> <span class="string">'./AirbnbStyleGuide'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="comment">// filename es6.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; es6 &#125; <span class="keyword">from</span> <span class="string">'./AirbnbStyleGuide'</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> es6;</span><br></pre></td></tr></table></figure>
<p><a name="10.4"></a><br><a name="modules--no-duplicate-imports"></a></p>
</li>
<li><p><a href="#modules--no-duplicate-imports">10.4</a> 一个路径只 import 一次。<br>eslint: <a href="http://eslint.org/docs/rules/no-duplicate-imports" target="_blank" rel="noopener"><code>no-duplicate-imports</code></a></p>
<blockquote>
<p>Why? 从同一个路径下import多行会使代码难以维护</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">import</span> foo <span class="keyword">from</span> <span class="string">'foo'</span>;</span><br><span class="line"><span class="comment">// … some other imports … //</span></span><br><span class="line"><span class="keyword">import</span> &#123; named1, named2 &#125; <span class="keyword">from</span> <span class="string">'foo'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">import</span> foo, &#123; named1, named2 &#125; <span class="keyword">from</span> <span class="string">'foo'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">import</span> foo, &#123;</span><br><span class="line">  named1,</span><br><span class="line">  named2,</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">'foo'</span>;</span><br></pre></td></tr></table></figure>
<p><a name="10.5"></a><br><a name="modules--no-mutable-exports"></a></p>
</li>
<li><p><a href="#modules--no-mutable-exports">10.5</a> 不要到处可变的东西<br>eslint: <a href="https://github.com/benmosher/eslint-plugin-import/blob/master/docs/rules/no-mutable-exports.md" target="_blank" rel="noopener"><code>import/no-mutable-exports</code></a></p>
<blockquote>
<p>Why? 变化通常都是需要避免，特别是当你要输出可变的绑定。虽然在某些场景下可能需要这种技术，但总的来说应该导出常量。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">let</span> foo = <span class="number">3</span>;</span><br><span class="line"><span class="keyword">export</span> &#123; foo &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> foo = <span class="number">3</span>;</span><br><span class="line"><span class="keyword">export</span> &#123; foo &#125;</span><br></pre></td></tr></table></figure>
<p><a name="10.6"></a><br><a name="modules--prefer-default-export"></a></p>
</li>
<li><p><a href="#modules--prefer-default-export">10.6</a> 在一个单一导出模块里，用 <code>export default</code> 更好。<br>eslint: <a href="https://github.com/benmosher/eslint-plugin-import/blob/master/docs/rules/prefer-default-export.md" target="_blank" rel="noopener"><code>import/prefer-default-export</code></a></p>
<blockquote>
<p>Why? 鼓励使用更多文件，每个文件只做一件事情并导出，这样可读性和可维护性更好。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;&#125;</span><br></pre></td></tr></table></figure>
<p><a name="10.7"></a><br><a name="modules--imports-first"></a></p>
</li>
<li><p><a href="#modules--imports-first">10.7</a> <code>import</code> 放在其他所有语句之前。<br>eslint: <a href="https://github.com/benmosher/eslint-plugin-import/blob/master/docs/rules/first.md" target="_blank" rel="noopener"><code>import/first</code></a></p>
<blockquote>
<p>Why? 让<code>import</code>放在最前面防止意外行为。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">import</span> foo <span class="keyword">from</span> <span class="string">'foo'</span>;</span><br><span class="line">foo.init();</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> bar <span class="keyword">from</span> <span class="string">'bar'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">import</span> foo <span class="keyword">from</span> <span class="string">'foo'</span>;</span><br><span class="line"><span class="keyword">import</span> bar <span class="keyword">from</span> <span class="string">'bar'</span>;</span><br><span class="line"></span><br><span class="line">foo.init();</span><br></pre></td></tr></table></figure>
<p><a name="10.8"></a><br><a name="modules--multiline-imports-over-newlines"></a></p>
</li>
<li><p><a href="#modules--multiline-imports-over-newlines">10.8</a> 多行import应该缩进，就像多行数组和对象字面量</p>
<blockquote>
<p>Why?  花括号与样式指南中每个其他花括号块遵循相同的缩进规则，逗号也是。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">import</span> &#123;longNameA, longNameB, longNameC, longNameD, longNameE&#125; <span class="keyword">from</span> <span class="string">'path'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  longNameA,</span><br><span class="line">  longNameB,</span><br><span class="line">  longNameC,</span><br><span class="line">  longNameD,</span><br><span class="line">  longNameE,</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">'path'</span>;</span><br></pre></td></tr></table></figure>
<p><a name="10.9"></a><br><a name="modules--no-webpack-loader-syntax"></a></p>
</li>
<li><p><a href="#modules--no-webpack-loader-syntax">10.9</a> 在import语句里不允许Webpack loader语法<br>eslint: <a href="https://github.com/benmosher/eslint-plugin-import/blob/master/docs/rules/no-webpack-loader-syntax.md" target="_blank" rel="noopener"><code>import/no-webpack-loader-syntax</code></a></p>
<blockquote>
<p>Why? 一旦用Webpack语法在import里会把代码耦合到模块绑定器。最好是在<code>webpack.config.js</code>里写webpack loader语法</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">import</span> fooSass <span class="keyword">from</span> <span class="string">'css!sass!foo.scss'</span>;</span><br><span class="line"><span class="keyword">import</span> barCss <span class="keyword">from</span> <span class="string">'style!css!bar.css'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">import</span> fooSass <span class="keyword">from</span> <span class="string">'foo.scss'</span>;</span><br><span class="line"><span class="keyword">import</span> barCss <span class="keyword">from</span> <span class="string">'bar.css'</span>;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong><a href="#目录">⬆ back to top</a></strong></p>
<h2 id="Iterators-and-Generators"><a href="#Iterators-and-Generators" class="headerlink" title="Iterators and Generators"></a>Iterators and Generators</h2><p>  <a name="11.1"></a><br>  <a name="iterators--nope"></a></p>
<ul>
<li><p><a href="#iterators--nope">11.1</a> 不要用遍历器。用JavaScript高级函数代替<code>for-in</code>、 <code>for-of</code>。 eslint: <a href="http://eslint.org/docs/rules/no-iterator.html" target="_blank" rel="noopener"><code>no-iterator</code></a> <a href="http://eslint.org/docs/rules/no-restricted-syntax" target="_blank" rel="noopener"><code>no-restricted-syntax</code></a></p>
<blockquote>
<p>Why? 这强调了我们不可变的规则。 处理返回值的纯函数比副作用更容易。</p>
</blockquote>
<blockquote>
<p>Why? 用数组的这些迭代方法： <code>map()</code> / <code>every()</code> / <code>filter()</code> / <code>find()</code> / <code>findIndex()</code> / <code>reduce()</code> / <code>some()</code> / … , 用对象的这些方法 <code>Object.keys()</code> / <code>Object.values()</code> / <code>Object.entries()</code>  去产生一个数组， 这样你就能去遍历对象了。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">let</span> sum = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> num <span class="keyword">of</span> numbers) &#123;</span><br><span class="line">  sum += num;</span><br><span class="line">&#125;</span><br><span class="line">sum === <span class="number">15</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">let</span> sum = <span class="number">0</span>;</span><br><span class="line">numbers.forEach(<span class="function"><span class="params">num</span> =&gt;</span> sum += num);</span><br><span class="line">sum === <span class="number">15</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// best (use the functional force)</span></span><br><span class="line"><span class="keyword">const</span> sum = numbers.reduce(<span class="function">(<span class="params">total, num</span>) =&gt;</span> total + num, <span class="number">0</span>);</span><br><span class="line">sum === <span class="number">15</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> increasedByOne = [];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; numbers.length; i++) &#123;</span><br><span class="line">  increasedByOne.push(numbers[i] + <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> increasedByOne = [];</span><br><span class="line">numbers.forEach(<span class="function"><span class="params">num</span> =&gt;</span> increasedByOne.push(num + <span class="number">1</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// best (keeping it functional)</span></span><br><span class="line"><span class="keyword">const</span> increasedByOne = numbers.map(<span class="function"><span class="params">num</span> =&gt;</span> num + <span class="number">1</span>);</span><br></pre></td></tr></table></figure>
<p><a name="11.2"></a><br><a name="generators--nope"></a></p>
</li>
<li><p><a href="#generators--nope">11.2</a> 现在不要用generator</p>
<blockquote>
<p>Why? 它在es5上支持的不好</p>
</blockquote>
<p><a name="11.3"></a><br><a name="generators--spacing"></a></p>
</li>
<li><p><a href="#generators--spacing">11.3</a> 如果你一定要用，或者你忽略<a href="#generators--nope">我们的建议</a>, 请确保它们的函数签名空格是得当的。 eslint: <a href="http://eslint.org/docs/rules/generator-star-spacing" target="_blank" rel="noopener"><code>generator-star-spacing</code></a></p>
<blockquote>
<p>Why? <code>function</code> 和 <code>*</code> 是同一概念关键字 - <code>*</code>不是<code>function</code>的修饰符，<code>function*</code>是一个和<code>function</code>不一样的独特结构</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> * <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> bar = <span class="function"><span class="keyword">function</span> * (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> baz = <span class="function"><span class="keyword">function</span> *(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> quux = <span class="function"><span class="keyword">function</span>*(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="function"><span class="keyword">function</span>*<span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> *<span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// very bad</span></span><br><span class="line"><span class="function"><span class="keyword">function</span></span></span><br><span class="line"><span class="function">*</span></span><br><span class="line"><span class="function"><span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// very bad</span></span><br><span class="line"><span class="keyword">const</span> wat = <span class="function"><span class="keyword">function</span></span></span><br><span class="line"><span class="function">*</span></span><br><span class="line"><span class="function">(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> foo = <span class="function"><span class="keyword">function</span>* (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong><a href="#目录">⬆ back to top</a></strong></p>
<h2 id="Properties"><a href="#Properties" class="headerlink" title="Properties"></a>Properties</h2><p>  <a name="12.1"></a><br>  <a name="properties--dot"></a></p>
<ul>
<li><p><a href="#properties--dot">12.1</a> 访问属性时使用点符号. eslint: <a href="http://eslint.org/docs/rules/dot-notation.html" target="_blank" rel="noopener"><code>dot-notation</code></a></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> luke = &#123;</span><br><span class="line">  jedi: <span class="literal">true</span>,</span><br><span class="line">  age: <span class="number">28</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> isJedi = luke[<span class="string">'jedi'</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> isJedi = luke.jedi;</span><br></pre></td></tr></table></figure>
<p><a name="12.2"></a><br><a name="properties--bracket"></a></p>
</li>
<li><p><a href="#properties--bracket">12.2</a> 当获取的属性是变量时用方括号<code>[]</code>取</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> luke = &#123;</span><br><span class="line">  jedi: <span class="literal">true</span>,</span><br><span class="line">  age: <span class="number">28</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getProp</span>(<span class="params">prop</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> luke[prop];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> isJedi = getProp(<span class="string">'jedi'</span>);</span><br></pre></td></tr></table></figure>
<p><a name="12.3"></a><br><a name="es2016-properties--exponentiation-operator"></a></p>
</li>
<li><p><a href="#es2016-properties--exponentiation-operator">12.3</a> 做幂运算时用幂操作符 <code>**</code> 。 eslint: <a href="https://eslint.org/docs/rules/no-restricted-properties" target="_blank" rel="noopener"><code>no-restricted-properties</code></a>.</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> binary = <span class="built_in">Math</span>.pow(<span class="number">2</span>, <span class="number">10</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> binary = <span class="number">2</span> ** <span class="number">10</span>;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong><a href="#目录">⬆ back to top</a></strong></p>
<h2 id="Variables"><a href="#Variables" class="headerlink" title="Variables"></a>Variables</h2><p>  <a name="13.1"></a><br>  <a name="variables--const"></a></p>
<ul>
<li><p><a href="#variables--const">13.1</a>  用<code>const</code>声明变量。不这样做会导致全局变量。 我们想要避免污染全局命名空间。首长这样警告我们。 eslint: <a href="http://eslint.org/docs/rules/no-undef" target="_blank" rel="noopener"><code>no-undef</code></a> <a href="http://eslint.org/docs/rules/prefer-const" target="_blank" rel="noopener"><code>prefer-const</code></a></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line">superPower = <span class="keyword">new</span> SuperPower();</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> superPower = <span class="keyword">new</span> SuperPower();</span><br></pre></td></tr></table></figure>
<p><a name="13.2"></a><br><a name="variables--one-const"></a></p>
</li>
<li><p><a href="#variables--one-const">13.2</a> 每个变量都用一个 <code>const</code> 或 <code>let</code>。 eslint: <a href="http://eslint.org/docs/rules/one-var.html" target="_blank" rel="noopener"><code>one-var</code></a></p>
<blockquote>
<p>Why? 这种方式很容易去声明新的变量，你不用去考虑把<code>;</code>调换成<code>,</code>，或者引入一个只有标点的不同的变化。这种做法也可以是你在调试的时候单步每个声明语句，而不是一下跳过所有声明。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> items = getItems(),</span><br><span class="line">    goSportsTeam = <span class="literal">true</span>,</span><br><span class="line">    dragonball = <span class="string">'z'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="comment">// (compare to above, and try to spot the mistake)</span></span><br><span class="line"><span class="keyword">const</span> items = getItems(),</span><br><span class="line">    goSportsTeam = <span class="literal">true</span>;</span><br><span class="line">    dragonball = <span class="string">'z'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> items = getItems();</span><br><span class="line"><span class="keyword">const</span> goSportsTeam = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">const</span> dragonball = <span class="string">'z'</span>;</span><br></pre></td></tr></table></figure>
<p><a name="13.3"></a><br><a name="variables--const-let-group"></a></p>
</li>
<li><p><a href="#variables--const-let-group">13.3</a> <code>const</code>放一起，<code>let</code>放一起</p>
<blockquote>
<p>Why? 在你需要分配一个新的变量， 而这个变量依赖之前分配过的变量的时候，这种做法是有帮助的</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">let</span> i, len, dragonball,</span><br><span class="line">    items = getItems(),</span><br><span class="line">    goSportsTeam = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">let</span> i;</span><br><span class="line"><span class="keyword">const</span> items = getItems();</span><br><span class="line"><span class="keyword">let</span> dragonball;</span><br><span class="line"><span class="keyword">const</span> goSportsTeam = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">let</span> len;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> goSportsTeam = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">const</span> items = getItems();</span><br><span class="line"><span class="keyword">let</span> dragonball;</span><br><span class="line"><span class="keyword">let</span> i;</span><br><span class="line"><span class="keyword">let</span> length;</span><br></pre></td></tr></table></figure>
<p><a name="13.4"></a><br><a name="variables--define-where-used"></a></p>
</li>
<li><p><a href="#variables--define-where-used">13.4</a> 在你需要的地方声明变量，但是要放在合理的位置</p>
<blockquote>
<p>Why? <code>let</code> 和 <code>const</code> 都是块级作用域而不是函数级作用域</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad - unnecessary function call</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkName</span>(<span class="params">hasName</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> name = getName();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (hasName === <span class="string">'test'</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (name === <span class="string">'test'</span>) &#123;</span><br><span class="line">    <span class="keyword">this</span>.setName(<span class="string">''</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkName</span>(<span class="params">hasName</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (hasName === <span class="string">'test'</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 在需要的时候分配</span></span><br><span class="line">  <span class="keyword">const</span> name = getName();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (name === <span class="string">'test'</span>) &#123;</span><br><span class="line">    <span class="keyword">this</span>.setName(<span class="string">''</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a name="13.5"></a><br><a name="variables--no-chain-assignment"></a></p>
</li>
<li><p><a href="#variables--no-chain-assignment">13.5</a> 不要使用链接变量分配。 eslint: <a href="https://eslint.org/docs/rules/no-multi-assign" target="_blank" rel="noopener"><code>no-multi-assign</code></a></p>
<blockquote>
<p>Why? 链接变量分配创建隐式全局变量。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span> <span class="title">example</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// JavaScript 将这一段解释为</span></span><br><span class="line">  <span class="comment">// let a = ( b = ( c = 1 ) );</span></span><br><span class="line">  <span class="comment">// let 只对变量 a 起作用; 变量 b 和 c 都变成了全局变量</span></span><br><span class="line">  <span class="keyword">let</span> a = b = c = <span class="number">1</span>;</span><br><span class="line">&#125;());</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(a); <span class="comment">// undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(b); <span class="comment">// 1</span></span><br><span class="line"><span class="built_in">console</span>.log(c); <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span> <span class="title">example</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> a = <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">let</span> b = a;</span><br><span class="line">  <span class="keyword">let</span> c = a;</span><br><span class="line">&#125;());</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(a); <span class="comment">// undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(b); <span class="comment">// undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(c); <span class="comment">// undefined</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// `const` 也是如此</span></span><br></pre></td></tr></table></figure>
<p><a name="13.6"></a><br><a name="variables--unary-increment-decrement"></a></p>
</li>
<li><p><a href="#variables--unary-increment-decrement">13.6</a> 不要使用一元自增自减运算符（<code>++</code>， <code>--</code>）. eslint <a href="http://eslint.org/docs/rules/no-plusplus" target="_blank" rel="noopener"><code>no-plusplus</code></a></p>
<blockquote>
<p>Why? 根据eslint文档，一元增量和减量语句受到自动分号插入的影响，并且可能会导致应用程序中的值递增或递减的无声错误。 使用<code>num + = 1</code>而不是<code>num ++</code>或<code>num ++</code>语句来表达你的值也是更有表现力的。 禁止一元增量和减量语句还会阻止您无意地预增/预减值，这也会导致程序出现意外行为。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> array = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">let</span> num = <span class="number">1</span>;</span><br><span class="line">num++;</span><br><span class="line">--num;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> sum = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">let</span> truthyCount = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; array.length; i++)&#123;</span><br><span class="line">  <span class="keyword">let</span> value = array[i];</span><br><span class="line">  sum += value;</span><br><span class="line">  <span class="keyword">if</span> (value) &#123;</span><br><span class="line">    truthyCount++;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> array = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">let</span> num = <span class="number">1</span>;</span><br><span class="line">num += <span class="number">1</span>;</span><br><span class="line">num -= <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> sum = array.reduce(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a + b, <span class="number">0</span>);</span><br><span class="line"><span class="keyword">const</span> truthyCount = array.filter(<span class="built_in">Boolean</span>).length;</span><br></pre></td></tr></table></figure>
<p><a name="13.7"></a><br><a name="variables--linebreak"></a></p>
</li>
<li><p><a href="#variables--linebreak">13.7</a> 在赋值的时候避免在 <code>=</code> 前/后换行。 如果你的赋值语句超出 <a href="https://eslint.org/docs/rules/max-len.html" target="_blank" rel="noopener"><code>max-len</code></a>， 那就用小括号把这个值包起来再换行。 eslint <a href="https://eslint.org/docs/rules/operator-linebreak.html" target="_blank" rel="noopener"><code>operator-linebreak</code></a>.</p>
<blockquote>
<p>Why? 在 <code>=</code> 附近换行容易混淆这个赋值语句。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> foo =</span><br><span class="line">  superLongLongLongLongLongLongLongLongFunctionName();</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> foo</span><br><span class="line">  = <span class="string">'superLongLongLongLongLongLongLongLongString'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> foo = (</span><br><span class="line">  superLongLongLongLongLongLongLongLongFunctionName()</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> foo = <span class="string">'superLongLongLongLongLongLongLongLongString'</span>;</span><br></pre></td></tr></table></figure>
<p><a name="13.8"></a><br><a name="variables--no-unused-vars"></a></p>
</li>
<li><p><a href="#variables--no-unused-vars">13.8</a> 不允许有未使用的变量。 eslint: <a href="https://eslint.org/docs/rules/no-unused-vars" target="_blank" rel="noopener"><code>no-unused-vars</code></a></p>
<blockquote>
<p>Why? 一个声明了但未使用的变量更像是由于重构未完成产生的错误。这种在代码中出现的变量会使阅读者迷惑。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> some_unused_var = <span class="number">42</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 写了没用</span></span><br><span class="line"><span class="keyword">var</span> y = <span class="number">10</span>;</span><br><span class="line">y = <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 变量改了自己的值，也没有用这个变量</span></span><br><span class="line"><span class="keyword">var</span> z = <span class="number">0</span>;</span><br><span class="line">z = z + <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 参数定义了但未使用</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getX</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getXPlusY</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> x = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">var</span> y = a + <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">alert(getXPlusY(x, y));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 'type' 即使没有使用也可以可以被忽略， 因为这个有一个 rest 取值的属性。</span></span><br><span class="line"><span class="comment">// 这是从对象中抽取一个忽略特殊字段的对象的一种形式</span></span><br><span class="line"><span class="keyword">var</span> &#123; type, ...coords &#125; = data;</span><br><span class="line"><span class="comment">// 'coords' 现在就是一个没有 'type' 属性的 'data' 对象</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong><a href="#目录">⬆ back to top</a></strong></p>
<h2 id="Hoisting"><a href="#Hoisting" class="headerlink" title="Hoisting"></a>Hoisting</h2><p>  <a name="14.1"></a><br>  <a name="hoisting--about"></a></p>
<ul>
<li><p><a href="#hoisting--about">14.1</a> <code>var</code>声明会被提前到他的作用域的最前面，它分配的值还没有提前。<code>const</code> 和 <code>let</code>被赋予了新的调用概念<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/let#Temporal_dead_zone_and_errors_with_let" target="_blank" rel="noopener">时效区 —— Temporal Dead Zones (TDZ)</a>。  重要的是要知道为什么 <a href="http://es-discourse.com/t/why-typeof-is-no-longer-safe/15" target="_blank" rel="noopener">typeof不再安全</a>.</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 我们知道这个不会工作，假设没有定义全局的notDefined</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">example</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(notDefined); <span class="comment">// =&gt; throws a ReferenceError</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在你引用的地方之后声明一个变量，他会正常输出是因为变量作用域上升。</span></span><br><span class="line"><span class="comment">// 注意： declaredButNotAssigned的值没有上升</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">example</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(declaredButNotAssigned); <span class="comment">// =&gt; undefined</span></span><br><span class="line">  <span class="keyword">var</span> declaredButNotAssigned = <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 解释器把变量声明提升到作用域最前面，</span></span><br><span class="line"><span class="comment">// 可以重写成如下例子， 二者意义相同</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">example</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> declaredButNotAssigned;</span><br><span class="line">  <span class="built_in">console</span>.log(declaredButNotAssigned); <span class="comment">// =&gt; undefined</span></span><br><span class="line">  declaredButNotAssigned = <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 用 const， let就不一样了</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">example</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(declaredButNotAssigned); <span class="comment">// =&gt; throws a ReferenceError</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">typeof</span> declaredButNotAssigned); <span class="comment">// =&gt; throws a ReferenceError</span></span><br><span class="line">  <span class="keyword">const</span> declaredButNotAssigned = <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a name="14.2"></a><br><a name="hoisting--anon-expressions"></a></p>
</li>
<li><p><a href="#hoisting--anon-expressions">14.2</a> 匿名函数表达式和 <code>var</code> 情况相同</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">example</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(anonymous); <span class="comment">// =&gt; undefined</span></span><br><span class="line"></span><br><span class="line">  anonymous(); <span class="comment">// =&gt; TypeError anonymous is not a function</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> anonymous = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'anonymous function expression'</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a name="14.3"></a><br><a name="hoisting--named-expresions"></a></p>
</li>
<li><p><a href="#hoisting--named-expresions">14.3</a> 已命名函数表达式提升他的变量名，不是函数名或函数体</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">example</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(named); <span class="comment">// =&gt; undefined</span></span><br><span class="line"></span><br><span class="line">  named(); <span class="comment">// =&gt; TypeError named is not a function</span></span><br><span class="line"></span><br><span class="line">  superPower(); <span class="comment">// =&gt; ReferenceError superPower is not defined</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> named = <span class="function"><span class="keyword">function</span> <span class="title">superPower</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Flying'</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数名和变量名一样是也如此</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">example</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(named); <span class="comment">// =&gt; undefined</span></span><br><span class="line"></span><br><span class="line">  named(); <span class="comment">// =&gt; TypeError named is not a function</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> named = <span class="function"><span class="keyword">function</span> <span class="title">named</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'named'</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a name="14.4"></a><br><a name="hoisting--declarations"></a></p>
</li>
<li><p><a href="#hoisting--declarations">14.4</a> 函数声明则提升了函数名和函数体</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">example</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  superPower(); <span class="comment">// =&gt; Flying</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">superPower</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Flying'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>详情请见<a href="http://www.adequatelygood.com/2010/2/JavaScript-Scoping-and-Hoisting/" target="_blank" rel="noopener">JavaScript Scoping &amp; Hoisting</a> by <a href="http://www.adequatelygood.com/" target="_blank" rel="noopener">Ben Cherry</a>.</p>
</li>
</ul>
<p><strong><a href="#目录">⬆ back to top</a></strong></p>
<h2 id="Comparison-Operators-amp-Equality"><a href="#Comparison-Operators-amp-Equality" class="headerlink" title="Comparison Operators &amp; Equality"></a>Comparison Operators &amp; Equality</h2><p>  <a name="15.1"></a><br>  <a name="comparison--eqeqeq"></a></p>
<ul>
<li><p><a href="#comparison--eqeqeq">15.1</a> 用 <code>===</code> 和 <code>!==</code> 而不是 <code>==</code> 和 <code>!=</code>. eslint: <a href="http://eslint.org/docs/rules/eqeqeq.html" target="_blank" rel="noopener"><code>eqeqeq</code></a></p>
<p><a name="15.2"></a><br><a name="comparison--if"></a></p>
</li>
<li><p><a href="#comparison--if">15.2</a> 条件语句如’if’语句使用强制`ToBoolean’抽象方法来评估它们的表达式，并且始终遵循以下简单规则：</p>
<ul>
<li><strong>Objects</strong>   计算成 <strong>true</strong></li>
<li><strong>Undefined</strong> 计算成 <strong>false</strong></li>
<li><strong>Null</strong>      计算成 <strong>false</strong></li>
<li><strong>Booleans</strong>  计算成 <strong>the value of the boolean</strong></li>
<li><strong>Numbers</strong><ul>
<li><strong>+0, -0, or NaN</strong> 计算成 <strong>false</strong></li>
<li>其他 <strong>true</strong></li>
</ul>
</li>
<li><strong>Strings</strong><ul>
<li><code>&#39;&#39;</code> 计算成 <strong>false</strong></li>
<li>其他 <strong>true</strong></li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> ([<span class="number">0</span>] &amp;&amp; []) &#123;</span><br><span class="line">  <span class="comment">// true</span></span><br><span class="line">  <span class="comment">// 数组（即使是空数组）是对象，对象会计算成true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a name="15.3"></a><br><a name="comparison--shortcuts"></a></p>
</li>
<li><p><a href="#comparison--shortcuts">15.3</a> 布尔值用缩写，而字符串和数字要明确比较对象</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">if</span> (isValid === <span class="literal">true</span>) &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">if</span> (isValid) &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">if</span> (name) &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">if</span> (name !== <span class="string">''</span>) &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">if</span> (collection.length) &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">if</span> (collection.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a name="15.4"></a><br><a name="comparison--moreinfo"></a></p>
</li>
<li><p><a href="#comparison--moreinfo">15.4</a> 更多信息请见Angus Croll的<a href="https://javascriptweblog.wordpress.com/2011/02/07/truth-equality-and-javascript/#more-2108" target="_blank" rel="noopener">真理、平等和JavaScript —— Truth Equality and JavaScript</a></p>
<p><a name="15.5"></a><br><a name="comparison--switch-blocks"></a></p>
</li>
<li><p><a href="#comparison--switch-blocks">15.5</a> 在<code>case</code>和<code>default</code>分句里用大括号创建一块包含语法声明的区域(e.g. <code>let</code>, <code>const</code>, <code>function</code>, and <code>class</code>). eslint rules: <a href="http://eslint.org/docs/rules/no-case-declarations.html" target="_blank" rel="noopener"><code>no-case-declarations</code></a>.</p>
<blockquote>
<p>Why? 语法声明在整个<code>switch</code>的代码块里都可见，但是只有当其被分配后才会初始化，他的初始化时当这个<code>case</code>被执行时才产生。 当多个<code>case</code>分句试图定义同一个事情时就出问题了</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">switch</span> (foo) &#123;</span><br><span class="line">  <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">    <span class="keyword">let</span> x = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">    <span class="keyword">const</span> y = <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="comment">// ...</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">default</span>:</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">C</span> </span>&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">switch</span> (foo) &#123;</span><br><span class="line">  <span class="keyword">case</span> <span class="number">1</span>: &#123;</span><br><span class="line">    <span class="keyword">let</span> x = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">case</span> <span class="number">2</span>: &#123;</span><br><span class="line">    <span class="keyword">const</span> y = <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">case</span> <span class="number">3</span>: &#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="comment">// ...</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">    bar();</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">default</span>: &#123;</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">C</span> </span>&#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a name="15.6"></a><br><a name="comparison--nested-ternaries"></a></p>
</li>
<li><p><a href="#comparison--nested-ternaries">15.6</a> 三元表达式不应该嵌套，通常是单行表达式。</p>
<p>eslint rules: <a href="http://eslint.org/docs/rules/no-nested-ternary.html" target="_blank" rel="noopener"><code>no-nested-ternary</code></a>.</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> foo = maybe1 &gt; maybe2</span><br><span class="line">  ? <span class="string">"bar"</span></span><br><span class="line">  : value1 &gt; value2 ? <span class="string">"baz"</span> : <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// better</span></span><br><span class="line"><span class="keyword">const</span> maybeNull = value1 &gt; value2 ? <span class="string">'baz'</span> : <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> foo = maybe1 &gt; maybe2</span><br><span class="line">  ? <span class="string">'bar'</span></span><br><span class="line">  : maybeNull;</span><br><span class="line"></span><br><span class="line"><span class="comment">// best</span></span><br><span class="line"><span class="keyword">const</span> maybeNull = value1 &gt; value2 ? <span class="string">'baz'</span> : <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> foo = maybe1 &gt; maybe2 ? <span class="string">'bar'</span> : maybeNull;</span><br></pre></td></tr></table></figure>
<p><a name="15.7"></a><br><a name="comparison--unneeded-ternary"></a></p>
</li>
<li><p><a href="#comparison--unneeded-ternary">15.7</a> 避免不需要的三元表达式</p>
<p>eslint rules: <a href="http://eslint.org/docs/rules/no-unneeded-ternary.html" target="_blank" rel="noopener"><code>no-unneeded-ternary</code></a>.</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> foo = a ? a : b;</span><br><span class="line"><span class="keyword">const</span> bar = c ? <span class="literal">true</span> : <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">const</span> baz = c ? <span class="literal">false</span> : <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> foo = a || b;</span><br><span class="line"><span class="keyword">const</span> bar = !!c;</span><br><span class="line"><span class="keyword">const</span> baz = !c;</span><br></pre></td></tr></table></figure>
<p><a name="15.8"></a><br><a name="comparison--no-mixed-operators"></a></p>
</li>
<li><p><a href="#comparison--no-mixed-operators">15.8</a> 用圆括号来混合这些操作符。 只有当标准的算术运算符(<code>+</code>, <code>-</code>, <code>*</code>, &amp; <code>/</code>)， 并且它们的优先级显而易见时，可以不用圆括号括起来。 eslint: <a href="https://eslint.org/docs/rules/no-mixed-operators.html" target="_blank" rel="noopener"><code>no-mixed-operators</code></a></p>
<blockquote>
<p>Why? 这提高了可读性，并且明确了开发者的意图</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> foo = a &amp;&amp; b &lt; <span class="number">0</span> || c &gt; <span class="number">0</span> || d + <span class="number">1</span> === <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> bar = a ** b - <span class="number">5</span> % d;</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="comment">// 别人会陷入(a || b) &amp;&amp; c 的迷惑中</span></span><br><span class="line"><span class="keyword">if</span> (a || b &amp;&amp; c) &#123;</span><br><span class="line">  <span class="keyword">return</span> d;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> foo = (a &amp;&amp; b &lt; <span class="number">0</span>) || c &gt; <span class="number">0</span> || (d + <span class="number">1</span> === <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> bar = (a ** b) - (<span class="number">5</span> % d);</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">if</span> (a || (b &amp;&amp; c)) &#123;</span><br><span class="line">  <span class="keyword">return</span> d;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> bar = a + b / c * d;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong><a href="#目录">⬆ back to top</a></strong></p>
<h2 id="Blocks"><a href="#Blocks" class="headerlink" title="Blocks"></a>Blocks</h2><p>  <a name="16.1"></a><br>  <a name="blocks--braces"></a></p>
<ul>
<li><p><a href="#blocks--braces">16.1</a> 用大括号包裹多行代码块。  eslint: <a href="https://eslint.org/docs/rules/nonblock-statement-body-position" target="_blank" rel="noopener"><code>nonblock-statement-body-position</code></a></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">if</span> (test)</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">if</span> (test) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">if</span> (test) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123; <span class="keyword">return</span> <span class="literal">false</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a name="16.2"></a><br><a name="blocks--cuddled-elses"></a></p>
</li>
<li><p><a href="#blocks--cuddled-elses">16.2</a> <code>if</code>表达式的<code>else</code>和<code>if</code>的关闭大括号在一行。 eslint: <a href="http://eslint.org/docs/rules/brace-style.html" target="_blank" rel="noopener"><code>brace-style</code></a></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">if</span> (test) &#123;</span><br><span class="line">  thing1();</span><br><span class="line">  thing2();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">  thing3();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">if</span> (test) &#123;</span><br><span class="line">  thing1();</span><br><span class="line">  thing2();</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  thing3();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a name="16.3"></a><br><a name="blocks--no-else-return"></a></p>
</li>
<li><p><a href="#blocks--no-else-return">16.3</a> 如果 <code>if</code> 语句中总是需要用 <code>return</code> 返回， 那后续的 <code>else</code> 就不需要写了。 <code>if</code> 块中包含 <code>return</code>， 它后面的 <code>else if</code> 块中也包含了 <code>return</code>， 这个时候就可以把 <code>return</code> 分到多个 <code>if</code> 语句块中。 eslint: <a href="https://eslint.org/docs/rules/no-else-return" target="_blank" rel="noopener"><code>no-else-return</code></a></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (x) &#123;</span><br><span class="line">    <span class="keyword">return</span> x;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> y;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">cats</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (x) &#123;</span><br><span class="line">    <span class="keyword">return</span> x;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (y) &#123;</span><br><span class="line">    <span class="keyword">return</span> y;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">dogs</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (x) &#123;</span><br><span class="line">    <span class="keyword">return</span> x;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (y) &#123;</span><br><span class="line">      <span class="keyword">return</span> y;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (x) &#123;</span><br><span class="line">    <span class="keyword">return</span> x;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">cats</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (x) &#123;</span><br><span class="line">    <span class="keyword">return</span> x;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (y) &#123;</span><br><span class="line">    <span class="keyword">return</span> y;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">dogs</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (x) &#123;</span><br><span class="line">    <span class="keyword">if</span> (z) &#123;</span><br><span class="line">      <span class="keyword">return</span> y;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> z;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong><a href="#目录">⬆ back to top</a></strong></p>
<h2 id="Control-Statements"><a href="#Control-Statements" class="headerlink" title="Control Statements"></a>Control Statements</h2><p>  <a name="17.1"></a><br>  <a name="control-statements"></a></p>
<ul>
<li><p><a href="#control-statements">17.1</a> 当你的控制语句(<code>if</code>, <code>while</code> 等)太长或者超过最大长度限制的时候， 把每一个(组)判断条件放在单独一行里。 逻辑操作符放在行首。</p>
<blockquote>
<p>Why? 把逻辑操作符放在行首是让操作符的对齐方式和链式函数保持一致。这提高了可读性，也让复杂逻辑更容易看清楚。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">if</span> ((foo === <span class="number">123</span> || bar === <span class="string">'abc'</span>) &amp;&amp; doesItLookGoodWhenItBecomesThatLong() &amp;&amp; isThisReallyHappening()) &#123;</span><br><span class="line">  thing1();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">if</span> (foo === <span class="number">123</span> &amp;&amp;</span><br><span class="line">  bar === <span class="string">'abc'</span>) &#123;</span><br><span class="line">  thing1();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">if</span> (foo === <span class="number">123</span></span><br><span class="line">  &amp;&amp; bar === <span class="string">'abc'</span>) &#123;</span><br><span class="line">  thing1();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">if</span> (</span><br><span class="line">  foo === <span class="number">123</span> &amp;&amp;</span><br><span class="line">  bar === <span class="string">'abc'</span></span><br><span class="line">) &#123;</span><br><span class="line">  thing1();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">if</span> (</span><br><span class="line">  foo === <span class="number">123</span></span><br><span class="line">  &amp;&amp; bar === <span class="string">'abc'</span></span><br><span class="line">) &#123;</span><br><span class="line">  thing1();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">if</span> (</span><br><span class="line">  (foo === <span class="number">123</span> || bar === <span class="string">'abc'</span>)</span><br><span class="line">  &amp;&amp; doesItLookGoodWhenItBecomesThatLong()</span><br><span class="line">  &amp;&amp; isThisReallyHappening()</span><br><span class="line">) &#123;</span><br><span class="line">  thing1();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">if</span> (foo === <span class="number">123</span> &amp;&amp; bar === <span class="string">'abc'</span>) &#123;</span><br><span class="line">  thing1();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a name="17.2"></a><br><a name="control-statements--value-selection"></a></p>
</li>
<li><p><a href="#control-statements--value-selection">17.2</a> 不要用选择操作符代替控制语句。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line">!isRunning &amp;&amp; startRunning();</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">if</span> (!isRunning) &#123;</span><br><span class="line">  startRunning();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong><a href="#table-of-contents">⬆ back to top</a></strong></p>
<h2 id="Comments"><a href="#Comments" class="headerlink" title="Comments"></a>Comments</h2><p>  <a name="18.1"></a><br>  <a name="comments--multiline"></a></p>
<ul>
<li><p><a href="#comments--multiline">18.1</a> 多行注释用 <code>/** ... */</code></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="comment">// make() returns a new element</span></span><br><span class="line"><span class="comment">// based on the passed in tag name</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// @param &#123;String&#125; tag</span></span><br><span class="line"><span class="comment">// @return &#123;Element&#125; element</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">make</span>(<span class="params">tag</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> element;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * make() returns a new element</span></span><br><span class="line"><span class="comment"> * based on the passed-in tag name</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">make</span>(<span class="params">tag</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> element;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a name="18.2"></a><br><a name="comments--singleline"></a></p>
</li>
<li><p><a href="#comments--singleline">18.2</a> 单行注释用<code>//</code>，将单行注释放在被注释区域上面。如果注释不是在第一行，那么注释前面就空一行</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> active = <span class="literal">true</span>;  <span class="comment">// is current tab</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="comment">// is current tab</span></span><br><span class="line"><span class="keyword">const</span> active = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getType</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'fetching type...'</span>);</span><br><span class="line">  <span class="comment">// set the default type to 'no type'</span></span><br><span class="line">  <span class="keyword">const</span> type = <span class="keyword">this</span>._type || <span class="string">'no type'</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> type;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getType</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'fetching type...'</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// set the default type to 'no type'</span></span><br><span class="line">  <span class="keyword">const</span> type = <span class="keyword">this</span>._type || <span class="string">'no type'</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> type;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// also good</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getType</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// set the default type to 'no type'</span></span><br><span class="line">  <span class="keyword">const</span> type = <span class="keyword">this</span>._type || <span class="string">'no type'</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> type;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a name="18.3"></a><br><a name="comments--spaces"></a></p>
</li>
<li><p><a href="#comments--spaces">18.3</a> 所有注释开头空一个，方便阅读。 eslint: <a href="http://eslint.org/docs/rules/spaced-comment" target="_blank" rel="noopener"><code>spaced-comment</code></a></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="comment">//is current tab</span></span><br><span class="line"><span class="keyword">const</span> active = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="comment">// is current tab</span></span><br><span class="line"><span class="keyword">const</span> active = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *make() returns a new element</span></span><br><span class="line"><span class="comment"> *based on the passed-in tag name</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">make</span>(<span class="params">tag</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> element;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * make() returns a new element</span></span><br><span class="line"><span class="comment"> * based on the passed-in tag name</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">make</span>(<span class="params">tag</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> element;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a name="18.4"></a><br><a name="comments--actionitems"></a></p>
</li>
<li><p><a href="#comments--actionitems">18.4</a> 在你的注释前使用<code>FIXME&#39;或</code>TODO’前缀， 这有助于其他开发人员快速理解你指出的需要重新访问的问题， 或者您建议需要实现的问题的解决方案。 这些不同于常规注释，因为它们是可操作的。 动作是<code>FIXME： - 需要计算出来</code>或<code>TODO： - 需要实现</code>。</p>
<p><a name="18.5"></a><br><a name="comments--fixme"></a></p>
</li>
<li><p><a href="#comments--fixme">18.5</a> 用<code>// FIXME:</code>给问题做注释</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Calculator</span> <span class="keyword">extends</span> <span class="title">Abacus</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>() &#123;</span><br><span class="line">    <span class="keyword">super</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// <span class="doctag">FIXME:</span> shouldn't use a global here</span></span><br><span class="line">    total = <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a name="18.6"></a><br><a name="comments--todo"></a></p>
</li>
<li><p><a href="#comments--todo">18.6</a> 用<code>// TODO:</code>去注释问题的解决方案</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Calculator</span> <span class="keyword">extends</span> <span class="title">Abacus</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>() &#123;</span><br><span class="line">    <span class="keyword">super</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> total should be configurable by an options param</span></span><br><span class="line">    <span class="keyword">this</span>.total = <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong><a href="#目录">⬆ back to top</a></strong></p>
<h2 id="Whitespace"><a href="#Whitespace" class="headerlink" title="Whitespace"></a>Whitespace</h2><p>  <a name="19.1"></a><br>  <a name="whitespace--spaces"></a></p>
<ul>
<li><p><a href="#whitespace--spaces">19.1</a> tab用两个空格. eslint: <a href="http://eslint.org/docs/rules/indent.html" target="_blank" rel="noopener"><code>indent</code></a></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">∙∙∙∙<span class="keyword">const</span> name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">∙<span class="keyword">const</span> name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">baz</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">∙∙<span class="keyword">const</span> name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a name="19.2"></a><br><a name="whitespace--before-blocks"></a></p>
</li>
<li><p><a href="#whitespace--before-blocks">19.2</a> 在大括号前空一格。 eslint: <a href="http://eslint.org/docs/rules/space-before-blocks.html" target="_blank" rel="noopener"><code>space-before-blocks</code></a></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'test'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'test'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line">dog.set(<span class="string">'attr'</span>,&#123;</span><br><span class="line">  age: <span class="string">'1 year'</span>,</span><br><span class="line">  breed: <span class="string">'Bernese Mountain Dog'</span>,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line">dog.set(<span class="string">'attr'</span>, &#123;</span><br><span class="line">  age: <span class="string">'1 year'</span>,</span><br><span class="line">  breed: <span class="string">'Bernese Mountain Dog'</span>,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p><a name="19.3"></a><br><a name="whitespace--around-keywords"></a></p>
</li>
<li><p><a href="#whitespace--around-keywords">19.3</a> 在控制语句(<code>if</code>, <code>while</code> 等)的圆括号前空一格。在函数调用和定义时，参数列表和函数名之间不空格。 eslint: <a href="http://eslint.org/docs/rules/keyword-spacing.html" target="_blank" rel="noopener"><code>keyword-spacing</code></a></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">if</span>(isJedi) &#123;</span><br><span class="line">  fight ();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">if</span> (isJedi) &#123;</span><br><span class="line">  fight();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fight</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log (<span class="string">'Swooosh!'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fight</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'Swooosh!'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a name="19.4"></a><br><a name="whitespace--infix-ops"></a></p>
</li>
<li><p><a href="#whitespace--infix-ops">19.4</a> 用空格来隔开运算符。 eslint: <a href="http://eslint.org/docs/rules/space-infix-ops.html" target="_blank" rel="noopener"><code>space-infix-ops</code></a></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> x=y+<span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> x = y + <span class="number">5</span>;</span><br></pre></td></tr></table></figure>
<p><a name="19.5"></a><br><a name="whitespace--newline-at-end"></a></p>
</li>
<li><p><a href="#whitespace--newline-at-end">19.5</a> 文件结尾空一行. eslint: <a href="https://github.com/eslint/eslint/blob/master/docs/rules/eol-last.md" target="_blank" rel="noopener"><code>eol-last</code></a></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">import</span> &#123; es6 &#125; <span class="keyword">from</span> <span class="string">'./AirbnbStyleGuide'</span>;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> es6;</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">import</span> &#123; es6 &#125; <span class="keyword">from</span> <span class="string">'./AirbnbStyleGuide'</span>;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> es6;↵</span><br><span class="line">↵</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">import</span> &#123; es6 &#125; <span class="keyword">from</span> <span class="string">'./AirbnbStyleGuide'</span>;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> es6;↵</span><br></pre></td></tr></table></figure>
<p><a name="19.6"></a><br><a name="whitespace--chains"></a></p>
</li>
<li><p><a href="#whitespace--chains">19.6</a> 当出现长的方法链（&gt;2个）时用缩进。用点开头强调该行是一个方法调用，而不是一个新的语句。eslint: <a href="http://eslint.org/docs/rules/newline-per-chained-call" target="_blank" rel="noopener"><code>newline-per-chained-call</code></a> <a href="http://eslint.org/docs/rules/no-whitespace-before-property" target="_blank" rel="noopener"><code>no-whitespace-before-property</code></a></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line">$(<span class="string">'#items'</span>).find(<span class="string">'.selected'</span>).highlight().end().find(<span class="string">'.open'</span>).updateCount();</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line">$(<span class="string">'#items'</span>).</span><br><span class="line">  find(<span class="string">'.selected'</span>).</span><br><span class="line">    highlight().</span><br><span class="line">    end().</span><br><span class="line">  find(<span class="string">'.open'</span>).</span><br><span class="line">    updateCount();</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line">$(<span class="string">'#items'</span>)</span><br><span class="line">  .find(<span class="string">'.selected'</span>)</span><br><span class="line">    .highlight()</span><br><span class="line">    .end()</span><br><span class="line">  .find(<span class="string">'.open'</span>)</span><br><span class="line">    .updateCount();</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> leds = stage.selectAll(<span class="string">'.led'</span>).data(data).enter().append(<span class="string">'svg:svg'</span>).classed(<span class="string">'led'</span>, <span class="literal">true</span>)</span><br><span class="line">    .attr(<span class="string">'width'</span>, (radius + margin) * <span class="number">2</span>).append(<span class="string">'svg:g'</span>)</span><br><span class="line">    .attr(<span class="string">'transform'</span>, <span class="string">`translate(<span class="subst">$&#123;radius + margin&#125;</span>,<span class="subst">$&#123;radius + margin&#125;</span>)`</span>)</span><br><span class="line">    .call(tron.led);</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> leds = stage.selectAll(<span class="string">'.led'</span>)</span><br><span class="line">    .data(data)</span><br><span class="line">  .enter().append(<span class="string">'svg:svg'</span>)</span><br><span class="line">    .classed(<span class="string">'led'</span>, <span class="literal">true</span>)</span><br><span class="line">    .attr(<span class="string">'width'</span>, (radius + margin) * <span class="number">2</span>)</span><br><span class="line">  .append(<span class="string">'svg:g'</span>)</span><br><span class="line">    .attr(<span class="string">'transform'</span>, <span class="string">`translate(<span class="subst">$&#123;radius + margin&#125;</span>,<span class="subst">$&#123;radius + margin&#125;</span>)`</span>)</span><br><span class="line">    .call(tron.led);</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> leds = stage.selectAll(<span class="string">'.led'</span>).data(data);</span><br></pre></td></tr></table></figure>
<p><a name="19.7"></a><br><a name="whitespace--after-blocks"></a></p>
</li>
<li><p><a href="#whitespace--after-blocks">19.7</a> 在一个代码块后下一条语句前空一行。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">if</span> (foo) &#123;</span><br><span class="line">  <span class="keyword">return</span> bar;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> baz;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">if</span> (foo) &#123;</span><br><span class="line">  <span class="keyword">return</span> bar;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> baz;</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  foo() &#123;</span><br><span class="line">  &#125;,</span><br><span class="line">  bar() &#123;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">return</span> obj;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  foo() &#123;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  bar() &#123;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> obj;</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> arr = [</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  &#125;,</span><br><span class="line">];</span><br><span class="line"><span class="keyword">return</span> arr;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> arr = [</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  &#125;,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> arr;</span><br></pre></td></tr></table></figure>
<p><a name="19.8"></a><br><a name="whitespace--padded-blocks"></a></p>
</li>
<li><p><a href="#whitespace--padded-blocks">19.8</a> 不要用空白行填充块。 eslint: <a href="http://eslint.org/docs/rules/padded-blocks.html" target="_blank" rel="noopener"><code>padded-blocks</code></a></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.log(foo);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// also bad</span></span><br><span class="line"><span class="keyword">if</span> (baz) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.log(qux);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(foo);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(foo);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">if</span> (baz) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(qux);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(foo);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a name="19.9"></a><br><a name="whitespace--in-parens"></a></p>
</li>
<li><p><a href="#whitespace--in-parens">19.9</a> 圆括号里不要加空格。 eslint: <a href="http://eslint.org/docs/rules/space-in-parens.html" target="_blank" rel="noopener"><code>space-in-parens</code></a></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"> foo </span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> foo;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params">foo</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> foo;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">if</span> ( foo ) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(foo);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">if</span> (foo) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(foo);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a name="19.10"></a><br><a name="whitespace--in-brackets"></a></p>
</li>
<li><p><a href="#whitespace--in-brackets">19.10</a> 方括号里不要加空格。看示例。 eslint: <a href="http://eslint.org/docs/rules/array-bracket-spacing.html" target="_blank" rel="noopener"><code>array-bracket-spacing</code></a></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> foo = [ <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span> ];</span><br><span class="line"><span class="built_in">console</span>.log(foo[ <span class="number">0</span> ]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// good， 逗号分隔符还是要空格的</span></span><br><span class="line"><span class="keyword">const</span> foo = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="built_in">console</span>.log(foo[<span class="number">0</span>]);</span><br></pre></td></tr></table></figure>
<p><a name="19.11"></a><br><a name="whitespace--in-braces"></a></p>
</li>
<li><p><a href="#whitespace--in-braces">19.11</a> 花括号里加空格。 eslint: <a href="http://eslint.org/docs/rules/object-curly-spacing.html" target="_blank" rel="noopener"><code>object-curly-spacing</code></a></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> foo = &#123;<span class="attr">clark</span>: <span class="string">'kent'</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> foo = &#123; <span class="attr">clark</span>: <span class="string">'kent'</span> &#125;;</span><br></pre></td></tr></table></figure>
<p><a name="19.12"></a><br><a name="whitespace--max-len"></a></p>
</li>
<li><a href="#whitespace--max-len">19.12</a> 避免一行代码超过100个字符（包含空格）。</li>
<li><p>注意： 对于<a href="#strings--line-length">上面——strings–line-length</a>，长字符串不受此规则限制，不应分解。 eslint: <a href="http://eslint.org/docs/rules/max-len.html" target="_blank" rel="noopener"><code>max-len</code></a></p>
<blockquote>
<p>Why? 这样确保可读性和可维护性</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> foo = jsonData &amp;&amp; jsonData.foo &amp;&amp; jsonData.foo.bar &amp;&amp; jsonData.foo.bar.baz &amp;&amp; jsonData.foo.bar.baz.quux &amp;&amp; jsonData.foo.bar.baz.quux.xyzzy;</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line">$.ajax(&#123; <span class="attr">method</span>: <span class="string">'POST'</span>, <span class="attr">url</span>: <span class="string">'https://airbnb.com/'</span>, <span class="attr">data</span>: &#123; <span class="attr">name</span>: <span class="string">'John'</span> &#125; &#125;).done(<span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="string">'Congratulations!'</span>)).fail(<span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="string">'You have failed this city.'</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> foo = jsonData</span><br><span class="line">  &amp;&amp; jsonData.foo</span><br><span class="line">  &amp;&amp; jsonData.foo.bar</span><br><span class="line">  &amp;&amp; jsonData.foo.bar.baz</span><br><span class="line">  &amp;&amp; jsonData.foo.bar.baz.quux</span><br><span class="line">  &amp;&amp; jsonData.foo.bar.baz.quux.xyzzy;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line">$.ajax(&#123;</span><br><span class="line">  method: <span class="string">'POST'</span>,</span><br><span class="line">  url: <span class="string">'https://airbnb.com/'</span>,</span><br><span class="line">  data: &#123; <span class="attr">name</span>: <span class="string">'John'</span> &#125;,</span><br><span class="line">&#125;)</span><br><span class="line">  .done(<span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="string">'Congratulations!'</span>))</span><br><span class="line">  .fail(<span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="string">'You have failed this city.'</span>));</span><br></pre></td></tr></table></figure>
<p><a name="19.13"></a><br><a name="whitespace--block-spacing"></a></p>
</li>
<li><p><a href="#whitespace--block-spacing">19.13</a> 作为语句的花括号内也要加空格 —— <code>{</code> 后和 <code>}</code> 前都需要空格。 eslint: <a href="https://eslint.org/docs/rules/block-spacing" target="_blank" rel="noopener"><code>block-spacing</code></a></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;<span class="keyword">return</span> <span class="literal">true</span>;&#125;</span><br><span class="line"><span class="keyword">if</span> (foo) &#123; bar = <span class="number">0</span>;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123; <span class="keyword">return</span> <span class="literal">true</span>; &#125;</span><br><span class="line"><span class="keyword">if</span> (foo) &#123; bar = <span class="number">0</span>; &#125;</span><br></pre></td></tr></table></figure>
<p><a name="19.14"></a><br><a name="whitespace--comma-spacing"></a></p>
</li>
<li><p><a href="#whitespace--comma-spacing">19.14</a> <code>,</code> 前不要空格， <code>,</code> 后需要空格。 eslint: <a href="https://eslint.org/docs/rules/comma-spacing" target="_blank" rel="noopener"><code>comma-spacing</code></a></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">var</span> foo = <span class="number">1</span>,bar = <span class="number">2</span>;</span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span> , <span class="number">2</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">var</span> foo = <span class="number">1</span>, bar = <span class="number">2</span>;</span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>];</span><br></pre></td></tr></table></figure>
<p><a name="19.15"></a><br><a name="whitespace--computed-property-spacing"></a></p>
</li>
<li><p><a href="#whitespace--computed-property-spacing">19.15</a> 计算属性内要空格。参考上述花括号和中括号的规则。  eslint: <a href="https://eslint.org/docs/rules/computed-property-spacing" target="_blank" rel="noopener"><code>computed-property-spacing</code></a></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line">obj[foo ]</span><br><span class="line">obj[ <span class="string">'foo'</span>]</span><br><span class="line"><span class="keyword">var</span> x = &#123;[ b ]: a&#125;</span><br><span class="line">obj[foo[ bar ]]</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line">obj[foo]</span><br><span class="line">obj[<span class="string">'foo'</span>]</span><br><span class="line"><span class="keyword">var</span> x = &#123; [b]: a &#125;</span><br><span class="line">obj[foo[bar]]</span><br></pre></td></tr></table></figure>
<p><a name="19.16"></a><br><a name="whitespace--func-call-spacing"></a></p>
</li>
<li><p><a href="#whitespace--func-call-spacing">19.16</a> 调用函数时，函数名和小括号之间不要空格。 eslint: <a href="https://eslint.org/docs/rules/func-call-spacing" target="_blank" rel="noopener"><code>func-call-spacing</code></a></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line">func ();</span><br><span class="line"></span><br><span class="line">func</span><br><span class="line">();</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line">func();</span><br></pre></td></tr></table></figure>
<p><a name="19.17"></a><br><a name="whitespace--key-spacing"></a></p>
</li>
<li><p><a href="#whitespace--key-spacing">19.17</a> 在对象的字面量属性中， <code>key</code> <code>value</code> 之间要有空格。 eslint: <a href="https://eslint.org/docs/rules/key-spacing" target="_blank" rel="noopener"><code>key-spacing</code></a></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">var</span> obj = &#123; <span class="string">"foo"</span> : <span class="number">42</span> &#125;;</span><br><span class="line"><span class="keyword">var</span> obj2 = &#123; <span class="string">"foo"</span>:<span class="number">42</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">var</span> obj = &#123; <span class="string">"foo"</span>: <span class="number">42</span> &#125;;</span><br></pre></td></tr></table></figure>
<p><a name="19.18"></a><br><a name="whitespace--no-trailing-spaces"></a></p>
</li>
<li><p><a href="#whitespace--no-trailing-spaces">19.18</a> 行末不要空格。 eslint: <a href="https://eslint.org/docs/rules/no-trailing-spaces" target="_blank" rel="noopener"><code>no-trailing-spaces</code></a></p>
<p><a name="19.19"></a><br><a name="whitespace--no-multiple-empty-lines"></a></p>
</li>
<li><p><a href="#whitespace--no-multiple-empty-lines">19.19</a> 避免出现多个空行。 在文件末尾只允许空一行。 eslint: <a href="https://eslint.org/docs/rules/no-multiple-empty-lines" target="_blank" rel="noopener"><code>no-multiple-empty-lines</code></a></p>
<!-- markdownlint-disable MD012 -->
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">var</span> x = <span class="number">1</span>;</span><br></pre></td></tr></table></figure>
<p>var y = 2;</p>
<p>// good<br>var x = 1;</p>
<p>var y = 2;</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">    &lt;!-- markdownlint-enable MD012 --&gt;</span><br><span class="line"></span><br><span class="line">**[⬆ back to top](#目录)**</span><br><span class="line"></span><br><span class="line">## Commas</span><br><span class="line"></span><br><span class="line">  &lt;a name=&quot;20.1&quot;&gt;&lt;/a&gt;</span><br><span class="line">  &lt;a name=&quot;commas--leading-trailing&quot;&gt;&lt;/a&gt;</span><br><span class="line">  - [20.1](#commas--leading-trailing) 不要前置逗号。 eslint: [`comma-style`](http://eslint.org/docs/rules/comma-style.html)</span><br><span class="line"></span><br><span class="line">    ```javascript</span><br><span class="line">    // bad</span><br><span class="line">    const story = [</span><br><span class="line">        once</span><br><span class="line">      , upon</span><br><span class="line">      , aTime</span><br><span class="line">    ];</span><br><span class="line"></span><br><span class="line">    // good</span><br><span class="line">    const story = [</span><br><span class="line">      once,</span><br><span class="line">      upon,</span><br><span class="line">      aTime,</span><br><span class="line">    ];</span><br><span class="line"></span><br><span class="line">    // bad</span><br><span class="line">    const hero = &#123;</span><br><span class="line">        firstName: &apos;Ada&apos;</span><br><span class="line">      , lastName: &apos;Lovelace&apos;</span><br><span class="line">      , birthYear: 1815</span><br><span class="line">      , superPower: &apos;computers&apos;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    // good</span><br><span class="line">    const hero = &#123;</span><br><span class="line">      firstName: &apos;Ada&apos;,</span><br><span class="line">      lastName: &apos;Lovelace&apos;,</span><br><span class="line">      birthYear: 1815,</span><br><span class="line">      superPower: &apos;computers&apos;,</span><br><span class="line">    &#125;;</span><br></pre></td></tr></table></figure>
<p><a name="20.2"></a><br><a name="commas--dangling"></a></p>
</li>
<li><p><a href="#commas--dangling">20.2</a> 额外结尾逗号: <strong>要</strong> eslint: <a href="http://eslint.org/docs/rules/comma-dangle.html" target="_blank" rel="noopener"><code>comma-dangle</code></a></p>
<blockquote>
<p>Why? 这导致git diffs更清洁。 此外，像Babel这样的转换器会删除转换代码中的额外的逗号，这意味着你不必担心旧版浏览器中的<a href="https://github.com/airbnb/javascript/blob/es5-deprecated/es5/README.md#commas" target="_blank" rel="noopener">结尾逗号问题</a>。</p>
</blockquote>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">// bad - 没有结尾逗号的 git diff</span><br><span class="line">const hero = &#123;</span><br><span class="line">     firstName: 'Florence',</span><br><span class="line"><span class="deletion">-    lastName: 'Nightingale'</span></span><br><span class="line"><span class="addition">+    lastName: 'Nightingale',</span></span><br><span class="line"><span class="addition">+    inventorOf: ['coxcomb chart', 'modern nursing']</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">// good - 有结尾逗号的 git diff</span><br><span class="line">const hero = &#123;</span><br><span class="line">     firstName: 'Florence',</span><br><span class="line">     lastName: 'Nightingale',</span><br><span class="line"><span class="addition">+    inventorOf: ['coxcomb chart', 'modern nursing'],</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> hero = &#123;</span><br><span class="line">  firstName: <span class="string">'Dana'</span>,</span><br><span class="line">  lastName: <span class="string">'Scully'</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> heroes = [</span><br><span class="line">  <span class="string">'Batman'</span>,</span><br><span class="line">  <span class="string">'Superman'</span></span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> hero = &#123;</span><br><span class="line">  firstName: <span class="string">'Dana'</span>,</span><br><span class="line">  lastName: <span class="string">'Scully'</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> heroes = [</span><br><span class="line">  <span class="string">'Batman'</span>,</span><br><span class="line">  <span class="string">'Superman'</span>,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createHero</span>(<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">  firstName,</span></span></span><br><span class="line"><span class="function"><span class="params">  lastName,</span></span></span><br><span class="line"><span class="function"><span class="params">  inventorOf</span></span></span><br><span class="line"><span class="function"><span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// does nothing</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createHero</span>(<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">  firstName,</span></span></span><br><span class="line"><span class="function"><span class="params">  lastName,</span></span></span><br><span class="line"><span class="function"><span class="params">  inventorOf,</span></span></span><br><span class="line"><span class="function"><span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// does nothing</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good (note that a comma must not appear after a "rest" element)</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createHero</span>(<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">  firstName,</span></span></span><br><span class="line"><span class="function"><span class="params">  lastName,</span></span></span><br><span class="line"><span class="function"><span class="params">  inventorOf,</span></span></span><br><span class="line"><span class="function"><span class="params">  ...heroArgs</span></span></span><br><span class="line"><span class="function"><span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// does nothing</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line">createHero(</span><br><span class="line">  firstName,</span><br><span class="line">  lastName,</span><br><span class="line">  inventorOf</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line">createHero(</span><br><span class="line">  firstName,</span><br><span class="line">  lastName,</span><br><span class="line">  inventorOf,</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// good (note that a comma must not appear after a "rest" element)</span></span><br><span class="line">createHero(</span><br><span class="line">  firstName,</span><br><span class="line">  lastName,</span><br><span class="line">  inventorOf,</span><br><span class="line">  ...heroArgs</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong><a href="#目录">⬆ back to top</a></strong></p>
<h2 id="Semicolons"><a href="#Semicolons" class="headerlink" title="Semicolons"></a>Semicolons</h2><p>  <a name="21.1"></a></p>
<ul>
<li><p><a href="#21.1">21.1</a> <strong>Yup.</strong> eslint: <a href="http://eslint.org/docs/rules/semi.html" target="_blank" rel="noopener"><code>semi</code></a></p>
<blockquote>
<p>Why? 当 JavaScript 遇到没有分号结尾的一行，它会执行<a href="https://tc39.github.io/ecma262/#sec-automatic-semicolon-insertion" target="_blank" rel="noopener">自动插入分号 <code>Automatic Semicolon Insertion</code></a>这一规则来决定行末是否加分号。如果JavaScript在你的断行里错误的插入了分号，就会出现一些古怪的行为。当新的功能加到JavaScript里后， 这些规则会变得更复杂难懂。显示的结束语句，并通过配置代码检查去捕获没有带分号的地方可以帮助你防止这种错误。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> name = <span class="string">'Skywalker'</span></span><br><span class="line">  <span class="keyword">return</span> name</span><br><span class="line">&#125;)()</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> name = <span class="string">'Skywalker'</span>;</span><br><span class="line">  <span class="keyword">return</span> name;</span><br><span class="line">&#125;());</span><br><span class="line"></span><br><span class="line"><span class="comment">// good, 行首加分号，避免文件被连接到一起时立即执行函数被当做变量来执行。</span></span><br><span class="line">;<span class="function">(<span class="params">(</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> name = <span class="string">'Skywalker'</span>;</span><br><span class="line">  <span class="keyword">return</span> name;</span><br><span class="line">&#125;());</span><br></pre></td></tr></table></figure>
<p><a href="https://stackoverflow.com/questions/7365172/semicolon-before-self-invoking-function/7365214%237365214" target="_blank" rel="noopener">Read more</a>.</p>
</li>
</ul>
<p><strong><a href="#目录">⬆ back to top</a></strong></p>
<h2 id="Type-Casting-amp-Coercion"><a href="#Type-Casting-amp-Coercion" class="headerlink" title="Type Casting &amp; Coercion"></a>Type Casting &amp; Coercion</h2><p>  <a name="22.1"></a><br>  <a name="coercion--explicit"></a></p>
<ul>
<li><p><a href="#coercion--explicit">22.1</a> 在语句开始执行强制类型转换。</p>
<p><a name="22.2"></a><br><a name="coercion--strings"></a></p>
</li>
<li><p><a href="#coercion--strings">22.2</a>  Strings: eslint: <a href="https://eslint.org/docs/rules/no-new-wrappers" target="_blank" rel="noopener"><code>no-new-wrappers</code></a></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// =&gt; this.reviewScore = 9;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> totalScore = <span class="keyword">new</span> <span class="built_in">String</span>(<span class="keyword">this</span>.reviewScore); <span class="comment">// typeof totalScore is "object" not "string"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> totalScore = <span class="keyword">this</span>.reviewScore + <span class="string">''</span>; <span class="comment">// invokes this.reviewScore.valueOf()</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> totalScore = <span class="keyword">this</span>.reviewScore.toString(); <span class="comment">// 不保证返回string</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> totalScore = <span class="built_in">String</span>(<span class="keyword">this</span>.reviewScore);</span><br></pre></td></tr></table></figure>
<p><a name="22.3"></a><br><a name="coercion--numbers"></a></p>
</li>
<li><p><a href="#coercion--numbers">22.3</a> Numbers: 用 <code>Number</code> 做类型转换，<code>parseInt</code>转换string常需要带上基数。 eslint: <a href="http://eslint.org/docs/rules/radix" target="_blank" rel="noopener"><code>radix</code></a></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> inputValue = <span class="string">'4'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> val = <span class="keyword">new</span> <span class="built_in">Number</span>(inputValue);</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> val = +inputValue;</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> val = inputValue &gt;&gt; <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> val = <span class="built_in">parseInt</span>(inputValue);</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> val = <span class="built_in">Number</span>(inputValue);</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> val = <span class="built_in">parseInt</span>(inputValue, <span class="number">10</span>);</span><br></pre></td></tr></table></figure>
<p><a name="22.4"></a><br><a name="coercion--comment-deviations"></a></p>
</li>
<li><p><a href="#coercion--comment-deviations">22.4</a> 请在注释中解释为什么要用移位运算和你在做什么。无论你做什么狂野的事，比如由于 <code>parseInt</code> 是你的性能瓶颈导致你一定要用移位运算。 请说明这个是因为<a href="https://jsperf.com/coercion-vs-casting/3" target="_blank" rel="noopener">性能原因</a>,</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * parseInt是代码运行慢的原因</span></span><br><span class="line"><span class="comment"> * 用Bitshifting将字符串转成数字使代码运行效率大幅增长</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> val = inputValue &gt;&gt; <span class="number">0</span>;</span><br></pre></td></tr></table></figure>
<p><a name="22.5"></a><br><a name="coercion--bitwise"></a></p>
</li>
<li><p><a href="#coercion--bitwise">22.5</a> <strong>注意:</strong> 用移位运算要小心. 数字使用<a href="https://es5.github.io/#x4.3.19" target="_blank" rel="noopener">64-位</a>表示的，但移位运算常常返回的是32为整形<a href="https://es5.github.io/#x11.7" target="_blank" rel="noopener">source</a>)。移位运算对大于32位的整数会导致意外行为。<a href="https://github.com/airbnb/javascript/issues/109" target="_blank" rel="noopener">Discussion</a>. 最大的32位整数是 2,147,483,647:</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="number">2147483647</span> &gt;&gt; <span class="number">0</span> <span class="comment">//=&gt; 2147483647</span></span><br><span class="line"><span class="number">2147483648</span> &gt;&gt; <span class="number">0</span> <span class="comment">//=&gt; -2147483648</span></span><br><span class="line"><span class="number">2147483649</span> &gt;&gt; <span class="number">0</span> <span class="comment">//=&gt; -2147483647</span></span><br></pre></td></tr></table></figure>
<p><a name="22.6"></a><br><a name="coercion--booleans"></a></p>
</li>
<li><p><a href="#coercion--booleans">22.6</a> 布尔:</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> age = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> hasAge = <span class="keyword">new</span> <span class="built_in">Boolean</span>(age);</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> hasAge = <span class="built_in">Boolean</span>(age);</span><br><span class="line"></span><br><span class="line"><span class="comment">// best</span></span><br><span class="line"><span class="keyword">const</span> hasAge = !!age;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong><a href="#目录">⬆ back to top</a></strong></p>
<h2 id="Naming-Conventions"><a href="#Naming-Conventions" class="headerlink" title="Naming Conventions"></a>Naming Conventions</h2><p>  <a name="23.1"></a><br>  <a name="naming--descriptive"></a></p>
<ul>
<li><p><a href="#naming--descriptive">23.1</a> 避免用一个字母命名，让你的命名可描述。 eslint: <a href="http://eslint.org/docs/rules/id-length" target="_blank" rel="noopener"><code>id-length</code></a></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">q</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">query</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a name="23.2"></a><br><a name="naming--camelCase"></a></p>
</li>
<li><p><a href="#naming--camelCase">23.2</a> 用小驼峰式命名你的对象、函数、实例。 eslint: <a href="http://eslint.org/docs/rules/camelcase.html" target="_blank" rel="noopener"><code>camelcase</code></a></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> OBJEcttsssss = &#123;&#125;;</span><br><span class="line"><span class="keyword">const</span> this_is_my_object = &#123;&#125;;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">c</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> thisIsMyObject = &#123;&#125;;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">thisIsMyFunction</span>(<span class="params"></span>) </span>&#123;&#125;</span><br></pre></td></tr></table></figure>
<p><a name="23.3"></a><br><a name="naming--PascalCase"></a></p>
</li>
<li><p><a href="#naming--PascalCase">23.3</a> 用大驼峰式命名类。 eslint: <a href="http://eslint.org/docs/rules/new-cap.html" target="_blank" rel="noopener"><code>new-cap</code></a></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">user</span>(<span class="params">options</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = options.name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> bad = <span class="keyword">new</span> user(&#123;</span><br><span class="line">  name: <span class="string">'nope'</span>,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(options) &#123;</span><br><span class="line">    <span class="keyword">this</span>.name = options.name;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> good = <span class="keyword">new</span> User(&#123;</span><br><span class="line">  name: <span class="string">'yup'</span>,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p><a name="23.4"></a><br><a name="naming--leading-underscore"></a></p>
</li>
<li><p><a href="#naming--leading-underscore">23.4</a> 不要用前置或后置下划线。 eslint: <a href="http://eslint.org/docs/rules/no-underscore-dangle.html" target="_blank" rel="noopener"><code>no-underscore-dangle</code></a></p>
<blockquote>
<p>Why? JavaScript 没有私有属性或私有方法的概念。尽管前置下划线通常的概念上意味着“private”，事实上，这些属性是完全公有的，因此这部分也是你的API的内容。这一概念可能会导致开发者误以为更改这个不会导致崩溃或者不需要测试。 如果你想要什么东西变成“private”，那就不要让它在这里出现。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">this</span>.__firstName__ = <span class="string">'Panda'</span>;</span><br><span class="line"><span class="keyword">this</span>.firstName_ = <span class="string">'Panda'</span>;</span><br><span class="line"><span class="keyword">this</span>._firstName = <span class="string">'Panda'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">this</span>.firstName = <span class="string">'Panda'</span>;</span><br></pre></td></tr></table></figure>
<p><a name="23.5"></a><br><a name="naming--self-this"></a></p>
</li>
<li><p><a href="#naming--self-this">23.5</a> 不要保存引用<code>this</code>， 用箭头函数或<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind" target="_blank" rel="noopener">函数绑定——Function#bind</a>.</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> self = <span class="keyword">this</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(self);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> that = <span class="keyword">this</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(that);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a name="23.6"></a><br><a name="naming--filename-matches-export"></a></p>
</li>
<li><p><a href="#naming--filename-matches-export">23.6</a> export default导出模块A，则这个文件名也叫A.*， import 时候的参数也叫A。 大小写完全一致。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// file 1 contents</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CheckBox</span> </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> CheckBox;</span><br><span class="line"></span><br><span class="line"><span class="comment">// file 2 contents</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">fortyTwo</span>(<span class="params"></span>) </span>&#123; <span class="keyword">return</span> <span class="number">42</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// file 3 contents</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">insideDirectory</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// in some other file</span></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">import</span> CheckBox <span class="keyword">from</span> <span class="string">'./checkBox'</span>; <span class="comment">// PascalCase import/export, camelCase filename</span></span><br><span class="line"><span class="keyword">import</span> FortyTwo <span class="keyword">from</span> <span class="string">'./FortyTwo'</span>; <span class="comment">// PascalCase import/filename, camelCase export</span></span><br><span class="line"><span class="keyword">import</span> InsideDirectory <span class="keyword">from</span> <span class="string">'./InsideDirectory'</span>; <span class="comment">// PascalCase import/filename, camelCase export</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">import</span> CheckBox <span class="keyword">from</span> <span class="string">'./check_box'</span>; <span class="comment">// PascalCase import/export, snake_case filename</span></span><br><span class="line"><span class="keyword">import</span> forty_two <span class="keyword">from</span> <span class="string">'./forty_two'</span>; <span class="comment">// snake_case import/filename, camelCase export</span></span><br><span class="line"><span class="keyword">import</span> inside_directory <span class="keyword">from</span> <span class="string">'./inside_directory'</span>; <span class="comment">// snake_case import, camelCase export</span></span><br><span class="line"><span class="keyword">import</span> index <span class="keyword">from</span> <span class="string">'./inside_directory/index'</span>; <span class="comment">// requiring the index file explicitly</span></span><br><span class="line"><span class="keyword">import</span> insideDirectory <span class="keyword">from</span> <span class="string">'./insideDirectory/index'</span>; <span class="comment">// requiring the index file explicitly</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">import</span> CheckBox <span class="keyword">from</span> <span class="string">'./CheckBox'</span>; <span class="comment">// PascalCase export/import/filename</span></span><br><span class="line"><span class="keyword">import</span> fortyTwo <span class="keyword">from</span> <span class="string">'./fortyTwo'</span>; <span class="comment">// camelCase export/import/filename</span></span><br><span class="line"><span class="keyword">import</span> insideDirectory <span class="keyword">from</span> <span class="string">'./insideDirectory'</span>; <span class="comment">// camelCase export/import/directory name/implicit "index"</span></span><br><span class="line"><span class="comment">// ^ supports both insideDirectory.js and insideDirectory/index.js</span></span><br></pre></td></tr></table></figure>
<p><a name="23.7"></a><br><a name="naming--camelCase-default-export"></a></p>
</li>
<li><p><a href="#naming--camelCase-default-export">23.7</a> 当你export-default一个函数时，函数名用小驼峰，文件名需要和函数名一致。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">makeStyleGuide</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> makeStyleGuide;</span><br></pre></td></tr></table></figure>
<p><a name="23.8"></a><br><a name="naming--PascalCase-singleton"></a></p>
</li>
<li><p><a href="#naming--PascalCase-singleton">23.8</a> 当你export一个结构体/类/单例/函数库/对象 时用大驼峰。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> AirbnbStyleGuide = &#123;</span><br><span class="line">  es6: &#123;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> AirbnbStyleGuide;</span><br></pre></td></tr></table></figure>
<p><a name="22.9"></a><br><a name="naming--Acronyms-and-Initialisms"></a></p>
</li>
<li><p><a href="#naming--Acronyms-and-Initialisms">22.9</a> 简称和缩写应该全部大写或全部小写。</p>
<blockquote>
<p>Why? 名字都是给人读的，不是为了适应电脑的算法的。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">import</span> SmsContainer <span class="keyword">from</span> <span class="string">'./containers/SmsContainer'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> HttpRequests = [</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">import</span> SMSContainer <span class="keyword">from</span> <span class="string">'./containers/SMSContainer'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> HTTPRequests = [</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="comment">// best</span></span><br><span class="line"><span class="keyword">import</span> TextMessageContainer <span class="keyword">from</span> <span class="string">'./containers/TextMessageContainer'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// best</span></span><br><span class="line"><span class="keyword">const</span> Requests = [</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">];</span><br></pre></td></tr></table></figure>
<p><a name="23.10"></a><br><a name="naming--uppercase"></a></p>
</li>
<li><p><a href="#naming--uppercase">23.10</a> 你可以用全大写字母设置静态变量，他需要满足三个条件。</p>
<ol>
<li>导出变量</li>
<li>是 <code>const</code> 定义的， 保证不能被改变</li>
<li>这个变量是可信的，他的子属性都是不能被改变的</li>
</ol>
<blockquote>
<p>Why? 这是一个附加工具，帮助开发者去辨识一个变量是不是不可变的。</p>
<ul>
<li>对于所有的 <code>const</code> 变量呢？ —— 这个是不必要的。大写变量不应该在同一个文件里定义并使用， 它只能用来作为导出变量。 赞同！</li>
<li>那导出的对象呢？ —— 大写变量处在export的最高级(e.g. <code>EXPORTED_OBJECT.key</code>) 并且他包含的所有子属性都是不可变的。</li>
</ul>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> PRIVATE_VARIABLE = <span class="string">'should not be unnecessarily uppercased within a file'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> THING_TO_BE_CHANGED = <span class="string">'should obviously not be uppercased'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">let</span> REASSIGNABLE_VARIABLE = <span class="string">'do not use let with uppercase variables'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ---</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// allowed but does not supply semantic value</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> apiKey = <span class="string">'SOMEKEY'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// better in most cases</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> API_KEY = <span class="string">'SOMEKEY'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ---</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// bad - unnecessarily uppercases key while adding no semantic value</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> MAPPING = &#123;</span><br><span class="line">  KEY: <span class="string">'value'</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> MAPPING = &#123;</span><br><span class="line">  key: <span class="string">'value'</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong><a href="#目录">⬆ back to top</a></strong></p>
<h2 id="Accessors"><a href="#Accessors" class="headerlink" title="Accessors"></a>Accessors</h2><p>  <a name="24.1"></a><br>  <a name="accessors--not-required"></a></p>
<ul>
<li><p><a href="#accessors--not-required">24.1</a> 不需要使用属性的访问器函数。</p>
<p><a name="24.2"></a><br><a name="accessors--no-getters-setters"></a></p>
</li>
<li><p><a href="#accessors--no-getters-setters">24.2</a> 不要使用JavaScript的getters/setters，因为他们会产生副作用，并且难以测试、维护和理解。相反的，你可以用 getVal()和setVal(‘hello’)去创造你自己的accessor函数</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dragon</span> </span>&#123;</span><br><span class="line">  <span class="keyword">get</span> age() &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">set</span> age(value) &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dragon</span> </span>&#123;</span><br><span class="line">  getAge() &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  setAge(value) &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a name="24.3"></a><br><a name="accessors--boolean-prefix"></a></p>
</li>
<li><p><a href="#accessors--boolean-prefix">24.3</a> 如果属性/方法是<code>boolean</code>， 用 <code>isVal()</code> 或 <code>hasVal()</code></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">if</span> (!dragon.age()) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">if</span> (!dragon.hasAge()) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a name="24.4"></a><br><a name="accessors--consistent"></a></p>
</li>
<li><p><a href="#accessors--consistent">24.4</a> 用get()和set()函数是可以的，但是要一起用</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Jedi</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(options = &#123;&#125;) &#123;</span><br><span class="line">    <span class="keyword">const</span> lightsaber = options.lightsaber || <span class="string">'blue'</span>;</span><br><span class="line">    <span class="keyword">this</span>.set(<span class="string">'lightsaber'</span>, lightsaber);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">set</span>(key, val) &#123;</span><br><span class="line">    <span class="keyword">this</span>[key] = val;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">get</span>(key) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>[key];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong><a href="#目录">⬆ back to top</a></strong></p>
<h2 id="Events"><a href="#Events" class="headerlink" title="Events"></a>Events</h2><p>  <a name="25.1"></a><br>  <a name="events--hash"></a></p>
<ul>
<li><p><a href="#events--hash">25.1</a> 通过哈希而不是原始值向事件装载数据时(不论是DOM事件还是像Backbone事件的很多属性)。 这使得后续的贡献者（程序员）想这个事件装载更多的数据时不用去找或者更新每个处理器。例如：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line">$(<span class="keyword">this</span>).trigger(<span class="string">'listingUpdated'</span>, listing.id);</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">$(<span class="keyword">this</span>).on(<span class="string">'listingUpdated'</span>, (e, listingId) =&gt; &#123;</span><br><span class="line">  <span class="comment">// do something with listingId</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>prefer:</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// good</span></span><br><span class="line">$(<span class="keyword">this</span>).trigger(<span class="string">'listingUpdated'</span>, &#123; <span class="attr">listingId</span>: listing.id &#125;);</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">$(<span class="keyword">this</span>).on(<span class="string">'listingUpdated'</span>, (e, data) =&gt; &#123;</span><br><span class="line">  <span class="comment">// do something with data.listingId</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p><strong><a href="#目录">⬆ back to top</a></strong></p>
</li>
</ul>
<h2 id="jQuery"><a href="#jQuery" class="headerlink" title="jQuery"></a>jQuery</h2><p>  <a name="26.1"></a><br>  <a name="jquery--dollar-prefix"></a></p>
<ul>
<li><p><a href="#jquery--dollar-prefix">26.1</a> jQuery对象用<code>$</code>变量表示。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> sidebar = $(<span class="string">'.sidebar'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> $sidebar = $(<span class="string">'.sidebar'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> $sidebarBtn = $(<span class="string">'.sidebar-btn'</span>);</span><br></pre></td></tr></table></figure>
<p><a name="26.2"></a><br><a name="jquery--cache"></a></p>
</li>
<li><p><a href="#jquery--cache">26.2</a> 暂存jQuery查找</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setSidebar</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  $(<span class="string">'.sidebar'</span>).hide();</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">  $(<span class="string">'.sidebar'</span>).css(&#123;</span><br><span class="line">    <span class="string">'background-color'</span>: <span class="string">'pink'</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setSidebar</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> $sidebar = $(<span class="string">'.sidebar'</span>);</span><br><span class="line">  $sidebar.hide();</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">  $sidebar.css(&#123;</span><br><span class="line">    <span class="string">'background-color'</span>: <span class="string">'pink'</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a name="26.3"></a><br><a name="jquery--queries"></a></p>
</li>
<li><p><a href="#jquery--queries">26.3</a> DOM查找用层叠式<code>$(&#39;.sidebar ul&#39;)</code> 或 父节点 &gt; 子节点 <code>$(&#39;.sidebar &gt; ul&#39;)</code>. <a href="http://jsperf.com/jquery-find-vs-context-sel/16" target="_blank" rel="noopener">jsPerf</a></p>
<p><a name="26.4"></a><br><a name="jquery--find"></a></p>
</li>
<li><p><a href="#jquery--find">26.4</a> 用jQuery对象查询作用域的<code>find</code>方法查询</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line">$(<span class="string">'ul'</span>, <span class="string">'.sidebar'</span>).hide();</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line">$(<span class="string">'.sidebar'</span>).find(<span class="string">'ul'</span>).hide();</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line">$(<span class="string">'.sidebar ul'</span>).hide();</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line">$(<span class="string">'.sidebar &gt; ul'</span>).hide();</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line">$sidebar.find(<span class="string">'ul'</span>).hide();</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong><a href="#目录">⬆ back to top</a></strong></p>
<h2 id="ES5-兼容性"><a href="#ES5-兼容性" class="headerlink" title="ES5 兼容性"></a>ES5 兼容性</h2><p>  <a name="27.1"></a><br>  <a name="es5-compat--kangax"></a></p>
<ul>
<li><a href="#es5-compat--kangax">27.1</a> 参考<a href="https://twitter.com/kangax/" target="_blank" rel="noopener">Kangax</a>的ES5<a href="https://kangax.github.io/es5-compat-table/" target="_blank" rel="noopener">兼容性列表</a>.</li>
</ul>
<p><strong><a href="#目录">⬆ back to top</a></strong></p>
<h2 id="ECMAScript-6-ES-2015-Styles"><a href="#ECMAScript-6-ES-2015-Styles" class="headerlink" title="ECMAScript 6+ (ES 2015+) Styles"></a>ECMAScript 6+ (ES 2015+) Styles</h2><p>  <a name="28.1"></a><br>  <a name="es6-styles"></a></p>
<ul>
<li><a href="#es6-styles">28.1</a> 这是收集到的各种ES6特性的链接</li>
</ul>
<ol>
<li><a href="#arrow-functions">箭头函数——Arrow Functions</a></li>
<li><a href="#classes--constructors">类——Classes</a></li>
<li><a href="#es6-object-shorthand">对象缩写——Object Shorthand</a></li>
<li><a href="#es6-object-concise">对象简写——Object Concise</a></li>
<li><a href="#es6-computed-properties">对象计算属性——Object Computed Properties</a></li>
<li><a href="#es6-template-literals">模板字符串——Template Strings</a></li>
<li><a href="#destructuring">解构赋值——Destructuring</a></li>
<li><a href="#es6-default-parameters">默认参数——Default Parameters</a></li>
<li><a href="#es6-rest">Rest</a></li>
<li><a href="#es6-array-spreads">Array Spreads</a></li>
<li><a href="#references">Let and Const</a></li>
<li><a href="#es2016-properties--exponentiation-operator">幂操作符——Exponentiation Operator</a></li>
<li><a href="#iterators-and-generators">迭代器和生成器——Iterators and Generators</a></li>
<li><p><a href="#modules">模块——Modules</a></p>
<p><a name="28.2"></a><br><a name="tc39-proposals"></a></p>
<ul>
<li><p><a href="#tc39-proposals">28.2</a> 不要用<a href="https://github.com/tc39/proposals" target="_blank" rel="noopener">TC39 proposals</a>， TC39还没有到 stage 3。</p>
<blockquote>
<p>Why? <a href="https://tc39.github.io/process-document/" target="_blank" rel="noopener">它还不是最终版</a>, 他可能还有很多变化，或者被撤销。 我们想要用的是 JavaScript， 提议还不是JavaScript。</p>
</blockquote>
</li>
</ul>
</li>
</ol>
<p><strong><a href="#目录">⬆ back to top</a></strong></p>
<h2 id="Standard-Library"><a href="#Standard-Library" class="headerlink" title="Standard Library"></a>Standard Library</h2><p>  <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects" target="_blank" rel="noopener">标准库</a>中包含一些功能受损但是由于历史原因遗留的工具类</p>
<p>  <a name="29.1"></a><br>  <a name="standard-library--isnan"></a></p>
<ul>
<li><p><a href="#standard-library--isnan">29.1</a> 用 <code>Number.isNaN</code> 代替全局的 <code>isNaN</code>.<br>eslint: <a href="https://eslint.org/docs/rules/no-restricted-globals" target="_blank" rel="noopener"><code>no-restricted-globals</code></a></p>
<blockquote>
<p>Why? 全局 <code>isNaN</code> 强制把非数字转成数字， 然后对于任何强转后为 <code>NaN</code> 的变量都返回 <code>true</code><br>如果你想用这个功能，就显式的用它。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="built_in">isNaN</span>(<span class="string">'1.2'</span>); <span class="comment">// false</span></span><br><span class="line"><span class="built_in">isNaN</span>(<span class="string">'1.2.3'</span>); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="built_in">Number</span>.isNaN(<span class="string">'1.2.3'</span>); <span class="comment">// false</span></span><br><span class="line"><span class="built_in">Number</span>.isNaN(<span class="built_in">Number</span>(<span class="string">'1.2.3'</span>)); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<p><a name="29.2"></a><br><a name="standard-library--isfinite"></a></p>
</li>
<li><p><a href="#standard-library--isfinite">29.2</a> 用 <code>Number.isFinite</code> 代替 <code>isFinite</code>.<br>eslint: <a href="https://eslint.org/docs/rules/no-restricted-globals" target="_blank" rel="noopener"><code>no-restricted-globals</code></a></p>
<blockquote>
<p>Why? 理由同上，会把一个非数字变量强转成数字，然后做判断。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="built_in">isFinite</span>(<span class="string">'2e3'</span>); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="built_in">Number</span>.isFinite(<span class="string">'2e3'</span>); <span class="comment">// false</span></span><br><span class="line"><span class="built_in">Number</span>.isFinite(<span class="built_in">parseInt</span>(<span class="string">'2e3'</span>, <span class="number">10</span>)); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="Testing"><a href="#Testing" class="headerlink" title="Testing"></a>Testing</h2><p>  <a name="30.1"></a><br>  <a name="testing--yup"></a></p>
<ul>
<li><p><a href="#testing--yup">30.1</a> <strong>Yup.</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a name="30.2"></a><br><a name="testing--for-real"></a></p>
</li>
<li><a href="#testing--for-real">30.2</a> <strong>No, but seriously</strong>:<ul>
<li>无论用那个测试框架，你都需要写测试。</li>
<li>尽量去写很多小而美的纯函数，减少突变的发生</li>
<li>小心 stub 和 mock —— 这会让你的测试变得脆弱。</li>
<li>在 Airbnb 首选 <a href="https://www.npmjs.com/package/mocha" target="_blank" rel="noopener"><code>mocha</code></a>。 <a href="https://www.npmjs.com/package/tape" target="_blank" rel="noopener"><code>tape</code></a> 偶尔被用来测试一些小的，独立的模块。</li>
<li>100%测试覆盖率是我们努力的目标，即便实际上很少达到。</li>
<li>每当你修了一个bug， 都要写一个回归测试。 一个bug修复了，没有回归测试，很可能以后会再次出问题。</li>
</ul>
</li>
</ul>
<p><strong><a href="#目录">⬆ back to top</a></strong></p>
<h2 id="The-JavaScript-Style-Guide-Guide"><a href="#The-JavaScript-Style-Guide-Guide" class="headerlink" title="The JavaScript Style Guide Guide"></a>The JavaScript Style Guide Guide</h2><ul>
<li><a href="https://github.com/airbnb/javascript/wiki/The-JavaScript-Style-Guide-Guide" target="_blank" rel="noopener">Reference</a></li>
</ul>
<h1 id><a href="#" class="headerlink" title="};"></a>};</h1>]]></content>
      <tags>
        <tag>前端编码规范</tag>
        <tag>JavaScript</tag>
      </tags>
  </entry>
</search>
